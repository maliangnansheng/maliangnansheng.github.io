{"meta":{"title":"Nan's Blog","subtitle":"å¼±è€…æ‰è¨€å‘½ï¼Œå¼ºè€…åªè¨€è¿ï¼","description":"å…‹å·±å¤ç¤¼","author":"é©¬äº®å—ç”Ÿ","url":""},"pages":[{"title":"åˆ†ç±»","date":"2018-12-06T11:48:02.000Z","updated":"2018-12-10T08:59:19.994Z","comments":false,"path":"categories/index.html","permalink":"/categories/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2018-12-06T11:46:40.000Z","updated":"2018-12-10T08:58:50.994Z","comments":false,"path":"tags/index.html","permalink":"/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨frpå®ç°å†…ç½‘ç©¿é€","slug":"æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨frpå®ç°å†…ç½‘ç©¿é€","date":"2019-04-12T07:26:19.000Z","updated":"2019-04-16T09:16:39.538Z","comments":true,"path":"2019/04/12/æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨frpå®ç°å†…ç½‘ç©¿é€/","link":"","permalink":"/2019/04/12/æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨frpå®ç°å†…ç½‘ç©¿é€/","excerpt":"","text":"frp æ˜¯ä¸€ä¸ªå¯ç”¨äºå†…ç½‘ç©¿é€çš„é«˜æ€§èƒ½çš„åå‘ä»£ç†åº”ç”¨ï¼Œæ”¯æŒ tcp, udp, http, https åè®®ã€‚ æ•°æ®å‡†å¤‡ï¼š å…¬ç½‘IP: X.X.X.X å†…ç½‘ç”µè„‘ä½¿ç”¨çš„æ˜¯win10-64ç³»ç»Ÿ å…¬ç½‘ç”µè„‘ä¸ºlinux-64ç³»ç»Ÿã€‚ æœåŠ¡ç«¯é…ç½®æ–‡ä»¶ä¸‹è½½ä¸‹è½½åœ°å€ï¼šfrpä¸‹è½½ å…·æœ‰å…¬ç½‘IPçš„ç”µè„‘å°†ä½œä¸ºfrpæœåŠ¡ç«¯(frps)ï¼Œé¦–å…ˆå»é¡¹ç›®åœ°å€çš„releasesé¡µé¢ä¸‹è½½ä¸æœåŠ¡ç«¯ç³»ç»ŸåŒ¹é…çš„æ–‡ä»¶å¹¶è§£å‹ 123456# è¿›å…¥homeç›®å½•cd /home# ä¸‹è½½å¯¹åº”çš„frpä½œä¸ºæœåŠ¡ç«¯wget https://github.com/fatedier/frp/releases/download/v0.26.0/frp_0.26.0_linux_amd64.tar.gz# è§£å‹tar -zxvf frp_0.26.0_linux_amd64.tar.gz ç¼–è¾‘é…ç½®æ–‡ä»¶1234# è¿›å…¥frpcd frp_0.26.0_linux_amd64/# ç¼–è¾‘frps.inié…ç½®æ–‡ä»¶vim frps.ini ç¼–è¾‘frps.iniä¸ºä»¥ä¸‹å†…å®¹ï¼š bind_portä¸ºå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯è¿›è¡Œé€šä¿¡çš„ç«¯å£ã€‚å…¶å®ƒæ›´ä¸°å¯Œçš„é…ç½®å¯å‚è€ƒfrps_full.iniå’Œé¡¹ç›®å¸®åŠ©æ–‡æ¡£ã€‚ å¯åŠ¨æœåŠ¡ç«¯è¿›è¡Œåˆ°è§£å‹åçš„frpç›®å½•ï¼Œç„¶åé€šè¿‡./frps -c frps.iniå‘½ä»¤å³å¯å¯åŠ¨æœåŠ¡ç«¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 12cd /home/frp_0.26.0_linux_amd64/./frps -c frps.ini è®¾ç½®å¼€æœºå¯åŠ¨å’Œåå°è¿è¡Œä¸Šä¸€æ­¥ä¸­çš„frpså æ®äº†æ•´ä¸ªå‘½ä»¤çª—å£ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥è¦è€ƒè™‘å¦‚ä½•è®©å®ƒåœ¨åå°è¿è¡Œå¹¶ä¸”å¼€æœºè‡ªå¯ï¼šé¦–å…ˆé€šè¿‡vim /etc/systemd/system/frps.serviceå‘½ä»¤æ–°å»ºæ–‡ä»¶å¹¶å†™å…¥ä»¥ä¸‹å†…å®¹: 12345678910111213[Unit]Description=frps daemonAfter=syslog.target network.targetWants=network.target[Service]Type=simpleExecStart=/home/frp_0.26.0_linux_amd64/frps -c /home/frp_0.26.0_linux_amd64/frps.iniRestart= alwaysRestartSec=1min[Install]WantedBy=multi-user.target æ³¨æ„ExecStartä¸­è¦é…ç½®æˆè‡ªå·±çš„è·¯å¾„.ç„¶åä½¿ç”¨systemctl start|stop|restart frpså³å¯æ“ä½œfrps, ç”¨systemctl enable frpså³å¯å°†frpsè®¾ç½®ä¸ºå¼€æœºå¯åŠ¨ã€‚ å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ä¸‹è½½å…·æœ‰å†…ç½‘IPçš„ç”µè„‘å°†ä½œä¸ºå®¢æˆ·ç«¯(frpc)ï¼Œåœ¨releasesé¡µé¢ä¸‹è½½frp_0.16.0_windows_amd64.zipè§£å‹ ç¼–è¾‘é…ç½®æ–‡ä»¶ç¼–è¾‘frpc.iniä¸ºä»¥ä¸‹å†…å®¹ï¼š 123456789[common]server_addr = X.X.X.Xserver_port = 7000[ssh]type = tcplocal_ip = 127.0.0.1local_port = 22remote_port = 6000 æ³¨æ„ï¼š sever_addré…ç½®ä¸ºå…¬ç½‘ç”µè„‘çš„IPï¼Œserver_portä¸frps.iniä¸­çš„bind_portä¸€è‡´ã€‚ sshä¸ºè¿œç¨‹æ¡Œé¢çš„é…ç½®ã€‚ å¯åŠ¨æœåŠ¡ç«¯åŒå‡»frpc.exeæˆ–è€…ç”¨å‘½ä»¤ frpc -c frpc.iniå³å¯å¯åŠ¨å®¢æˆ·ç«¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ³¨æ„ï¼šè¿™æ—¶å€™å¾ˆå¯èƒ½å¯åŠ¨ä¸äº†ï¼Œä¸€èˆ¬æƒ…å†µæ˜¯å› ä¸ºæœåŠ¡å™¨ç«¯ï¼ˆlinuxï¼‰7000ç«¯å£æ²¡å¼€æ”¾ï¼š 123456# æŸ¥çœ‹ç«¯å£å¼€æ”¾æƒ…å†µfirewall-cmd --list-all# æ·»åŠ å¼€æ”¾ç«¯å£firewall-cmd --zone=public --add-port=7000/tcp --permanent# é‡å¯é˜²ç«å¢™systemctl restart firewalld ç„¶åå†æ‰§è¡Œfrpc -c frpc.iniå°±å¯ä»¥æ­£å¸¸å¯åŠ¨è¿æ¥äº†ã€‚ è®¾ç½®å¼€æœºå¯åŠ¨å’Œåå°è¿è¡ŒåŒæ ·çš„é“ç†ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å¯¹å®¢æˆ·ç«¯è®¾ç½®åå°è¿è¡Œå’Œå¼€æœºè‡ªå¯ã€‚å€ŸåŠ© winsw å·¥å…·å¯ä»¥å°†frpcæ³¨å†Œä¸ºwindowsç³»ç»Ÿä¸­çš„æœåŠ¡ã€‚ ä¸‹è½½winswæœ€æ–°ç‰ˆï¼Œä¸ºäº†æ–¹ä¾¿å°†å…¶é‡å‘½åä¸ºwinsw.exe, å°†è¯¥æ–‡ä»¶å’Œfrpc.exeæ”¾åœ¨ä¸€èµ·, ç„¶åæ–°å»ºwinsw.xmlå†™å…¥ä»¥ä¸‹å†…å®¹ï¼š 12345678&lt;service&gt; &lt;id&gt;frp&lt;/id&gt; &lt;name&gt;frp&lt;/name&gt; &lt;description&gt;ç”¨frpå‘å¸ƒæœ¬åœ°ç”µè„‘ç½‘ç«™åˆ°å¤–ç½‘&lt;/description&gt; &lt;executable&gt;frpc&lt;/executable&gt; &lt;arguments&gt;-c frpc.ini&lt;/arguments&gt; &lt;logmode&gt;reset&lt;/logmode&gt;&lt;/service&gt; ä¸‹è½½winswåï¼Œåœ¨windowä¸Šå®‰è£… .net framework4 ï¼Œå¦åˆ™åé¢ä¼šå‡ºé—®é¢˜ã€‚ï¼ˆå¾ˆé‡è¦ï¼‰ ç„¶åä½¿ç”¨winsw installå’Œwinsw startå‘½ä»¤å³å¯å°†frpcå®‰è£…ä¸ºç³»ç»ŸæœåŠ¡ã€‚ win+råé€šè¿‡services.mscè¿›å…¥åˆ°æœåŠ¡åˆ—è¡¨é¡µé¢æ‰¾åˆ°frpæœåŠ¡ã€‚","categories":[{"name":"å†…ç½‘ç©¿é€","slug":"å†…ç½‘ç©¿é€","permalink":"/categories/å†…ç½‘ç©¿é€/"}],"tags":[{"name":"frp","slug":"frp","permalink":"/tags/frp/"},{"name":"Linux","slug":"Linux","permalink":"/tags/Linux/"},{"name":"Windows","slug":"Windows","permalink":"/tags/Windows/"}]},{"title":"CloudStackä»‹ç»","slug":"CloudStackä»‹ç»","date":"2019-04-04T06:27:56.000Z","updated":"2019-04-04T06:30:02.241Z","comments":true,"path":"2019/04/04/CloudStackä»‹ç»/","link":"","permalink":"/2019/04/04/CloudStackä»‹ç»/","excerpt":"","text":"åŸºæœ¬ä¸Šï¼Œäº‘è®¡ç®—åªæ˜¯ä¸€ç§æŠŠ IT èµ„æºå½“ä½œæœåŠ¡æ¥æä¾›çš„æ‰‹æ®µã€‚å‡ ä¹æ‰€æœ‰ IT èµ„æºéƒ½å¯ä»¥ä½œä¸ºäº‘æœåŠ¡æ¥æä¾›ï¼šåº”ç”¨ç¨‹åºã€è®¡ç®—èƒ½åŠ›ã€å­˜å‚¨å®¹é‡ã€è”ç½‘ã€ç¼–ç¨‹å·¥å…·ï¼Œä»¥è‡³äºé€šä¿¡æœåŠ¡å’Œåä½œå·¥å…·ã€‚ äº‘è®¡ç®—æœ€æ—©ä¸º Googleã€Amazon ç­‰å…¶ä»–æ‰©å»ºåŸºç¡€è®¾æ–½çš„å¤§å‹äº’è”ç½‘æœåŠ¡æä¾›å•†æ‰€é‡‡ç”¨ã€‚äºæ˜¯äº§ç”Ÿä¸€ç§æ¶æ„ï¼šå¤§è§„æ¨¡æ‰©å±•ã€æ°´å¹³åˆ†å¸ƒçš„ç³»ç»Ÿèµ„æºï¼ŒæŠ½è±¡ä¸ºè™šæ‹Ÿ IT æœåŠ¡ï¼Œå¹¶ä½œä¸ºæŒç»­é…ç½®ã€åˆç”¨çš„èµ„æºè¿›è¡Œç®¡ç†ã€‚ å°±æœ€ç»ˆç”¨æˆ·è€Œè¨€ï¼Œäº‘è®¡ç®—æ„å‘³ç€æ²¡æœ‰ç¡¬ä»¶è´­ç½®æˆæœ¬ã€æ²¡æœ‰éœ€è¦ç®¡ç†çš„è½¯ä»¶è®¸å¯è¯æˆ–å‡çº§ã€ä¸éœ€è¦é›‡ä½£æ–°çš„å‘˜å·¥æˆ–å’¨è¯¢äººå‘˜ã€ä¸éœ€è¦ç§Ÿèµè®¾æ–½ã€æ²¡æœ‰ä»»ä½•ç§ç±»çš„åŸºå»ºæŠ•èµ„ï¼Œè€Œä¸”è¿˜æ²¡æœ‰éšæ€§æˆæœ¬ã€‚åªæ˜¯ä¸€ç§ç”¨ä»ªè¡¨æµ‹é‡å‡ºæ¥çš„ã€æ ¹æ®ä½¿ç”¨æƒ…å†µæ”¯ä»˜çš„è®¢è´­è´¹æˆ–å›ºå®šçš„è®¢è´­è´¹ã€‚åªæ˜¯ç”¨æ‚¨æ‰€éœ€çš„é‡ï¼Œè€Œä¸”åªæŒ‰ä½¿ç”¨é‡ä»˜è´¹ã€‚ äº‘è®¡ç®—ç»“æ„å›¾å¦‚ä¸‹ï¼š åŸºç¡€è®¾æ–½å½“åšæœåŠ¡ï¼ˆIaaSï¼‰åŸºç¡€è®¾æ–½å½“ä½œæœåŠ¡ (IaaS) å¤„äºæœ€ä½å±‚çº§ï¼Œè€Œä¸”æ˜¯ä¸€ç§ä½œä¸ºæ ‡å‡†åŒ–æœåŠ¡åœ¨ç½‘ä¸Šæä¾›åŸºæœ¬å­˜å‚¨å’Œè®¡ç®—èƒ½åŠ›çš„æ‰‹æ®µã€‚æœåŠ¡å™¨ã€å­˜å‚¨ç³»ç»Ÿã€äº¤æ¢æœºã€è·¯ç”±å™¨å’Œå…¶ä»–ç³»ç»Ÿåä½œ (ä¾‹å¦‚ï¼Œé€šè¿‡è™šæ‹ŸåŒ–æŠ€æœ¯) å¤„ç†ç‰¹å®šç±»å‹çš„å·¥ä½œè´Ÿè½½ â€” ä»æ‰¹å¤„ç†åˆ°å³°å€¼è´Ÿè½½æœŸé—´çš„æœåŠ¡å™¨/å­˜å‚¨æ‰©å¤§ã€‚ æœ€è‘—åçš„å•†ä¸šç¤ºä¾‹æ˜¯ Amazon Web æœåŠ¡ (AWS)ï¼Œå…¶ EC2 å’Œ S3 æœåŠ¡åˆ†åˆ«æä¾›åŸºæœ¬è®¡ç®—å’Œå­˜å‚¨æœåŠ¡ã€‚å›½å†…ä»£è¡¨é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€ç™¾åº¦äº‘ã€é‡‘å±±äº‘ç­‰ã€‚ ä¼˜åŠ¿ï¼š åˆ©ç”¨ç‡æ›´é«˜ â€” åœ¨è™šæ‹ŸåŒ–ä¹‹å‰ï¼Œä¼ä¸šæ•°æ®ä¸­å¿ƒçš„æœåŠ¡å™¨å’Œå­˜å‚¨åˆ©ç”¨ç‡ä¸€èˆ¬å¹³å‡ä¸åˆ° 50% (äº‹å®ä¸Šï¼Œé€šå¸¸åˆ©ç”¨ç‡ä¸º 10% åˆ° 15%)ã€‚é€šè¿‡è™šæ‹ŸåŒ–ï¼Œå¯ä»¥æŠŠå·¥ä½œè´Ÿè½½å°è£…ä¸€å¹¶è½¬ç§»åˆ°ç©ºé—²æˆ–ä½¿ç”¨ä¸è¶³çš„ç³»ç»Ÿï¼Œè¿™å°±æ„å‘³ç€å¯ä»¥æ•´åˆç°æœ‰ç³»ç»Ÿï¼Œå› è€Œå¯ä»¥å»¶è¿Ÿæˆ–é¿å…è´­ä¹°æ›´å¤šæœåŠ¡å™¨å®¹é‡ã€‚ èµ„æºæ•´åˆ â€” è™šæ‹ŸåŒ–ä½¿å¾—æ•´åˆå¤šä¸ª IT èµ„æºæˆä¸ºå¯èƒ½ã€‚é™¤æœåŠ¡å™¨å’Œå­˜å‚¨æ•´åˆä¹‹å¤–ï¼Œè™šæ‹ŸåŒ–æä¾›ä¸€ä¸ªæ•´åˆç³»ç»Ÿæ¶æ„ã€åº”ç”¨ç¨‹åºåŸºç¡€è®¾æ–½ã€æ•°æ®å’Œæ•°æ®åº“ã€æ¥å£ã€ç½‘ç»œã€æ¡Œé¢ç³»ç»Ÿç”šè‡³ä¸šåŠ¡æµç¨‹ï¼Œå› è€Œå¯ä»¥èŠ‚çº¦æˆæœ¬å’Œæé«˜æ•ˆç‡ã€‚ èŠ‚çœç”µèƒ½/æˆæœ¬ â€” è¿è¡Œä¼ä¸šçº§æ•°æ®ä¸­å¿ƒæ‰€éœ€çš„ç”µèƒ½ä¸å†æ— é™åˆ¶åœ°ä½¿ç”¨ï¼Œè€Œæˆæœ¬å‘ˆèºæ—‹å¼ä¸Šå‡è¶‹åŠ¿ã€‚åœ¨æœåŠ¡å™¨ç¡¬ä»¶ä¸Šæ¯èŠ±ä¸€ç¾å…ƒï¼Œå°±ä¼šåœ¨ç”µè´¹ä¸Šå¢åŠ ä¸€ç¾å…ƒ (åŒ…æ‹¬æœåŠ¡å™¨è¿è¡Œå’Œæ•£çƒ­æ–¹é¢çš„æˆæœ¬)ã€‚åˆ©ç”¨è™šæ‹ŸåŒ–è¿›è¡Œæ•´åˆä½¿å¾—é™ä½æ€»èƒ½è€—å’ŒèŠ‚çº¦å¤§é‡èµ„é‡‘æˆä¸ºå¯èƒ½ã€‚ èŠ‚çº¦ç©ºé—´ â€” æœåŠ¡å™¨è†¨èƒ€ä»ç„¶æ˜¯å¤šæ•°ä¼ä¸šæ•°æ®ä¸­å¿ƒé¢ä¸´çš„ä¸€ä¸ªä¸¥é‡é—®é¢˜ï¼Œå¯æ‰©å¤§æ•°æ®ä¸­å¿ƒå¹¶ä¸æ€»æ˜¯ä¸€ä¸ªè‰¯å¥½çš„é€‰æ‹©ï¼Œå› ä¸ºæ¯å¢å¤§ä¸€å¹³æ–¹ç±³ç©ºé—´ï¼Œå°±ä¼šå¹³å‡å¢åŠ å¾ˆå¤šæˆæœ¬ã€‚è™šæ‹ŸåŒ–é€šè¿‡æŠŠå¤šä¸ªè™šæ‹Ÿç³»ç»Ÿæ•´åˆåˆ°è¾ƒå°‘ç‰©ç†ç³»ç»Ÿä¸Šï¼Œå¯ä»¥ç¼“è§£ç©ºé—´å‹åŠ›ã€‚ ç¾éš¾æ¢å¤ (Disaster recovery) /ä¸šåŠ¡è¿ç»­ (Business Continuity) â€” è™šæ‹ŸåŒ–å¯æé«˜æ€»ä½“æœåŠ¡çº§åˆ©ç”¨ç‡ï¼Œå¹¶æä¾›ç¾éš¾æ¢å¤è§£å†³æ–¹æ¡ˆæ–°é€‰é¡¹ã€‚ CloudStack ä»‹ç»å®˜ç½‘ï¼šhttp://cloudstack.apache.org/ CloudStackæ˜¯ä¸€ä¸ªå¼€æºçš„å…·æœ‰é«˜å¯ç”¨æ€§åŠæ‰©å±•æ€§çš„äº‘è®¡ç®—å¹³å°CloudStack æ˜¯ä¸€ä¸ªå¼€æºçš„äº‘æ“ä½œç³»ç»Ÿï¼Œå®ƒå¯ä»¥å¸®åŠ©ç”¨æˆ·åˆ©ç”¨è‡ªå·±çš„ç¡¬ä»¶æä¾›ç±»ä¼¼äºAmazon EC2é‚£æ ·çš„å…¬å…±äº‘æœåŠ¡ã€‚CloudStackå¯ä»¥é€šè¿‡ç»„ç»‡å’Œåè°ƒç”¨æˆ·çš„è™šæ‹ŸåŒ–èµ„æºï¼Œæ„å»ºä¸€ä¸ªå’Œè°çš„ç¯å¢ƒã€‚ CloudStackæ˜¯ä¸€ä¸ªå¼€æºçš„å…·æœ‰é«˜å¯ç”¨æ€§åŠæ‰©å±•æ€§çš„äº‘è®¡ç®—å¹³å°CloudStack æ˜¯ä¸€ä¸ªå¼€æºçš„äº‘æ“ä½œç³»ç»Ÿï¼Œå®ƒå¯ä»¥å¸®åŠ©ç”¨æˆ·åˆ©ç”¨è‡ªå·±çš„ç¡¬ä»¶æä¾›ç±»ä¼¼äºAmazon EC2é‚£æ ·çš„å…¬å…±äº‘æœåŠ¡ã€‚CloudStackå¯ä»¥é€šè¿‡ç»„ç»‡å’Œåè°ƒç”¨æˆ·çš„è™šæ‹ŸåŒ–èµ„æºï¼Œæ„å»ºä¸€ä¸ªå’Œè°çš„ç¯å¢ƒã€‚ Cloudstackæ”¯æŒç®¡ç†å¤§éƒ¨åˆ†ä¸»æµçš„hypervisorsï¼Œå¦‚KVMï¼ŒXenServerï¼ŒVMwareï¼ŒOracle VMï¼ŒXenç­‰ã€‚ CloudStack éƒ¨ç½²å›¾å¦‚ä¸‹ï¼š Zoneï¼šZone å¯¹åº”äºç°å®ä¸­çš„ä¸€ä¸ªæ•°æ®ä¸­å¿ƒï¼Œå®ƒæ˜¯ CloudStack ä¸­æœ€å¤§çš„ä¸€ä¸ªå•å…ƒã€‚ å³ä»åŒ…å«å…³ç³»ä¸Šæ¥è¯´ï¼Œä¸€ä¸ª zone åŒ…å«å¤šä¸ª podï¼Œä¸€ä¸ª pod åŒ…å«å¤šä¸ª clusterï¼Œä¸€ä¸ª cluster åŒ…å«å¤šä¸ª hostã€‚ æä¾›ç‚¹ï¼ˆPodsï¼‰ï¼šä¸€ä¸ªæä¾›ç‚¹é€šå¸¸ä»£è¡¨ä¸€ä¸ªæœºæ¶ï¼ŒæœºæŸœé‡Œé¢çš„ä¸»æœºåœ¨åŒä¸€ä¸ªå­ç½‘ï¼Œæ¯ä¸ªåŒºåŸŸä¸­å¿…é¡»åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæä¾›ç‚¹ï¼Œæä¾›ç‚¹ä¸­åŒ…å«ä¸»æœºå’Œä¸»å­˜å‚¨æœåŠ¡å™¨ï¼Œ CloudStack çš„å†…éƒ¨ç®¡ç†é€šä¿¡é…ç½®ä¸€ä¸ªé¢„ç•™ IP åœ°å€èŒƒå›´ã€‚é¢„ç•™çš„ IP èŒƒå›´å¯¹äº‘ä¸­çš„æ¯ä¸ªåŒºåŸŸæ¥è¯´å¿…é¡»å”¯ä¸€ã€‚ é›†ç¾¤ï¼ˆClustersï¼‰ï¼šCluster æ˜¯å¤šä¸ªä¸»æœºç»„æˆçš„ä¸€ä¸ªé›†ç¾¤ã€‚ â€‹ åŒä¸€ä¸ªclusterä¸­çš„ä¸»æœºæœ‰ç›¸åŒçš„ç¡¬ä»¶ï¼Œç›¸åŒçš„ Hypervisorï¼Œå’Œå…±ç”¨åŒæ ·çš„å­˜å‚¨ã€‚åŒä¸€ä¸ª cluster ä¸­çš„è™šæ‹Ÿæœºï¼Œå¯ä»¥å®ç°æ— ä¸­æ–­æœåŠ¡åœ°ä»ä¸€ä¸ªä¸»æœºè¿ç§»åˆ°å¦å¤–ä¸€ä¸ªä¸Šã€‚ â€‹ é›†ç¾¤ç”±ä¸€ä¸ªæˆ–å¤šä¸ªå®¿ä¸»æœºå’Œä¸€ä¸ªæˆ–å¤šä¸ªä¸»è¦å­˜å‚¨æœåŠ¡å™¨æ„æˆã€‚é›†ç¾¤çš„å¤§å°å–å†³äºä¸‹å±‚è™šæ‹Ÿæœºè½¯ä»¶ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹åŸºæœ¬æ— å»ºè®®ã€‚å½“ä½¿ç”¨VMwareæ—¶ï¼Œæ¯ä¸ªVMwareé›†ç¾¤éƒ½è¢«vCenter æœåŠ¡å™¨ç®¡ç†ã€‚ç®¡ç†å‘˜å¿…é¡»åœ¨æœ¬äº§å“ä¸­ç™»è®°vCenterã€‚æ¯ä¸ªzoneä¸‹å¯ä»¥æœ‰å¤šä¸ªvCenteræœåŠ¡å™¨ã€‚æ¯ä¸ªvCenteræœåŠ¡å™¨å¯èƒ½ç®¡ç†å¤šä¸ªVMwareé›†ç¾¤ ä¸»æœºï¼ˆHostsï¼‰ï¼š Host å°±æ˜¯è¿è¡Œçš„è™šæ‹Ÿæœºï¼ˆVMï¼‰ä¸»æœºã€‚å®¿ä¸»æœºå°±æ˜¯ä¸ªç‹¬ç«‹çš„è®¡ç®—æœºã€‚å®¿ä¸»æœºè¿è¡Œæ¥å®¾è™šæ‹Ÿæœºå¹¶æä¾›å…¶ç›¸åº”çš„è®¡ç®—èµ„æºã€‚æ¯ä¸ªå®¿ä¸»æœºéƒ½è£…æœ‰è™šæ‹Ÿæœºè½¯ä»¶æ¥è¿è¡Œæ¥å®¾è™šæ‹Ÿæœºã€‚æ¯”å¦‚ä¸€ä¸ªå¼€å¯äº†kvmæ”¯æŒçš„æœåŠ¡å™¨ï¼Œä¸€ä¸ªæ€æ°XenServeræœåŠ¡å™¨ï¼Œæˆ–è€…ä¸€ä¸ªESXiæœåŠ¡å™¨éƒ½å¯ä»¥ä½œä¸ºå®¿ä¸»æœºã€‚ å®¿ä¸»æœºåœ¨CloudStackéƒ¨ç½²ä¸­å±äºæœ€å°çš„ç»„ç»‡å•å…ƒã€‚å®¿ä¸»æœºåŒ…å«äºé›†ç¾¤ä¸­ï¼Œé›†ç¾¤åˆå±äºæä¾›ç‚¹ï¼Œè€ŒåŒºåŸŸä¸­åŒ…å«æä¾›ç‚¹ï¼ˆå°±æ˜¯åœ¨é€»è¾‘æ¦‚å¿µä¸Šzone&gt;pod&gt;cluster&gt;hostï¼‰ï¼Œæ–°å¢çš„å®¿ä¸»æœºå¯ä»¥éšæ—¶æ·»åŠ ä»¥æä¾›æ›´å¤šèµ„æºç»™æ¥å®¾è™šæ‹Ÿæœºï¼ŒCloudStackè‡ªåŠ¨æ¢æµ‹å®¿ä¸»æœºçš„cpuæ•°é‡å’Œå†…å­˜èµ„æºã€‚å®¿ä¸»æœºå¯¹ç»ˆç«¯ç”¨æˆ·ä¸å¯è§ã€‚ç»ˆç«¯ç”¨æˆ·ä¸èƒ½å†³å®šä»–ä»¬çš„è™šæ‹Ÿæœºè¢«åˆ†é…åˆ°å“ªå°å®¿ä¸»æœºã€‚ CloudStack ä¸­å­˜åœ¨ä¸¤ç§å­˜å‚¨ï¼š Primary storageï¼šä¸€çº§å­˜å‚¨ä¸ cluster å…³è”ï¼Œå®ƒä¸ºè¯¥ cluster ä¸­çš„ä¸»æœºçš„å…¨éƒ¨è™šæ‹Ÿæœºæä¾›ç£ç›˜å·ã€‚ä¸€ä¸ª cluster è‡³å°‘æœ‰ä¸€ä¸ªä¸€çº§å­˜å‚¨ï¼Œä¸”åœ¨éƒ¨ç½²æ—¶ä½ç½®è¦ä¸´è¿‘ä¸»æœºä»¥æä¾›é«˜æ€§èƒ½ã€‚ Secondary storageï¼šäºŒçº§å­˜å‚¨ä¸ zone å…³è”ï¼Œå®ƒå­˜å‚¨æ¨¡æ¿æ–‡ä»¶ï¼ŒISO é•œåƒå’Œç£ç›˜å·å¿«ç…§ã€‚","categories":[{"name":"Linux","slug":"Linux","permalink":"/categories/Linux/"}],"tags":[{"name":"CloudStack","slug":"CloudStack","permalink":"/tags/CloudStack/"},{"name":"ä»‹ç»","slug":"ä»‹ç»","permalink":"/tags/ä»‹ç»/"}]},{"title":"æ­å»ºhttpæœåŠ¡å™¨-nginx","slug":"æ­å»ºhttpæœåŠ¡å™¨-nginx","date":"2019-04-04T03:49:55.000Z","updated":"2019-04-19T03:41:22.012Z","comments":true,"path":"2019/04/04/æ­å»ºhttpæœåŠ¡å™¨-nginx/","link":"","permalink":"/2019/04/04/æ­å»ºhttpæœåŠ¡å™¨-nginx/","excerpt":"","text":"å®‰è£…å®‰è£… nginx 1yum -y install nginx è¿™ä¸€æ­¥å¯èƒ½ä¼šé‡åˆ°&quot;No package nginx available.&quot;é—®é¢˜ï¼Œè§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š é—®é¢˜å¤„ç†é—®é¢˜æè¿°ï¼šè§ä¸‹å›¾ é—®é¢˜åŸå› ï¼š nginxä½äºç¬¬ä¸‰æ–¹çš„yumæºé‡Œé¢ï¼Œè€Œä¸åœ¨centoså®˜æ–¹yumæºé‡Œé¢ è§£å†³æ–¹æ³•ï¼š å®‰è£…epel(Extra Packages for Enterprise Linux) å»epelç½‘ç«™ä¸‹è½½å¯¹åº”ç‰ˆæœ¬ æˆ‘çš„ç³»ç»Ÿæ˜¯centos7.6ï¼Œcpuæ˜¯x86_64 12345# ä¸‹è½½epelwget https://dl.fedoraproject.org/pub/epel/7/x86_64/Packages/e/epel-release-7-11.noarch.rpm# å®‰è£…epelrpm -ivh epel-release-7-11.noarch.rpm å†æ¬¡æ‰§è¡Œ yum install nginx,åˆ™ä¼šæç¤ºå®‰è£…æˆåŠŸäº† é…ç½® åˆ é™¤/usr/share/nginx/html/ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ 1rm -rf /usr/share/nginx/html/* é˜²ç«å¢™ä¸­åŠ å…¥å…è®¸80 ç«¯å£è®¿é—® 123456## åŠ å…¥80ç«¯å£firewall-cmd --zone=public --add-port=80/tcp --permanent## é™„åŠ ï¼š# æ˜¾ç¤ºé˜²ç«å¢™åº”ç”¨åˆ—è¡¨firewall-cmd --list-all é‡å¯é˜²ç«å¢™ 1systemctl restart firewalld ç¼–è¾‘/etc/nginx/nginx.confé…ç½®æ–‡ä»¶ï¼ŒåŠ å…¥å¦‚ä¸‹ä¿¡æ¯ï¼ˆè¿½åŠ åˆ°æœ«å°¾ï¼‰ï¼Œä½¿èƒ½å¤Ÿè®¿é—®ç›®å½• 123autoindex on;# æ˜¾ç¤ºç›®å½•autoindex_exact_size on;# æ˜¾ç¤ºæ–‡ä»¶å¤§å°autoindex_localtime on;# æ˜¾ç¤ºæ–‡ä»¶æ—¶é—´ å¯åŠ¨nginx 12systemctl start nginxsystemctl enable nginx å¯ç”¨å°†é•œåƒä¸Šä¼ åˆ°/usr/share/nginx/htmlç›®å½•ï¼Œåœ¨æµè§ˆå™¨è®¿é—®å¯ä»¥çœ‹è§å¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ–‡ä»¶ä¿¡æ¯ï¼Œç‚¹å‡»å¯ä¸‹è½½","categories":[{"name":"Linux","slug":"Linux","permalink":"/categories/Linux/"}],"tags":[{"name":"ngnix","slug":"ngnix","permalink":"/tags/ngnix/"}]},{"title":"CloudStackå¿«é€Ÿå®‰è£…æŒ‡å—","slug":"CloudStackå¿«é€Ÿå®‰è£…æŒ‡å—","date":"2019-04-03T09:32:32.000Z","updated":"2019-04-18T08:31:35.068Z","comments":true,"path":"2019/04/03/CloudStackå¿«é€Ÿå®‰è£…æŒ‡å—/","link":"","permalink":"/2019/04/03/CloudStackå¿«é€Ÿå®‰è£…æŒ‡å—/","excerpt":"","text":"CloudStackä»‹ç»ä»‹ç»è§ï¼š CloudStackä»‹ç» CloudStackå®‰è£…å…ˆå†³æ¡ä»¶ è‡³å°‘ä¸¤å°ï¼ˆcloudstack-managementå’Œcloudstack-agentï¼‰æ”¯æŒå¹¶å¯ç”¨äº†ç¡¬ä»¶è™šæ‹ŸåŒ–çš„è®¡ç®—æœºã€‚ ä¸€ä¸ªCentOSçš„7.5 x86_64çš„ISOå®‰è£…æ–‡ä»¶ ç½‘å…³ä½äºxxx.xxx.xxx.1çš„A / 24ç½‘ç»œï¼Œè¯¥ç½‘ç»œä¸Šä¸åº”è¯¥æœ‰DHCPï¼Œè¿è¡ŒCloudStackçš„è®¡ç®—æœºéƒ½ä¸ä¼šæœ‰åŠ¨æ€åœ°å€ã€‚åŒæ ·ï¼Œè¿™æ˜¯ä¸ºäº†ç®€å•èµ·è§ã€‚ ç¯å¢ƒå‡†å¤‡ä¸€å¥—åŸºæœ¬çš„CloudStackç¯å¢ƒï¼ŒåŒ…æ‹¬ä¸€å°CloudStackç®¡ç†ç«¯ï¼ˆcloudstack-managementï¼‰ï¼Œä¸€ä¸ªmysqlæ•°æ®åº“ï¼Œè‹¥å¹²å°æ”¯æŒKVMè™šæ‹ŸåŒ–çš„è®¡ç®—èŠ‚ç‚¹ï¼ˆcloudstack-agentï¼‰ä»¥åŠä¸€å°ç”¨æ¥åšä¸ºäºŒçº§å­˜å‚¨çš„nfsæœåŠ¡å™¨ï¼š åœ¨å®é™…ç”Ÿäº§ä¸­ï¼Œmysqlæ•°æ®åº“å’Œç®¡ç†ç«¯éƒ½å¯èƒ½é…å¤‡å¤šå°ä½œä¸ºé«˜å¯ç”¨ï¼Œè®¡ç®—èŠ‚ç‚¹ä¸€èˆ¬ä¹Ÿæ˜¯é…ç½®è¾ƒé«˜çš„ç‰©ç†æœåŠ¡å™¨ï¼Œä½†åœ¨å®éªŒç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨æœ€å°åŒ–å®‰è£…æ¨¡å¼ï¼ŒæŠŠmysql,nfså’Œç®¡ç†ç«¯å®‰è£…åœ¨åŒä¸€å°è™šæ‹Ÿæœºä¸Šï¼Œä½¿ç”¨ä¸€å°æ”¯æŒKVMè™šæ‹ŸåŒ–çš„è™šæ‹Ÿæœºç”¨æ¥ä½œä¸ºè®¡ç®—èŠ‚ç‚¹ æˆ‘ä»¬çš„ç¯å¢ƒæœ¬æ–‡ä½¿ç”¨ä¸¤å°è™šæ‹Ÿæœºæ¥æ­å»ºæˆ‘ä»¬çš„ç¯å¢ƒï¼Œnfs,mysqlå’Œç®¡ç†ç«¯éƒ½è£…åœ¨åŒä¸€å°è™šæ‹Ÿæœºä¸Šï¼Œcloudstack-agentå®‰è£…åœ¨ä¸€å°å¼€å¯äº†è™šæ‹ŸåŒ–æ”¯æŒçš„è™šæ‹Ÿæœºä¸Šï¼Œéƒ¨ç½²æ¶æ„å¦‚ä¸‹ï¼š å®šä¹‰ ä¸¤å°æœåŠ¡å™¨çš„IPæ˜¯ï¼š CloudStackç®¡ç†ç«¯ï¼ˆcloudstack-managementï¼‰ï¼š172.18.193.1 KVMè™šæ‹ŸåŒ–çš„è®¡ç®—èŠ‚ç‚¹ï¼ˆcloudstack-agentï¼‰ï¼š172.18.193.2 CloudStackç®¡ç†ç«¯å‡çº§yum1yum -y upgrade ä¸»æœºåCloudStackè¦æ±‚æ­£ç¡®è®¾ç½®ä¸»æœºåã€‚å¦‚æœæ‚¨åœ¨å®‰è£…ä¸­ä½¿ç”¨äº†é»˜è®¤é€‰é¡¹ï¼Œé‚£ä¹ˆæ‚¨çš„ä¸»æœºåå½“å‰è®¾ç½®ä¸ºlocalhost.localdomainã€‚ä¸ºäº†æµ‹è¯•è¿™ä¸ªï¼Œæˆ‘ä»¬å°†è¿è¡Œï¼š 1hostname --fqdn æ­¤æ—¶å®ƒå¯èƒ½ä¼šè¿”å›ï¼š 1localhost è¦çº æ­£è¿™ç§æƒ…å†µ - æˆ‘ä»¬å°†é€šè¿‡ç¼–è¾‘/etc/hostsæ–‡ä»¶æ¥è®¾ç½®ä¸»æœºåï¼Œä»¥ä¾¿å®ƒéµå¾ªä¸æ­¤ç¤ºä¾‹ç±»ä¼¼çš„æ ¼å¼ï¼š 12345678127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4::1 localhost localhost.localdomain localhost6 localhost6.localdomain6172.18.193.1 mng.cloud.priv172.18.193.1 mng172.18.193.2 cloud1.cloud.priv172.18.193.2 cld172.18.0.1 gw61.139.2.69 dns ä¿®æ”¹å®Œè¯¥æ–‡ä»¶åï¼Œé‡æ–°å¯åŠ¨ç½‘ç»œï¼š 1systemctl restart network ç°åœ¨ä½¿ç”¨hostname -fqdnå‘½ä»¤é‡æ–°æ£€æŸ¥å¹¶ç¡®ä¿å®ƒè¿”å›FQDNå“åº” è®¾ç½®SELinuxç›®å‰ï¼Œè¦ä½¿CloudStackæ­£å¸¸å·¥ä½œï¼ŒSELinuxå¿…é¡»è®¾ç½®ä¸ºå…è®¸ã€‚æˆ‘ä»¬å¸Œæœ›ä¸ºå°†æ¥çš„å¼•å¯¼é…ç½®å®ƒï¼Œå¹¶åœ¨å½“å‰è¿è¡Œçš„ç³»ç»Ÿä¸­å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚ è¦åœ¨è¿è¡Œçš„ç³»ç»Ÿä¸­å°†SELinuxé…ç½®ä¸ºå…è®¸ï¼Œæˆ‘ä»¬éœ€è¦è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1setenforce 0 ä¸ºäº†ç¡®ä¿å®ƒä¿æŒåœ¨è¯¥çŠ¶æ€ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®æ–‡ä»¶/etc/selinux/configä»¥åæ˜ è®¸å¯çŠ¶æ€ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š 12345678910# This file controls the state of SELinux on the system.# SELINUX= can take one of these three values:# enforcing - SELinux security policy is enforced.# permissive - SELinux prints warnings instead of enforcing.# disabled - No SELinux policy is loaded.SELINUX=permissive# SELINUXTYPE= can take one of these two values:# targeted - Targeted processes are protected,# mls - Multi Level Security protection.SELINUXTYPE=targeted NTPå®‰è£…NTPé…ç½®æ˜¯ä¿æŒäº‘æœåŠ¡å™¨ä¸­æ‰€æœ‰æ—¶é’ŸåŒæ­¥çš„å¿…è¦æ¡ä»¶ã€‚ä½†æ˜¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸å®‰è£…NTPã€‚æ‰€ä»¥æˆ‘ä»¬å°†åœ¨æ­¤é˜¶æ®µå®‰è£…å’Œé…ç½®NTPã€‚å®‰è£…å®Œæˆå¦‚ä¸‹ï¼š 1yum -y install ntp å®é™…çš„é»˜è®¤é…ç½®é€‚ç”¨äºæˆ‘ä»¬çš„ç›®çš„ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦å¯ç”¨å®ƒå¹¶å°†å…¶è®¾ç½®ä¸ºåœ¨å¯åŠ¨æ—¶å¯åŠ¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12systemctl enable ntpdsystemctl start ntpd é…ç½®CloudStackåŒ…å­˜å‚¨åº“æˆ‘ä»¬éœ€è¦å°†æœºå™¨é…ç½®ä¸ºä½¿ç”¨CloudStackè½¯ä»¶åŒ…å­˜å‚¨åº“ã€‚ è¦æ·»åŠ CloudStackå­˜å‚¨åº“ï¼Œè¯·åˆ›å»º/etc/yum.repos.d/cloudstack.repoå¹¶æ’å…¥ä»¥ä¸‹ä¿¡æ¯ã€‚ 12345[cloudstack]name=cloudstackbaseurl=http://download.cloudstack.org/centos/7/4.11/enabled=1gpgcheck=0 NFS å®‰è£…æˆ‘ä»¬çš„é…ç½®å°†ä½¿ç”¨NFSè¿›è¡Œä¸»å­˜å‚¨å’ŒäºŒçº§å­˜å‚¨ã€‚æˆ‘ä»¬å°†ç»§ç»­ä¸ºæ­¤ç›®çš„è®¾ç½®ä¸¤ä¸ªNFSå…±äº«ã€‚æˆ‘ä»¬é¦–å…ˆå®‰è£…nfs-utilsã€‚ 1yum -y install nfs-utils æˆ‘ä»¬ç°åœ¨éœ€è¦é…ç½®NFSä»¥æä¾›ä¸¤ä¸ªä¸åŒçš„å…±äº«ã€‚è¿™åœ¨/etc/exportsæ–‡ä»¶ä¸­ç›¸å¯¹å®¹æ˜“å¤„ç†ã€‚æ‚¨åº”è¯¥ç¡®ä¿å®ƒå…·æœ‰ä»¥ä¸‹å†…å®¹ï¼š 12/data/primary *(rw,async,no_root_squash,no_subtree_check)/data/secondary *(rw,async,no_root_squash,no_subtree_check) æ‚¨å°†æ³¨æ„åˆ°æˆ‘ä»¬åœ¨ç³»ç»Ÿä¸ŠæŒ‡å®šäº†ä¸¤ä¸ªç›®å½•ï¼ˆå°šæœªå­˜åœ¨ï¼‰ã€‚æˆ‘ä»¬å°†ç»§ç»­ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºè¿™äº›ç›®å½•å¹¶åœ¨å…¶ä¸Šé€‚å½“åœ°è®¾ç½®æƒé™ï¼š 12mkdir -p /data/primarymkdir /data/secondary CentOS 7.xç‰ˆæœ¬é»˜è®¤ä½¿ç”¨NFSv4ã€‚NFSv4è¦æ±‚åŸŸè®¾ç½®åœ¨æ‰€æœ‰å®¢æˆ·ç«¯ä¸ŠåŒ¹é…ã€‚åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼ŒåŸŸæ˜¯cloud.privï¼Œå› æ­¤è¯·ç¡®ä¿å–æ¶ˆæ³¨é‡Š/etc/idmapd.confä¸­çš„åŸŸè®¾ç½®å¹¶è®¾ç½®å¦‚ä¸‹ï¼š 1Domain = cloud.priv ç°åœ¨ï¼Œæ‚¨éœ€è¦åœ¨/etc/sysconfig/nfsæ–‡ä»¶çš„åº•éƒ¨æ·»åŠ é…ç½®å€¼ï¼ˆæˆ–è€…ä»…å–æ¶ˆæ³¨é‡Šå¹¶è®¾ç½®å®ƒä»¬ï¼‰ 123456LOCKD_TCPPORT=32803LOCKD_UDPPORT=32769MOUNTD_PORT=892RQUOTAD_PORT=875STATD_PORT=662STATD_OUTGOING_PORT=2020 ç°åœ¨æˆ‘ä»¬éœ€è¦ç¦ç”¨é˜²ç«å¢™ï¼Œè¿™æ ·å®ƒå°±ä¸ä¼šé˜»æ­¢è¿æ¥ 12systemctl stop firewalldsystemctl disable firewalld æˆ‘ä»¬ç°åœ¨éœ€è¦é…ç½®nfsæœåŠ¡ä»¥åœ¨å¯åŠ¨æ—¶å¯åŠ¨ï¼Œå¹¶é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®é™…åœ¨ä¸»æœºä¸Šå¯åŠ¨å®ƒï¼š 1234systemctl enable rpcbindsystemctl enable nfssystemctl start rpcbindsystemctl start nfs æµ‹è¯•nfsæœåŠ¡ç«¯æ˜¯å¦èƒ½è®¿é—® åœ¨ agentç«¯æ‰§è¡Œshowmount -e 172.18.193.1 ç®¡ç†æœåŠ¡å™¨å®‰è£…æ•°æ®åº“å®‰è£…å’Œé…ç½®æˆ‘ä»¬å°†é¦–å…ˆå®‰è£…MySQLå¹¶é…ç½®ä¸€äº›é€‰é¡¹ï¼Œä»¥ç¡®ä¿å®ƒä¸CloudStackä¸€èµ·è¿è¡Œè‰¯å¥½ã€‚ é¦–å…ˆï¼Œç”±äºCentOS 7ä¸å†æä¾›MySQLäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªå­˜å‚¨åº“ï¼š 123wget http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpmrpm -ivh mysql-community-release-el7-5.noarch.rpmyum -y update é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š 1yum -y install mysql-server ç°åœ¨å®‰è£…äº†MySQLï¼Œæˆ‘ä»¬éœ€è¦å¯¹/etc/my.cnfè¿›è¡Œä¸€äº›é…ç½®æ›´æ”¹ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦åœ¨[mysqld]éƒ¨åˆ†æ·»åŠ ä»¥ä¸‹é€‰é¡¹ï¼š 12345innodb_rollback_on_timeout=1innodb_lock_wait_timeout=600max_connections=350log-bin=mysql-binbinlog-format = 'ROW' ç°åœ¨MySQLå·²æ­£ç¡®é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥å¯åŠ¨å®ƒå¹¶å°†å…¶é…ç½®ä¸ºåœ¨å¯åŠ¨æ—¶å¯åŠ¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12systemctl enable mysqldsystemctl start mysqld MySQLè¿æ¥å™¨å®‰è£…ä½¿ç”¨å®˜æ–¹MySQLè½¯ä»¶åŒ…å­˜å‚¨åº“å®‰è£…Python MySQLè¿æ¥å™¨ã€‚/etc/yum.repos.d/mysql.repoä½¿ç”¨ä»¥ä¸‹å†…å®¹åˆ›å»ºæ–‡ä»¶ï¼š 12345[mysql-connectors-community]name=MySQL Community connectorsbaseurl=http://repo.mysql.com/yum/mysql-connectors-community/el/$releasever/$basearch/enabled=1gpgcheck=1 ä»MySQLå¯¼å…¥GPGå…¬é’¥ï¼š 1rpm --import http://repo.mysql.com/RPM-GPG-KEY-mysql å®‰è£…mysql-connector 1yum install mysql-connector-python å®‰è£…ç®¡ç†æœåŠ¡å™¨æˆ‘ä»¬ç°åœ¨è¦å®‰è£…ç®¡ç†æœåŠ¡å™¨ã€‚æˆ‘ä»¬é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼š 1yum -y install cloudstack-management å½“yum -y install cloudstack-managementå‘½ä»¤ä¸å¥½ä½¿çš„æ—¶å€™ï¼Œæ“ä½œå¦‚ä¸‹ï¼š 1234wget http://download.cloudstack.org/centos/7/4.11/cloudstack-management-4.11.2.0-1.el7.centos.x86_64.rpmwget http://download.cloudstack.org/centos/7/4.11/cloudstack-common-4.11.2.0-1.el7.centos.x86_64.rpmyum localinstall cloudstack-management-4.11.2.0-1.el7.centos.x86_64.rpm cloudstack-common-4.11.2.0-1.el7.centos.x86_64.rpm å®‰è£…äº†åº”ç”¨ç¨‹åºæœ¬èº«åï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥è®¾ç½®æ•°æ®åº“ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å’Œé€‰é¡¹æ‰§è¡Œæ­¤æ“ä½œï¼š 1cloudstack-setup-databases cloud:password@localhost --deploy-as=root å®Œæˆæ­¤è¿‡ç¨‹åï¼Œæ‚¨åº”è¯¥çœ‹åˆ°â€œCloudStack has successfully initialized the database.â€ä¹‹ç±»çš„æ¶ˆæ¯ã€‚ æ—¢ç„¶å·²ç»åˆ›å»ºäº†æ•°æ®åº“ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‘å‡ºä»¥ä¸‹å‘½ä»¤æ¥è®¾ç½®ç®¡ç†æœåŠ¡å™¨çš„æœ€åä¸€æ­¥ï¼š 1cloudstack-setup-management ç³»ç»Ÿæ¨¡æ¿è®¾ç½®CloudStackä½¿ç”¨è®¸å¤šç³»ç»ŸVMæ¥æä¾›è®¿é—®è™šæ‹Ÿæœºæ§åˆ¶å°ï¼Œæä¾›å„ç§ç½‘ç»œæœåŠ¡ä»¥åŠç®¡ç†å­˜å‚¨çš„å„ä¸ªæ–¹é¢çš„åŠŸèƒ½ã€‚å½“æˆ‘ä»¬å¼•å¯¼æ‚¨çš„äº‘æ—¶ï¼Œæ­¤æ­¥éª¤å°†è·å–å‡†å¤‡éƒ¨ç½²çš„ç³»ç»Ÿæ˜ åƒã€‚ ç°åœ¨æˆ‘ä»¬éœ€è¦ä¸‹è½½ç³»ç»ŸVMæ¨¡æ¿å¹¶å°†å…¶éƒ¨ç½²åˆ°æˆ‘ä»¬åˆšåˆšæŒ‚è½½çš„å…±äº«ã€‚ç®¡ç†æœåŠ¡å™¨åŒ…æ‹¬ç”¨äºæ­£ç¡®æ“çºµç³»ç»ŸVMsæ˜ åƒçš„è„šæœ¬ã€‚ 12/usr/share/cloudstack-common/scripts/storage/secondary/cloud-install-sys-tmplt -m /data/secondary -u http://download.cloudstack.org/systemvm/4.11/systemvmtemplate-4.11.2-kvm.qcow2.bz2 -h kvm -F è¿™å°±ç»“æŸäº†æˆ‘ä»¬çš„ç®¡ç†æœåŠ¡å™¨çš„å®‰è£… CloudStackè®¡ç®—èŠ‚ç‚¹å‡çº§yum1yum -y upgrade é…ç½®ç½‘ç»œè¦å°†å…¶é…ç½®ä¸ºåœ¨æ‚¨çš„ç¯å¢ƒä¸­å·¥ä½œã€‚ç”±äºæˆ‘ä»¬æŒ‡å®šåœ¨æ­¤ç¯å¢ƒä¸­ä¸å­˜åœ¨DHCPæœåŠ¡å™¨ï¼Œå› æ­¤æˆ‘ä»¬å°†æ‰‹åŠ¨é…ç½®æ‚¨çš„ç½‘ç»œæ¥å£ã€‚ åœ¨ç»§ç»­ä¹‹å‰ï¼Œè¯·ç¡®ä¿å®‰è£…äº†â€œbrctlâ€å¹¶ä¸”å¯ç”¨ï¼š 1yum install bridge-utils -y é€šè¿‡æ§åˆ¶å°è¿æ¥ï¼Œæ‚¨åº”è¯¥ä»¥rootç”¨æˆ·èº«ä»½ç™»å½•ã€‚æˆ‘ä»¬å°†é¦–å…ˆåˆ›å»ºCloudstackå°†ç”¨äºç½‘ç»œçš„æ¡¥æ¢ã€‚åˆ›å»ºå¹¶æ‰“å¼€/etc/sysconfig/network-scripts/ifcfg-cloudbr0å¹¶æ·»åŠ ä»¥ä¸‹è®¾ç½®ï¼š IPå¯»å€ - åœ¨æœ¬æ–‡æ¡£ä¸­ï¼Œæˆ‘ä»¬å‡è®¾æ‚¨å°†æ‹¥æœ‰ä¸€ä¸ªç”¨äºCloudStackå®æ–½çš„/24ç½‘ç»œã€‚è¿™å¯ä»¥æ˜¯ä»»ä½•RFC 1918ç½‘ç»œã€‚ 123456789101112DEVICE=cloudbr0TYPE=BridgeONBOOT=yesBOOTPROTO=noneIPV6INIT=noIPV6_AUTOCONF=noDELAY=5IPADDR=172.18.193.2PREFIX=16GATEWAY=172.18.0.1DNS1=61.139.2.69STP=yes ä¿å­˜é…ç½®å¹¶é€€å‡ºã€‚ç„¶åæˆ‘ä»¬å°†ç¼–è¾‘ç•Œé¢ï¼Œä»¥ä¾¿å®ƒä½¿ç”¨è¿™ä¸ªæ¡¥ã€‚ æ‰“å¼€æ‚¨çš„äº¤äº’æ¥å£çš„é…ç½®æ–‡ä»¶å¹¶æŒ‰å¦‚ä¸‹æ‰€ç¤ºè¿›è¡Œé…ç½®ï¼š æ¥å£åç§°ä»…ç”¨ä½œç¤ºä¾‹ã€‚å°†em1æ›¿æ¢ä¸ºæ‚¨çš„é»˜è®¤ä»¥å¤ªç½‘æ¥å£åç§°ã€‚ 123456DEVICE=em1TYPE=EthernetONBOOT=yesBOOTPROTO=noneBRIDGE=cloudbr0HWADDR=80:18:44:ea:71:84 æ‚¨ä¸åº”ä½¿ç”¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­çš„ç¡¬ä»¶åœ°å€ï¼ˆä¹Ÿç§°ä¸ºMACåœ°å€æˆ–UUIDï¼‰è¿›è¡Œé…ç½®ã€‚å®ƒæ˜¯ç‰¹å®šäºç½‘ç»œæ¥å£çš„ï¼Œå› æ­¤æ‚¨åº”è¯¥ä¿ç•™UUIDæŒ‡ä»¤ä¸­å·²æä¾›çš„åœ°å€ã€‚ ç°åœ¨æˆ‘ä»¬å·²ç»æ­£ç¡®è®¾ç½®äº†é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦è¿è¡Œä¸€äº›å‘½ä»¤æ¥å¯åŠ¨ç½‘ç»œï¼š 12systemctl enable networksystemctl restart network è¯·æ³¨æ„ï¼Œå¦‚æœæ‚¨é€šè¿‡SSHè¿æ¥ï¼Œåˆ™ä¼šæš‚æ—¶ï¼ˆçº¦5ç§’ï¼Œå…·ä½“å–å†³äºç¡¬ä»¶ï¼‰æ–­å¼€è¿æ¥ã€‚å¦‚æœæ–­å¼€è¿æ¥ï¼Œåˆ™é…ç½®ä¸­å­˜åœ¨é”™è¯¯ã€‚ ä¸»æœºåCloudStackè¦æ±‚æ­£ç¡®è®¾ç½®ä¸»æœºåã€‚å¦‚æœæ‚¨åœ¨å®‰è£…ä¸­ä½¿ç”¨äº†é»˜è®¤é€‰é¡¹ï¼Œé‚£ä¹ˆæ‚¨çš„ä¸»æœºåå½“å‰è®¾ç½®ä¸ºlocalhost.localdomainã€‚ä¸ºäº†æµ‹è¯•è¿™ä¸ªï¼Œæˆ‘ä»¬å°†è¿è¡Œï¼š 1hostname --fqdn æ­¤æ—¶å®ƒå¯èƒ½ä¼šè¿”å›ï¼š 1localhost è¦çº æ­£è¿™ç§æƒ…å†µ - æˆ‘ä»¬å°†é€šè¿‡ç¼–è¾‘/etc/hostsæ–‡ä»¶æ¥è®¾ç½®ä¸»æœºåï¼Œä»¥ä¾¿å®ƒéµå¾ªä¸æ­¤ç¤ºä¾‹ç±»ä¼¼çš„æ ¼å¼ï¼š 12345678127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4::1 localhost localhost.localdomain localhost6 localhost6.localdomain6172.18.193.1 mng.cloud.priv172.18.193.1 mng172.18.193.2 cloud1.cloud.priv172.18.193.2 cld172.18.0.1 gw61.139.2.69 dns ä¿®æ”¹å®Œè¯¥æ–‡ä»¶åï¼Œé‡æ–°å¯åŠ¨ç½‘ç»œï¼š 1systemctl restart network ç°åœ¨ä½¿ç”¨hostname -fqdnå‘½ä»¤é‡æ–°æ£€æŸ¥å¹¶ç¡®ä¿å®ƒè¿”å›FQDNå“åº” è®¾ç½®SELinuxç›®å‰ï¼Œè¦ä½¿CloudStackæ­£å¸¸å·¥ä½œï¼ŒSELinuxå¿…é¡»è®¾ç½®ä¸ºå…è®¸ã€‚æˆ‘ä»¬å¸Œæœ›ä¸ºå°†æ¥çš„å¼•å¯¼é…ç½®å®ƒï¼Œå¹¶åœ¨å½“å‰è¿è¡Œçš„ç³»ç»Ÿä¸­å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚ è¦åœ¨è¿è¡Œçš„ç³»ç»Ÿä¸­å°†SELinuxé…ç½®ä¸ºå…è®¸ï¼Œæˆ‘ä»¬éœ€è¦è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1setenforce 0 ä¸ºäº†ç¡®ä¿å®ƒä¿æŒåœ¨è¯¥çŠ¶æ€ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®æ–‡ä»¶/etc/selinux/configä»¥åæ˜ è®¸å¯çŠ¶æ€ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š 12345678910# This file controls the state of SELinux on the system.# SELINUX= can take one of these three values:# enforcing - SELinux security policy is enforced.# permissive - SELinux prints warnings instead of enforcing.# disabled - No SELinux policy is loaded.SELINUX=permissive# SELINUXTYPE= can take one of these two values:# targeted - Targeted processes are protected,# mls - Multi Level Security protection.SELINUXTYPE=targeted NTPå®‰è£…NTPé…ç½®æ˜¯ä¿æŒäº‘æœåŠ¡å™¨ä¸­æ‰€æœ‰æ—¶é’ŸåŒæ­¥çš„å¿…è¦æ¡ä»¶ã€‚ä½†æ˜¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸å®‰è£…NTPã€‚æ‰€ä»¥æˆ‘ä»¬å°†åœ¨æ­¤é˜¶æ®µå®‰è£…å’Œé…ç½®NTPã€‚å®‰è£…å®Œæˆå¦‚ä¸‹ï¼š 1yum -y install ntp å®é™…çš„é»˜è®¤é…ç½®é€‚ç”¨äºæˆ‘ä»¬çš„ç›®çš„ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦å¯ç”¨å®ƒå¹¶å°†å…¶è®¾ç½®ä¸ºåœ¨å¯åŠ¨æ—¶å¯åŠ¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12systemctl enable ntpdsystemctl start ntpd KVMè®¾ç½®å’Œå®‰è£…KVMæ˜¯æˆ‘ä»¬å°†è¦ä½¿ç”¨çš„è™šæ‹Ÿæœºç®¡ç†ç¨‹åº - æˆ‘ä»¬å°†æ¢å¤å·²åœ¨è™šæ‹Ÿæœºç®¡ç†ç¨‹åºä¸»æœºä¸Šå®Œæˆçš„åˆå§‹è®¾ç½®å¹¶æ¶µç›–ä»£ç†è½¯ä»¶çš„å®‰è£…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ­¥éª¤å°†å…¶ä»–KVMèŠ‚ç‚¹æ·»åŠ åˆ°æ‚¨çš„CloudStackç¯å¢ƒä¸­ã€‚ å®‰è£…èŠ‚ç‚¹æœåŠ¡å™¨1yum -y install cloudstack-agent å½“yum -y install cloudstack-agentå‘½ä»¤ä¸å¥½ä½¿çš„æ—¶å€™ï¼Œæ“ä½œå¦‚ä¸‹ï¼š 1234wget http://download.cloudstack.org/centos/7/4.11/cloudstack-agent-4.11.2.0-1.el7.centos.x86_64.rpmwget http://download.cloudstack.org/centos/7/4.11/cloudstack-common-4.11.2.0-1.el7.centos.x86_64.rpmyum localinstall cloudstack-agent-4.11.2.0-1.el7.centos.x86_64.rpm cloudstack-common-4.11.2.0-1.el7.centos.x86_64.rpm æˆ‘ä»¬æœ‰ä¸¤ä¸ªä¸åŒçš„KVMéƒ¨åˆ†æ¥é…ç½®ï¼Œlibvirtå’ŒQEMUã€‚ QEMUé…ç½®KVMé…ç½®åªåœ¨ä¸€ä¸ªé¡¹ç›®ä¸Šç›¸å¯¹ç®€å•ã€‚æˆ‘ä»¬éœ€è¦ç¼–è¾‘QEMU VNCé…ç½®ã€‚è¿™æ˜¯é€šè¿‡ç¼–è¾‘/etc/libvirt/qemu.confå¹¶ç¡®ä¿ä»¥ä¸‹è¡Œå­˜åœ¨å¹¶å–æ¶ˆæ³¨é‡Šæ¥å®Œæˆçš„ã€‚ 1vnc_listen=0.0.0.0 Libvirté…ç½®CloudStackä½¿ç”¨libvirtæ¥ç®¡ç†è™šæ‹Ÿæœºã€‚å› æ­¤ï¼Œæ­£ç¡®é…ç½®libvirtè‡³å…³é‡è¦ã€‚Libvirtæ˜¯äº‘ä»£ç†çš„ä¾èµ–ï¼Œåº”è¯¥å·²ç»å®‰è£…ã€‚ ä¸ºäº†å®ç°å®æ—¶è¿ç§»ï¼Œlibvirtå¿…é¡»ç›‘å¬ä¸å®‰å…¨çš„TCPè¿æ¥ã€‚æˆ‘ä»¬è¿˜éœ€è¦å…³é—­libvirtså°è¯•ä½¿ç”¨å¤šæ’­DNSå¹¿å‘Šã€‚è¿™ä¸¤ä¸ªè®¾ç½®éƒ½åœ¨/etc/libvirt/libvirtd.confä¸­ è®¾ç½®ä»¥ä¸‹å‚æ•°ï¼š 12345listen_tls = 0listen_tcp = 1tcp_port = \"16509\"auth_tcp = \"none\"mdns_adv = 0 åœ¨libvirtd.confä¸­æ‰“å¼€â€œlisten_tcpâ€æ˜¯ä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬è¿˜è¦æ›´æ”¹å‚æ•°ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹/etc/sysconfig/libvirtdï¼š å–æ¶ˆæ³¨é‡Šä»¥ä¸‹è¡Œï¼š 1LIBVIRTD_ARGS=&quot;--listen&quot; é‡å¯libvirt 1systemctl restart libvirtd KVMé…ç½®å®Œæˆ ä¸ºäº†å®Œæ•´èµ·è§ï¼Œæ‚¨åº”è¯¥æ£€æŸ¥KVMåœ¨æ‚¨çš„è®¡ç®—æœºä¸Šæ˜¯å¦æ­£å¸¸è¿è¡Œï¼š 123456lsmod | grep kvm# è¾“å‡ºkvm_intel 183705 47 kvm 615914 1 kvm_intelirqbypass 13503 37 kvm è¿™å°±ç»“æŸäº†æˆ‘ä»¬å¯¹KVMçš„å®‰è£…å’Œé…ç½®ï¼Œç°åœ¨æˆ‘ä»¬å°†ä½¿ç”¨CloudStack UIæ¥å®é™…é…ç½®æˆ‘ä»¬çš„äº‘ã€‚ CloudStackç³»ç»Ÿé…ç½®è®¿é—®åœ°å€ï¼š 12http://&lt;management-server-ip-address&gt;:8080/client# å³ï¼šhttp://172.18.193.1:8080/client å¦‚æœç®¡ç†æœåŠ¡å™¨æ˜¯å…¨æ–°çš„å®‰è£…,é‚£ä¹ˆä¼šå‡ºç°ä¸€ä¸ªå®‰è£…å‘å¯¼ã€‚åœ¨ç¨åçš„è®¿é—®ä¸­ï¼Œä½ å°†çœ‹åˆ°ä¸€ä¸ªç™»å½•ç•Œé¢,ï¼Œä½ éœ€è¦é€šè¿‡ç”¨æˆ·åå’Œå¯†ç ç™»å…¥æ¥æŸ¥çœ‹ä½ çš„ä»ªè¡¨ç›˜ã€‚ 123ç”¨æˆ·å -&gt; ä½ è´¦å·çš„ç”¨æˆ·IDã€‚é»˜è®¤ç”¨æˆ·åæ˜¯adminã€‚å¯†ç  -&gt; ç”¨æˆ·IDå¯¹åº”çš„å¯†ç ã€‚é»˜è®¤ç”¨æˆ·åçš„å¯†ç æ˜¯passwordã€‚åŸŸ -&gt; å¦‚æœä½ æ˜¯rootç”¨æˆ·ï¼Œæ­¤å¤„ç•™ç©ºå³å¯ã€‚ CloudStackç”¨æˆ·ç•Œé¢å¸®åŠ©äº‘åŸºç¡€è®¾æ–½çš„ç”¨æˆ·æŸ¥çœ‹å’Œä½¿ç”¨ä»–ä»¬çš„äº‘èµ„æºï¼ŒåŒ…æ‹¬è™šæ‹Ÿæœºã€æ¨¡æ¿å’ŒISOã€æ•°æ®å·å’Œå¿«ç…§ã€å®¾å®¢ç½‘ç»œï¼Œä»¥åŠIP åœ°å€ã€‚å¦‚æœç”¨æˆ·æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªCloudStacké¡¹ç›®çš„æˆå‘˜æˆ–ç®¡ç†å‘˜ï¼Œç”¨æˆ·ç•Œé¢èƒ½æä¾›ä¸€ä¸ªé¢å‘é¡¹ç›®çš„è§†å›¾ã€‚ é€‰æ‹©â€æˆ‘ä»¥å‰æ˜¯ç”¨è¿‡CloudStackï¼Œè·³è¿‡æ­¤æŒ‡å—â€æŒ‰é’® é€‰æ‹©â€œèµ„æºåŸŸâ€ é€‰æ‹©â€œæ·»åŠ èµ„æºåŸŸâ€ é€‰æ‹©â€œåŸºæœ¬â€ç½‘ç»œï¼Œç‚¹å‡»â€ä¸‹ä¸€æ­¥â€ 1234567# é…ç½®å†…å®¹å¦‚ä¸‹:åç§°ï¼šZone1IPV4 DNS1ï¼š61.139.2.69å†…éƒ¨ DNS1ï¼šè™šæ‹Ÿæœºé€‰æ‹©â€œKVMâ€ç½‘ç»œæ–¹æ¡ˆé»˜è®¤# è¿™äº›å†…å®¹åŒ…æ‹¬ä¸‹é¢çš„å¡«å†™ä»…ä¸ºå‚è€ƒå€¼ã€‚å¯æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œä¿®æ”¹ ç‚¹å‡»â€ä¸‹ä¸€æ­¥â€ 12# é…ç½®å†…å®¹å¦‚ä¸‹:ç‰©ç†ç½‘ç»œåç§°:é»˜è®¤ #ä¹Ÿå¯é”®å…¥cloudstack-managementå®é™…ç½‘ç»œåç§° ç‚¹å‡»â€ä¸‹ä¸€æ­¥â€ 123456# é…ç½®å†…å®¹å¦‚ä¸‹:æä¾›åç§°ï¼šPod1é¢„ç•™çš„ç³»ç»Ÿç½‘å…³ï¼š172.18.0.1é¢„ç•™çš„ç³»ç»Ÿç½‘ç»œæ©ç ï¼š255.255.0.0èµ·å§‹é¢„ç•™ç³»ç»ŸIPï¼š172.18.193.3ç»“æŸé¢„ç•™ç³»ç»ŸIPï¼š172.18.193.254 ç‚¹å‡»â€ä¸‹ä¸€æ­¥â€ 12345# é…ç½®å†…å®¹å¦‚ä¸‹:æ¥å®¾ç½‘å…³ï¼š172.18.0.1æ¥å®¾ç½‘ç»œæ©ç ï¼š255.255.0.0æ¥å®¾èµ·å§‹IP:172.18.194.1æ¥å®¾ç»“æŸIPï¼š172.18.194.254 ç‚¹å‡»â€ä¸‹ä¸€æ­¥â€ 123# é…ç½®å†…å®¹å¦‚ä¸‹:è™šæ‹Ÿæœºç®¡ç†ç¨‹åºï¼šKVMé›†ç¾¤åç§°ï¼šCluster ç‚¹å‡»â€ä¸‹ä¸€æ­¥â€ 12345# é…ç½®å†…å®¹å¦‚ä¸‹:ä¸»æœºåç§°ï¼š172.18.193.2 #cloudstack-agentè®¡ç®—èŠ‚ç‚¹åœ°å€ç”¨æˆ·åï¼šroot #cloudstack-agentè®¡ç®—èŠ‚ç‚¹ç”¨æˆ·åå¯†ç ï¼špassword #cloudstack-agentè®¡ç®—èŠ‚ç‚¹å¯†ç ä¸»æœºæ ‡ç­¾ï¼šå¯ä¸å¡« ç‚¹å‡»â€ä¸‹ä¸€æ­¥â€ 1234567# é…ç½®å†…å®¹å¦‚ä¸‹:åç§°ï¼šprimary #ä¸æ˜¯å›ºå®šçš„ï¼Œè‡ªå·±æ ¹æ®éœ€è¦è¿›è¡ŒåŒºåˆ†å³å¯èŒƒå›´ï¼šé€‰æ‹©ç¾¤é›†åè®®ï¼šé€‰æ‹©nfsæœåŠ¡å™¨ï¼š172.18.193.1è·¯å¾„ï¼š/data/primary #æ ¹æ®å®‰è£…æ—¶çš„é…ç½®å¡«å†™å­˜å‚¨è·¯å¾„ï¼šå¯ä¸å¡« ç‚¹å‡»â€ä¸‹ä¸€æ­¥â€ 12345# é…ç½®å†…å®¹å¦‚ä¸‹:æä¾›ç¨‹åºï¼šé€‰æ‹©NFSåç§°ï¼šsecondary #ä¸æ˜¯å›ºå®šçš„ï¼Œè‡ªå·±æ ¹æ®éœ€è¦è¿›è¡ŒåŒºåˆ†å³å¯æœåŠ¡å™¨ï¼š172.18.193.1è·¯å¾„ï¼š/data/secondary #æ ¹æ®å®‰è£…æ—¶çš„é…ç½®å¡«å†™ ç‚¹å‡»â€ä¸‹ä¸€æ­¥â€ ç‚¹å‡»â€œå¯åŠ¨èµ„æºåŸŸâ€ æˆåŠŸåï¼Œå…ˆä¸å¯åŠ¨èµ„æºåŸŸï¼Œæˆ‘ä»¬å¯ä»¥å…ˆçœ‹ä¸‹åŸºç¡€æ¶æ„ æ­¤æ—¶ç³»ç»ŸVMä¸º0 èµ„æºå¯åŠ¨æˆåŠŸåï¼Œç³»ç»ŸVMä¼šå‡ºç°2å° ç³»ç»ŸVMæ˜¯ä¸åŒäºä¸»æœºä¸Šåˆ›å»ºçš„æ™®é€šè™šæ‹Ÿæœºçš„ï¼Œä»–ä»¬æ˜¯CloudStackäº‘å¹³å°è‡ªå¸¦çš„ç”¨äºå®Œæˆè‡ªèº«çš„ä¸€äº›ä»»åŠ¡çš„è™šæ‹Ÿæœºã€‚ Secondary Storage VMï¼šç®€ç§°ä¸ºSSVMï¼Œç”¨äºç®¡ç†äºŒçº§å­˜å‚¨çš„ç›¸å…³æ“ä½œï¼Œå¦‚æ¨¡æ¿è·Ÿé•œåƒæ–‡ä»¶çš„ä¸Šä¼ ä¸ä¸‹è½½ï¼Œå¿«ç…§ï¼Œvolumesçš„å­˜æ”¾ï¼Œç¬¬ä¸€æ¬¡åˆ›å»ºè™šæ‹Ÿæœºæ—¶ä»äºŒçº§å­˜å‚¨æ‹·è´æ¨¡æ¿åˆ°ä¸€çº§å­˜å‚¨å¹¶ä¸”è‡ªåŠ¨åˆ›å»ºå¿«ç…§ï¼Œæ¯ä¸€ä¸ªèµ„æºåŸŸå¯ä»¥æœ‰å¤šä¸ªSSVMï¼Œå½“SSVMè¢«åˆ é™¤æˆ–åœæ­¢ï¼Œå®ƒä¼šè‡ªåŠ¨è¢«é‡å»ºå¹¶å¯åŠ¨ã€‚ Console Proxy VMï¼šç”¨äºåœ¨web ç•Œé¢ä¸Šå±•ç¤ºæ§åˆ¶å°ã€‚ é€šè¿‡æŸ¥çœ‹æ§åˆ¶å°è®¿é—®é‡Œé¢çš„è™šæ‹Ÿæœº CloudStack è™šæ‹Ÿæœºå®ä¾‹è™šæ‹Ÿæœºå®ä¾‹é»˜è®¤çš„æ¨¡æ¿å¹¶æ²¡æœ‰è¢«ä¸‹è½½ ä¿®æ”¹å…¨å±€è®¾ç½®secstorage.allowed.internal.sitesè®¾ç½® ï¼ŒäºŒçº§å­˜å‚¨ISOé•œåƒå’Œæ¨¡æ¿å¯ä»¥ä¸‹è½½ï¼ŒIPç½‘æ®µ é‡å¯æœåŠ¡systemctl restart cloudstack-management æ­å»ºhttpæœåŠ¡å™¨-nginxç›®çš„ï¼šæ³¨å†ŒISOæ—¶éœ€è¦å¡«é•œåƒçš„urlï¼Œå®æ—¶ä¸‹è½½é•œåƒï¼Œå¤–ç½‘æˆ–è€…ç½‘é€Ÿä¸æ˜¯å¾ˆå¥½ä¸‹è½½ä¼šå¾ˆæ…¢ç”šè‡³ä¸‹è½½å¤±è´¥ï¼Œæ•…æ­å»ºè‡ªå·±çš„httpæœåŠ¡å™¨ä»¥ä¾¿åœ¨å†…ç½‘ä¸‹è½½é•œåƒï¼Œè¿™æ ·é€Ÿåº¦ä¼šå¿«å¾ˆå¤šã€‚ æ³¨ ï¼šåœ¨cloudstack-managementç®¡ç†æœåŠ¡å™¨èŠ‚ç‚¹æ­å»ºnginx æ“ä½œæ•™ç¨‹è§ï¼šæ­å»ºhttpæœåŠ¡å™¨-nginx åˆ¶ä½œæ¨¡æ¿æ³¨å†ŒISO æ¥ä¸‹æ¥æŒ‰æ­¥éª¤èµ°ï¼Œå°±å¯ä»¥åˆ›å»ºå‡ºç¬¬ä¸€ä¸ªè™šæ‹Ÿæœºäº†ã€‚","categories":[{"name":"Linux","slug":"Linux","permalink":"/categories/Linux/"}],"tags":[{"name":"CloudStack","slug":"CloudStack","permalink":"/tags/CloudStack/"},{"name":"è™šæ‹Ÿæœºåˆ†é…","slug":"è™šæ‹Ÿæœºåˆ†é…","permalink":"/tags/è™šæ‹Ÿæœºåˆ†é…/"},{"name":"å®‰è£…æŒ‡å—","slug":"å®‰è£…æŒ‡å—","permalink":"/tags/å®‰è£…æŒ‡å—/"}]},{"title":"Java8 å®ç°ä¸‹è½½ç½‘é¡µçš„å®Œæ•´ä»£ç ","slug":"Java8-å®ç°ä¸‹è½½ç½‘é¡µçš„å®Œæ•´ä»£ç ","date":"2019-03-12T07:56:01.000Z","updated":"2019-03-12T08:22:42.205Z","comments":true,"path":"2019/03/12/Java8-å®ç°ä¸‹è½½ç½‘é¡µçš„å®Œæ•´ä»£ç /","link":"","permalink":"/2019/03/12/Java8-å®ç°ä¸‹è½½ç½‘é¡µçš„å®Œæ•´ä»£ç /","excerpt":"","text":"java8 å®ç°ç½‘é¡µä¸‹è½½ï¼Œå¤§è‡´åˆ†ä¸º4æ­¥ï¼Œåˆ†åˆ«æ˜¯:ç»™å®šç›®æ ‡ç½‘é¡µé“¾æ¥-&gt;ä¸ç›®æ ‡ä¸»æœºå»ºç«‹è¿æ¥-&gt;è¯»å…¥ç½‘é¡µæ–‡ä»¶æµ-&gt;å†™å…¥æœ¬åœ°æ–‡ä»¶ ã€‚ä¼šç”¨åˆ°java io å’Œ java netåº“ã€‚ç¨‹åºä»£ç å¦‚ä¸‹ï¼Œç•™æœ‰æ³¨é‡Šã€‚ 123456789101112131415161718192021222324252627282930313233343536373839import java.io.*;import java.net.MalformedURLException;import java.net.URL;public class test &#123; public static void main(String[] args) &#123; try &#123; new test().downloadPage(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; private String downloadPage() throws IOException &#123; // ç›®æ ‡ç½‘é¡µé“¾æ¥ String url = \"https://hexo.io/zh-cn/\"; String inputLine = null; try &#123; URL pageUrl = new URL(url); BufferedReader br = new BufferedReader( new InputStreamReader(pageUrl.openStream(), \"utf-8\")); //ç¨‹åºæ–‡ä»¶ç›®å½•å»ºç›®å½• downloadï¼Œç”¨äºå­˜æ”¾ä¸‹è½½çš„ç½‘é¡µ File file = new File(\"D:\\\\Test\\\\maliang\\\\index.html\"); FileOutputStream out = new FileOutputStream(file); OutputStreamWriter write = new OutputStreamWriter(out, \"utf-8\"); // å°†è¾“å…¥æµè¯»å…¥åˆ°å˜é‡ä¸­ï¼Œå†å†™å…¥åˆ°æ–‡ä»¶ while ((inputLine = br.readLine()) != null) &#123; write.write(inputLine); System.out.println(inputLine); &#125; br.close(); write.close(); System.err.println(\"ä¸‹è½½å®Œæ¯•!\"); &#125; catch (MalformedURLException e) &#123; e.printStackTrace(); &#125; return url; &#125;&#125;","categories":[{"name":"Java","slug":"Java","permalink":"/categories/Java/"}],"tags":[{"name":"Java8","slug":"Java8","permalink":"/tags/Java8/"},{"name":"ä¸‹è½½ç½‘é¡µçš„å®Œæ•´ä»£ç ","slug":"ä¸‹è½½ç½‘é¡µçš„å®Œæ•´ä»£ç ","permalink":"/tags/ä¸‹è½½ç½‘é¡µçš„å®Œæ•´ä»£ç /"}]},{"title":"LinuxæœåŠ¡å™¨ä¸Šæ­å»ºsvnæœåŠ¡å™¨","slug":"LinuxæœåŠ¡å™¨ä¸Šæ­å»ºsvnæœåŠ¡å™¨","date":"2019-02-15T03:31:10.000Z","updated":"2019-02-23T08:31:38.515Z","comments":true,"path":"2019/02/15/LinuxæœåŠ¡å™¨ä¸Šæ­å»ºsvnæœåŠ¡å™¨/","link":"","permalink":"/2019/02/15/LinuxæœåŠ¡å™¨ä¸Šæ­å»ºsvnæœåŠ¡å™¨/","excerpt":"","text":"èƒŒæ™¯é¡¹ç›®å¼€å‘ä¸­éœ€è¦ç‰ˆæœ¬æ§åˆ¶ï¼Œè€Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„æ˜¯åœ¨windowsç³»ç»Ÿä¸Šæ­å»ºsvnæœåŠ¡å™¨ï¼Œä¸‹é¢ä»‹ç»åœ¨Linuxç³»ç»Ÿï¼ˆCentOS 7.3.1611ï¼‰ä¸Šæ­å»ºsvnæœåŠ¡å™¨ã€‚ ä½¿ç”¨yumå®‰è£…svnä½¿ç”¨yumå®‰è£…svnï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š 1yum -y install subversion å®‰è£…å®Œæˆä¹‹åï¼ŒéªŒè¯svnå®‰è£…æ˜¯å¦æˆåŠŸ 1svn help æ–°å»ºä»“åº“ç›®å½•åœ¨/optç›®å½•ä¸‹é¢åˆ›å»ºä¸€ä¸ªsvnç›®å½•ï¼Œç”¨æ¥ä½œä¸ºsvnå­˜å‚¨ç›®å½•ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š 1mkdir /opt/svn åˆ›å»ºä¸€ä¸ªæµ‹è¯•ä»“åº“æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œåˆ›å»ºä¸€ä¸ªä»“åº“ 1svnadmin create /opt/svn/test/ è¿›å…¥ä»“åº“ç›®å½•ä¸‹ï¼ŒæŸ¥çœ‹ä»“åº“çš„æ–‡ä»¶ï¼Œå‘½ä»¤ï¼š 12cd /opt/svn/test/ #è¿›å…¥ä»“åº“ç›®å½•ls #å±•ç¤ºä»“åº“æ–‡ä»¶ å…³äºä»“åº“æ–‡ä»¶çš„è¯´æ˜ï¼š hooksç›®å½•ï¼šæ”¾ç½®hookè„šæ­¥æ–‡ä»¶çš„ç›®å½•locksç›®å½•ï¼šç”¨æ¥æ”¾ç½®subversionçš„dbé”æ–‡ä»¶å’Œdb_logsé”æ–‡ä»¶çš„ç›®å½•ï¼Œç”¨æ¥è¿½è¸ªå­˜å–æ–‡ä»¶åº“çš„å®¢æˆ·ç«¯formatç›®å½•ï¼šæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œé‡Œè¾¹åªæ”¾äº†ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå½“å‰æ–‡ä»¶åº“é…ç½®çš„ç‰ˆæœ¬å·confç›®å½•ï¼šæ˜¯è¿™ä¸ªä»“åº“é…ç½®æ–‡ä»¶ï¼ˆä»“åº“ç”¨æˆ·è®¿é—®è´¦æˆ·ï¼Œæƒé™ï¼‰ é…ç½®SVNæœåŠ¡çš„é…ç½®æ–‡ä»¶svnserve.confè¿›å…¥åˆ°confæ–‡ä»¶å¤¹ä¸‹é¢ï¼Œç¼–è¾‘svnserve.confæ–‡ä»¶ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š 123cd conflsvim svnserver.conf åœ¨svnserver.confæ–‡ä»¶ä¸­ï¼Œanon-accesså‰é¢çš„æ³¨é‡Šå»æ‰ï¼Œå°†å¯¹åº”çš„å€¼è®¾ç½®ä¸ºnoneï¼Œå°†auth-accesså‰é¢çš„æ³¨é‡Šä¹Ÿå»æ‰ï¼Œå°†password-dbå‰é¢çš„æ³¨é‡Šä¹Ÿå»æ‰ï¼Œè¿˜æœ‰å°†authz-dbå‰é¢çš„æ³¨é‡Šä¹Ÿå»æ‰ï¼Œæ˜¾ç¤ºå¦‚ä¸‹ï¼š æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œå»æ‰æ³¨é‡Šä¹‹åï¼Œé…ç½®é¡¹å‰é¢ä¸èƒ½æœ‰ç©ºæ ¼ã€‚ é…ç½®è®¿é—®çš„ç”¨æˆ·åŠå¯†ç ç¼–è¾‘passwdæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶çš„æœ«å°¾åŠ ä¸Šè‡ªå·±éœ€è¦æ·»åŠ çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œæ˜¾ç¤ºå¦‚å›¾ï¼š 1vim passwd æ³¨æ„ï¼šç”¨æˆ·å’Œå¯†ç éƒ½æ˜¯æ˜æ–‡æ˜¾ç¤ºçš„ é…ç½®æ–°ç”¨æˆ·çš„æˆæƒè®¿é—®çš„æ–‡ä»¶ç¼–è¾‘authzæ–‡ä»¶ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­è¿½åŠ å¦‚ä¸‹å†…å®¹ï¼š 12345vim authz# æ·»åŠ å†…å®¹[/]flytzuhan=rw å¯åŠ¨svnæœåŠ¡æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1svnserve -d -r /opt/svn/ å…¶ä¸­-dè¡¨ç¤ºåå°è¿è¡Œï¼Œ -ræŒ‡å®šæ ¹ç›®å½•ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„ï¼šç»å¯¹ä¸èƒ½å°†å¯åŠ¨å‘½ä»¤å†™æˆï¼šsvnserve -d -r /opt/svn/test/ è¿˜æœ‰å¯åŠ¨çš„æ—¶å€™å¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼šsvnserve: E000098: Can&#39;t bind server socket: Address already in use è¿™ä¸ªæ˜¯ç”±äºå·²ç»å¯åŠ¨äº†SVNæœåŠ¡ï¼Œæ‰€ä»¥éœ€è¦å…ˆå…³é—­è¿›ç¨‹ï¼Œé‡æ–°å¯åŠ¨å³å¯ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š 12killall svnservesvnserve -d -r /opt/svn/ windowsç³»ç»Ÿæ‹‰å–ä»£ç å¯ä»¥åœ¨å›¾å½¢åŒ–ç•Œé¢ä¸­è¾“å…¥ï¼šsvn://ä½ çš„IP(å…¬ç½‘)/testé“¾æ¥svn ç„¶åä½ å°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨äº†~~~","categories":[{"name":"Linux","slug":"Linux","permalink":"/categories/Linux/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"/tags/æŠ€å·§/"},{"name":"svn","slug":"svn","permalink":"/tags/svn/"}]},{"title":"Reactä¸Šæ‰‹æŠ€å·§","slug":"Reactä¸Šæ‰‹æŠ€å·§","date":"2019-02-14T02:41:03.000Z","updated":"2019-02-14T03:11:54.199Z","comments":true,"path":"2019/02/14/Reactä¸Šæ‰‹æŠ€å·§/","link":"","permalink":"/2019/02/14/Reactä¸Šæ‰‹æŠ€å·§/","excerpt":"","text":"åˆ›å»ºä¸€ä¸ªReactåº”ç”¨ç¨‹åºå‚è§ï¼šhttps://blog.csdn.net/tiangongkaiwu152368/article/details/80847494 å®‰è£…nodeæˆ‘ä»¬è¦ç”¨create-react-appæ¥å¼€å‘reactï¼Œé¦–å…ˆè¦é€šè¿‡åŒ…ç®¡ç†å™¨å®‰è£…create-react-appï¼Œè€ŒåŒ…ç®¡ç†å™¨ä¸€èˆ¬å®‰è£…äº†nodejsåä¼šè‡ªå¸¦çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ç¬¬ä¸€æ­¥æ˜¯åœ¨æˆ‘ä»¬çš„ç”µè„‘ä¸Šå®‰è£…nodeã€‚ è¯·å‚è€ƒä»¥ä¸‹nodejså®‰è£…æ•™ç¨‹ï¼š Node.jså®‰è£…é…ç½® æ£€æµ‹npmåŒ…æ˜¯å¦å¯ç”¨å®‰è£…å¥½åï¼Œå¹¶ä¸”ä¹Ÿé…ç½®è¿›å…¥äº†ç¯å¢ƒå˜é‡ï¼Œç„¶åæˆ‘ä»¬æ¥æ£€æµ‹ä¸‹ä½ çš„npmåŒ…æ˜¯å¦å¯ç”¨ï¼Œæ‰“å¼€cmdçª—å£ï¼Œè¾“å…¥npm -v è¿›è¡Œæ£€æµ‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œè‹¥æ˜¾ç¤ºç‰ˆæœ¬å·åˆ™è¯´æ˜å®‰è£…æˆåŠŸï¼Œç¯å¢ƒå˜é‡ä¹Ÿé…ç½®æˆåŠŸï¼Œå¯ç”¨å¼€å§‹å®‰è£…creact-react-appè¿›è¡Œreactå¼€å‘äº†ã€‚ ä½¿ç”¨ create-react-app å¿«é€Ÿæ„å»º React å¼€å‘ç¯å¢ƒcreate-react-app æ˜¯æ¥è‡ªäº Facebookï¼Œé€šè¿‡è¯¥å‘½ä»¤æˆ‘ä»¬æ— éœ€é…ç½®å°±èƒ½å¿«é€Ÿæ„å»º React å¼€å‘ç¯å¢ƒã€‚ create-react-app è‡ªåŠ¨åˆ›å»ºçš„é¡¹ç›®æ˜¯åŸºäº Webpack + ES6 ã€‚ æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºé¡¹ç›®ï¼š 1234npm install -g create-react-appcreate-react-app project_namecd project_name/npm start å‚è€ƒï¼šcreate-react-app åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ http://localhost:3000/ ï¼Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æç¤ºï¼šå®‰è£…å¥½åï¼Œå¦‚æœä½ æƒ³å¸è½½ï¼Œå¯ä»¥ç›´æ¥æŠŠinstallæ”¹ä¸ºuninstalå³å¯ï¼Œä¹Ÿå°±æ˜¯åœ¨å‰é¢ä¸ªunå°±å¯ä»¥è¡¨ç¤ºå¸è½½äº†ã€‚æœ‰æ—¶å€™å¸è½½ååœ¨å®‰è£…å¯èƒ½ä¼šæŠ¥å†™é”™ï¼Œæ­¤æ—¶ä½ ç›´æ¥å®šä½çš„create-react-appå®‰è£…ç›®å½•ï¼Œç„¶åæŠŠè¿™ä¸ªç›®å½•åˆ é™¤ä¸€èˆ¬å°±èƒ½è§£å†³äº†ã€‚ æ€ä¹ˆè¿è¡Œåˆ«äººå†™å¥½çš„reactjsé¡¹ç›® é¦–å…ˆå®‰è£…nodejsæœ€æ–°ç¨³å®šç‰ˆï¼Œé…ç½®ç¯å¢ƒå˜é‡ï¼Œä½¿å¾—nodeå’Œnpmå‘½ä»¤èƒ½æ­£å¸¸è¿è¡Œï¼Œè‡ªå·±å»å®˜æ–¹ä¸‹è½½ï¼› åœ¨é¡¹ç›®ä¸‹è¿è¡Œ npm install ï¼ˆåŠŸèƒ½ï¼šå®‰è£…ä¾èµ–ï¼‰ ç„¶åçœ‹é¡¹ç›®ä¸‹çš„README.mdï¼Œä¸€èˆ¬æœ‰æŒ‡å¼•æ•™ä½ å¦‚ä½•è¿è¡Œã€‚","categories":[{"name":"React","slug":"React","permalink":"/categories/React/"}],"tags":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"/tags/å‰ç«¯/"},{"name":"React","slug":"React","permalink":"/tags/React/"}]},{"title":"Linuxä¸‹ç«¯å£æ˜ å°„å·¥å…·rinetd","slug":"Linuxä¸‹ç«¯å£æ˜ å°„å·¥å…·rinetd","date":"2019-02-12T08:51:22.000Z","updated":"2019-02-12T09:30:58.619Z","comments":true,"path":"2019/02/12/Linuxä¸‹ç«¯å£æ˜ å°„å·¥å…·rinetd/","link":"","permalink":"/2019/02/12/Linuxä¸‹ç«¯å£æ˜ å°„å·¥å…·rinetd/","excerpt":"","text":"Linuxä¸‹ç®€å•å¥½ç”¨çš„å·¥å…·rinetdï¼Œå®ç°ç«¯å£æ˜ å°„/è½¬å‘/é‡å®šå‘ å®˜ç½‘åœ°å€http://www.boutell.com/rinetd è½¯ä»¶ä¸‹è½½1wget http://www.boutell.com/rinetd/http/rinetd.tar.gz è§£å‹å®‰è£…1234tar zxvf rinetd.tar.gzcd rinetdmakemake install æ³¨æ„ï¼šæ‰§è¡Œmake installæ—¶å¯èƒ½å‡ºç°é”™è¯¯ï¼š ç¼ºå°‘ç›®å½•/usr/man/man8 æ­¤æ—¶æ‰§è¡Œ mkdir /usr/man/man8åå†æ‰§è¡Œmake installå³å¯ ç¼–è¾‘é…ç½®123456vi /etc/rinetd.conf# å†…å®¹0.0.0.0 8080 172.19.94.3 80800.0.0.0 2222 192.168.0.103 33891.2.3.4 80 192.168.0.10 80 è¯´æ˜ä¸€ä¸‹ï¼ˆ0.0.0.0è¡¨ç¤ºæœ¬æœºç»‘å®šæ‰€æœ‰å¯ç”¨åœ°å€ï¼‰å°†æ‰€æœ‰å‘å¾€æœ¬æœº8080ç«¯å£çš„è¯·æ±‚è½¬å‘åˆ°172.19.94.3çš„8080ç«¯å£å°†æ‰€æœ‰å‘å¾€æœ¬æœº2222ç«¯å£çš„è¯·æ±‚è½¬å‘åˆ°192.168.0.103çš„3389ç«¯å£å°†æ‰€æœ‰å‘å¾€1.2.3.4çš„80ç«¯å£è¯·æ±‚è½¬å‘åˆ°192.168.0.10çš„80ç«¯å£ å‘½ä»¤æ ¼å¼æ˜¯bindaddress bindport connectaddress connectportç»‘å®šçš„åœ°å€ ç»‘å®šçš„ç«¯å£ è¿æ¥çš„åœ°å€ è¿æ¥çš„ç«¯å£æˆ–[Source Address] [Source Port] [Destination Address] [Destination Port]æºåœ°å€ æºç«¯å£ ç›®çš„åœ°å€ ç›®çš„ç«¯å£ å¯åŠ¨ç¨‹åº1234rinetd -c /etc/rinetd.conf ##å¯åŠ¨è½¬å‘# é™„åŠ ï¼špkill rinetd ##å…³é—­è¿›ç¨‹ æŠŠå‘½ä»¤rinetd -c /etc/rinetd.confåŠ åˆ°/etc/rc.localé‡Œé¢å°±å¯ä»¥å¼€æœºè‡ªåŠ¨è¿è¡Œ æŸ¥çœ‹çŠ¶æ€123netstat -antp | grep 8080 | grep -v grepnetstat -antp | grep rinetd | grep -v grep éœ€è¦æ³¨æ„ rinetd.confä¸­ç»‘å®šçš„æœ¬æœºç«¯å£å¿…é¡»æ²¡æœ‰è¢«å…¶å®ƒç¨‹åºå ç”¨ è¿è¡Œrinetdçš„ç³»ç»Ÿé˜²ç«å¢™åº”è¯¥æ‰“å¼€ç»‘å®šçš„æœ¬æœºç«¯å£ï¼ˆæˆ–è€…ç›´æ¥å…³é—­é˜²ç«å¢™ï¼Ÿï¼‰ ä¾‹å¦‚ï¼š 12-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 1111 -j ACCEPT-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 2222 -j ACCEPT","categories":[{"name":"Linux","slug":"Linux","permalink":"/categories/Linux/"}],"tags":[{"name":"æ˜ å°„","slug":"æ˜ å°„","permalink":"/tags/æ˜ å°„/"},{"name":"rinetd","slug":"rinetd","permalink":"/tags/rinetd/"}]},{"title":"å·¥ä½œä»¥åŠè‡ªæˆ‘å­¦ä¹ è®¡åˆ’","slug":"å·¥ä½œä»¥åŠè‡ªæˆ‘å­¦ä¹ è®¡åˆ’","date":"2019-01-31T08:38:41.000Z","updated":"2019-01-31T08:41:00.863Z","comments":true,"path":"2019/01/31/å·¥ä½œä»¥åŠè‡ªæˆ‘å­¦ä¹ è®¡åˆ’/","link":"","permalink":"/2019/01/31/å·¥ä½œä»¥åŠè‡ªæˆ‘å­¦ä¹ è®¡åˆ’/","excerpt":"","text":"äººå·¥æ™ºèƒ½-2019å¹´å·¥ä½œè®¡åˆ’","categories":[{"name":"ä¹±è¯­","slug":"ä¹±è¯­","permalink":"/categories/ä¹±è¯­/"}],"tags":[{"name":"å­¦ä¹ è®¡åˆ’","slug":"å­¦ä¹ è®¡åˆ’","permalink":"/tags/å­¦ä¹ è®¡åˆ’/"},{"name":"å·¥ä½œè®¡åˆ’","slug":"å·¥ä½œè®¡åˆ’","permalink":"/tags/å·¥ä½œè®¡åˆ’/"}]},{"title":"è®©åº”ç”¨ç¨‹åºæ”¯æŒemojiå­—ç¬¦","slug":"è®©åº”ç”¨ç¨‹åºæ”¯æŒemojiå­—ç¬¦","date":"2019-01-31T03:00:44.000Z","updated":"2019-01-31T03:05:54.995Z","comments":true,"path":"2019/01/31/è®©åº”ç”¨ç¨‹åºæ”¯æŒemojiå­—ç¬¦/","link":"","permalink":"/2019/01/31/è®©åº”ç”¨ç¨‹åºæ”¯æŒemojiå­—ç¬¦/","excerpt":"","text":"ä»€ä¹ˆæ˜¯emojiï¼Ÿå°±æ˜¯è¿™äº›è¡¨æƒ…å’Œç¬¦å·ï¼š ğŸ˜€ğŸ˜„ğŸ’¦ğŸ˜ğŸ˜‚ğŸ˜±ğŸ˜­ğŸ˜´ğŸ‘Œ è‡ªiPhoneä»iOS 5åœ¨è¾“å…¥æ³•ä¸­å¼€å§‹æ”¯æŒemojiä»¥æ¥ï¼Œè¿™äº›è¡¨æƒ…ç¬¦å·è¿…é€Ÿé£é¡ä¸–ç•Œã€‚ä½†æ˜¯å¾ˆå¤šWebç½‘ç«™ç«Ÿç„¶è¿˜ä¸ï¼æ”¯ï¼æŒï¼ï¼ï¼ é‚£æ€ä¹ˆæ‰èƒ½æ”¯æŒemojiå‘¢ï¼Ÿå…¶å®ä»£ç ä¸€è¡Œéƒ½ä¸ç”¨æ”¹ï¼Œå› ä¸ºemojiç¬¦å·å®é™…ä¸Šæ˜¯æ–‡æœ¬ï¼Œå¹¶ä¸æ˜¯å›¾ç‰‡ï¼Œå®ƒä»¬ä»…ä»…æ˜¾ç¤ºä¸ºå›¾ç‰‡è€Œå·²ã€‚è€Œä¸”ï¼Œemojiç¬¦å·å·²ç»è¢«æ ‡å‡†åŒ–å¹¶ç¼–ç åˆ°æœ€æ–°çš„Unicodeæ ‡å‡†ä¸­äº†ï¼Œæ‰€ä»¥ï¼Œè¦æ”¯æŒemojiï¼Œåªéœ€è¦åº•å±‚è½¯ä»¶ç³»ç»Ÿæ”¯æŒå°±å¯ä»¥äº†ã€‚ æœåŠ¡å™¨ç«¯è¦æ­£ç¡®å­˜å‚¨emojiç¬¦å·ï¼Œåªéœ€è¦ç¡®ä¿Webç¨‹åºå’Œåº•å±‚æ•°æ®åº“èƒ½æ”¯æŒæœ€æ–°çš„Unicodeæ ‡å‡†å°±å¯ä»¥äº†ã€‚ å¦‚æœä½¿ç”¨MySQLä½œä¸ºæ•°æ®åº“ï¼Œéœ€è¦å‡çº§åˆ°5.5.3æˆ–æ›´æ–°çš„ç‰ˆæœ¬ï¼Œç„¶åï¼ŒæŠŠé»˜è®¤ç¼–ç ä»åŸæ¥çš„utf8æ”¹ä¸ºutf8mb4ï¼Œåœ¨my.cnfæˆ–è€…my.inié…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹å¦‚ä¸‹ï¼š 123456[client]default-character-set = utf8mb4[mysqld]character-set-server = utf8mb4collation-server = utf8mb4_general_ci é‡å¯MySQLï¼Œç„¶åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ç¼–ç ï¼Œåº”è¯¥å…¨éƒ¨ä¸ºutf8mb4ï¼ˆcharacter_set_filesystemå’Œcharacter_set_systemé™¤å¤–ï¼‰ï¼š 1234567891011121314mysql&gt; show variables like '%char%';+--------------------------+--------------------------+| Variable_name | Value |+--------------------------+--------------------------+| character_set_client | utf8mb4 || character_set_connection | utf8mb4 || character_set_database | utf8mb4 || character_set_filesystem | binary || character_set_results | utf8mb4 || character_set_server | utf8mb4 || character_set_system | utf8 || character_sets_dir | /usr/local/mysql-5.7.... |+--------------------------+--------------------------+8 rows in set (0.00 sec) ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹collationè®¾ç½®ï¼Œåº”è¯¥å…¨éƒ¨æ˜¯utf8mb4_general_ciï¼š 123456789mysql&gt; show variables like '%coll%';+----------------------+--------------------+| Variable_name | Value |+----------------------+--------------------+| collation_connection | utf8mb4_general_ci || collation_database | utf8mb4_general_ci || collation_server | utf8mb4_general_ci |+----------------------+--------------------+3 rows in set (0.01 sec) å¦‚æœcharacter_set_databaseè¿˜æ˜¯ä¸ºutf8ï¼Œéœ€è¦é‡å¯æœåŠ¡å™¨ã€‚ ç°åœ¨ï¼ŒMySQLå°±å¯ä»¥æ­£ç¡®å­˜å‚¨emojiå­—ç¬¦äº†ã€‚ Webè½¯ä»¶ è¦æ”¯æŒemojiï¼Œéœ€è¦Webè½¯ä»¶ä¹Ÿæ”¯æŒã€‚ç›®å‰ï¼Œå·²çŸ¥æ”¯æŒemojiçš„åŒ…æ‹¬ï¼š Java 8 Node æœ€åï¼Œå¦‚æœä½ çš„Webåº”ç”¨ç¨‹åºæ²¡æœ‰ä½¿ç”¨æ ‡å‡†çš„UTF-8ç¼–ç ï¼Œè€Œæ˜¯ä½¿ç”¨äº†GBKç­‰ç¼–ç ï¼Œæƒ³è¦æ”¯æŒemojiå°±åªèƒ½å‘µå‘µäº†","categories":[{"name":"ä¹±è¯­","slug":"ä¹±è¯­","permalink":"/categories/ä¹±è¯­/"}],"tags":[{"name":"emoji","slug":"emoji","permalink":"/tags/emoji/"},{"name":"utf8mb4","slug":"utf8mb4","permalink":"/tags/utf8mb4/"},{"name":"Web","slug":"Web","permalink":"/tags/Web/"}]},{"title":"JVM -verboseå‚æ•°è¯¦è§£","slug":"JVM-verboseå‚æ•°è¯¦è§£","date":"2019-01-28T11:50:55.000Z","updated":"2019-01-28T12:05:53.116Z","comments":true,"path":"2019/01/28/JVM-verboseå‚æ•°è¯¦è§£/","link":"","permalink":"/2019/01/28/JVM-verboseå‚æ•°è¯¦è§£/","excerpt":"","text":"java -verbose[:class|gc|jni] åœ¨è¾“å‡ºè®¾å¤‡ä¸Šæ˜¾ç¤ºè™šæ‹Ÿæœºè¿è¡Œä¿¡æ¯java -verbose:classåœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™æœ‰å¤šå°‘ç±»è¢«åŠ è½½ï¼ä½ å¯ä»¥ç”¨verbose:classæ¥ç›‘è§†ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥java -verbose:class XXX (XXXä¸ºç¨‹åºå)ä½ ä¼šåœ¨æ§åˆ¶å°çœ‹åˆ°åŠ è½½çš„ç±»çš„æƒ…å†µã€‚ é…ç½®å‚æ•°ï¼š verboseå’Œverbose:classå«ä¹‰ç›¸åŒï¼Œè¾“å‡ºè™šæ‹Ÿæœºè£…å…¥çš„ç±»çš„ä¿¡æ¯ï¼Œæ˜¾ç¤ºçš„ä¿¡æ¯æ ¼å¼å¦‚ä¸‹ï¼š 12345678910[Opened D:\\Java\\jdk1.6.0_25\\jre\\lib\\rt.jar][Loaded java.lang.Object from D:\\Java\\jdk1.6.0_25\\jre\\lib\\rt.jar][Loaded java.io.Serializable from D:\\Java\\jdk1.6.0_25\\jre\\lib\\rt.jar][Loaded java.lang.Comparable from D:\\Java\\jdk1.6.0_25\\jre\\lib\\rt.jar][Loaded java.lang.CharSequence from D:\\Java\\jdk1.6.0_25\\jre\\lib\\rt.jar]... java â€“verbose:gcåœ¨è™šæ‹Ÿæœºå‘ç”Ÿå†…å­˜å›æ”¶æ—¶åœ¨è¾“å‡ºè®¾å¤‡æ˜¾ç¤ºä¿¡æ¯ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š [Full GC 256K-&gt;160K(124096K), 0.0042708 secs] è¯¥å‚æ•°ç”¨æ¥ç›‘è§†è™šæ‹Ÿæœºå†…å­˜å›æ”¶çš„æƒ…å†µã€‚ 12345678910public class JvmVerbose &#123; /** * JVM -verbose[:class|gc|jni] å‚æ•°æµ‹è¯• * @param args */ public static void main(String[] args) &#123; JvmVerbose jvmVerbose = new JvmVerbose(); System.gc(); &#125;&#125; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸€ä¸ªæ–°çš„å¯¹è±¡è¢«åˆ›å»ºï¼Œç”±äºå®ƒæ²¡æœ‰ä½¿ç”¨ï¼Œæ‰€ä»¥è¯¥å¯¹è±¡è¿…é€Ÿåœ°å˜ä¸ºå¯è¾¾ï¼Œç¨‹åºç¼–è¯‘åï¼Œæ‰§è¡Œå‘½ä»¤ï¼š java -verbose:gc JvmVerbose åç»“æœä¸ºï¼š 123[GC 647K-&gt;256K(124096K), 0.0274253 secs][Full GC 256K-&gt;160K(124096K), 0.0042708 secs] ç®­å¤´å‰åçš„æ•°æ®256Kå’Œ160Kåˆ†åˆ«è¡¨ç¤ºåƒåœ¾æ”¶é›†GCå‰åæ‰€æœ‰å­˜æ´»å¯¹è±¡ä½¿ç”¨çš„å†…å­˜å®¹é‡ï¼Œè¯´æ˜æœ‰256K-160K=96Kçš„å¯¹è±¡å®¹é‡è¢«å›æ”¶ï¼Œæ‹¬å·å†…çš„æ•°æ®124096Kä¸ºå †å†…å­˜çš„æ€»å®¹é‡ï¼Œæ”¶é›†æ‰€éœ€è¦çš„æ—¶é—´æ˜¯0.0042708ç§’ï¼ˆè¿™ä¸ªæ—¶é—´åœ¨æ¯æ¬¡æ‰§è¡Œçš„æ—¶å€™ä¼šæœ‰æ‰€ä¸åŒï¼‰ java â€“verbose:jni-verbose:jniè¾“å‡ºnativeæ–¹æ³•è°ƒç”¨çš„ç›¸å…³æƒ…å†µï¼Œä¸€èˆ¬ç”¨äºè¯Šæ–­jniè°ƒç”¨é”™è¯¯ä¿¡æ¯ã€‚åœ¨è™šæ‹Ÿæœºè°ƒç”¨nativeæ–¹æ³•æ—¶è¾“å‡ºè®¾å¤‡æ˜¾ç¤ºä¿¡æ¯ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š [Dynamic-linking native methodjava.lang.Object.registerNatives ... JNI] è¯¥å‚æ•°ç”¨æ¥ç›‘è§†è™šæ‹Ÿæœºè°ƒç”¨æœ¬åœ°æ–¹æ³•çš„æƒ…å†µï¼Œåœ¨å‘ç”Ÿjnié”™è¯¯æ—¶å¯ä¸ºè¯Šæ–­æä¾›ä¾¿åˆ©ã€‚ å°è¯•èº«æ‰‹ï¼š 123456public class Test &#123; public static void main(String args[])&#123; Test test = new Test(); System.gc(); &#125;&#125; é…ç½®å‚æ•°ï¼š æ‰§è¡ŒTest.classåŠ è½½äº†ä»¥ä¸‹è¿™ä¹ˆå¤šç±» 1234567891011121314151617181920212223242526[Opened C:\\Java\\jdk7\\jre\\lib\\rt.jar][Loaded java.lang.Object from C:\\Java\\jdk7\\jre\\lib\\rt.jar][Loaded java.io.Serializable from C:\\Java\\jdk7\\jre\\lib\\rt.jar][Loaded java.lang.Comparable from C:\\Java\\jdk7\\jre\\lib\\rt.jar][Loaded java.lang.CharSequence from C:\\Java\\jdk7\\jre\\lib\\rt.jar][Loaded java.lang.String from C:\\Java\\jdk7\\jre\\lib\\rt.jar][Loaded java.lang.reflect.GenericDeclaration from C:\\Java\\jdk7\\jre\\lib\\rt.jar][Loaded java.lang.reflect.Type from C:\\Java\\jdk7\\jre\\lib\\rt.jar]...[Full GC 812K-&gt;442K(15872K), 0.0031244 secs] [Loaded sun.misc.Cleaner from C:\\Java\\jdk7\\jre\\lib\\rt.jar][Loaded java.lang.Shutdown from C:\\Java\\jdk7\\jre\\lib\\rt.jar][Loaded java.lang.Shutdown$Lock from C:\\Java\\jdk7\\jre\\lib\\rt.jar]...","categories":[{"name":"Java","slug":"Java","permalink":"/categories/Java/"}],"tags":[{"name":"eclipse","slug":"eclipse","permalink":"/tags/eclipse/"},{"name":"JVM","slug":"JVM","permalink":"/tags/JVM/"}]},{"title":"Mavenç”Ÿæˆjavadoc(apiæ–‡æ¡£)","slug":"Mavenç”Ÿæˆjavadoc-apiæ–‡æ¡£","date":"2019-01-24T02:16:22.000Z","updated":"2019-01-24T02:24:05.640Z","comments":true,"path":"2019/01/24/Mavenç”Ÿæˆjavadoc-apiæ–‡æ¡£/","link":"","permalink":"/2019/01/24/Mavenç”Ÿæˆjavadoc-apiæ–‡æ¡£/","excerpt":"","text":"pomé…ç½®123456789101112131415&lt;!-- propertiesä¸dependencysåŒçº§ --&gt;&lt;properties&gt; &lt;maven.compiler.encoding&gt;UTF-8&lt;/maven.compiler.encoding&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;&lt;/properties&gt;&lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt; &lt;version&gt;2.9.1&lt;/version&gt; &lt;configuration&gt; &lt;reportOutputDirectory&gt;../javadocs&lt;/reportOutputDirectory&gt; &lt;destDir&gt;easy-delivery&lt;/destDir&gt; &lt;/configuration&gt;&lt;/plugin&gt; ç”Ÿæˆdocå‘½ä»¤é¦–å…ˆéœ€è¦æ‰“å¼€cmdï¼Œç„¶åcdåˆ°é¡¹ç›®ç›®å½•ä¸‹ï¼Œç„¶åæ‰§è¡Œä¸‹é¢å‘½ä»¤å³å¯ ä¾‹ï¼š 123D:cd D:\\maliangnansheng\\IDEA_HKAI\\hkai-ocrmvn javadoc:javadoc æŸ¥çœ‹æ–‡ä»¶æ¯”å¦‚æˆ‘çš„é¡¹ç›®åœ¨hkai-ocrè¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢ï¼Œdocä¹Ÿä¼šç”Ÿæˆåœ¨ä¸hkai-ocråŒçº§ç›®å½•ï¼ˆä¹Ÿå¯ä»¥ä¿®æ”¹ä¸Šé¢çš„é…ç½®ï¼‰ æ‰“å¼€ç”Ÿæˆçš„docé‡Œindex.html å°±å¯ä»¥çœ‹åˆ°apié¡µé¢","categories":[{"name":"Java","slug":"Java","permalink":"/categories/Java/"}],"tags":[{"name":"Maven","slug":"Maven","permalink":"/tags/Maven/"},{"name":"api","slug":"api","permalink":"/tags/api/"}]},{"title":"CentOSéƒ¨ç½²kodexplorerå¯é“äº‘æ­å»ºç§æœ‰ç½‘ç›˜","slug":"CentOSéƒ¨ç½²kodexplorerå¯é“äº‘æ­å»ºç§æœ‰ç½‘ç›˜","date":"2019-01-16T06:38:15.000Z","updated":"2019-01-16T07:50:17.841Z","comments":true,"path":"2019/01/16/CentOSéƒ¨ç½²kodexplorerå¯é“äº‘æ­å»ºç§æœ‰ç½‘ç›˜/","link":"","permalink":"/2019/01/16/CentOSéƒ¨ç½²kodexplorerå¯é“äº‘æ­å»ºç§æœ‰ç½‘ç›˜/","excerpt":"","text":"å·¥å…·/åŸæ–™ xampp å¯é“äº‘kodexplorer PHPç¯å¢ƒé…ç½® å¯ä»¥åœ¨ä¸²å£ä½¿ç”¨getconf LONG_BIT å‘½ä»¤æ¥æŸ¥çœ‹å¹¶ç¡®å®šlinuxæ“ä½œç³»ç»Ÿç‰ˆæœ¬ è¾“å‡ºï¼š32è¡¨é¢ç³»ç»Ÿæ˜¯32ä½ã€‚è¾“å‡ºï¼š64è¡¨é¢ç³»ç»Ÿæ˜¯64ä½ã€‚ ä¸‹è½½ä¸è‡ªå·±æ“ä½œç³»ç»Ÿç›¸é€‚åº”ç‰ˆæœ¬çš„xampp [32bit] wget https://sourceforge.net/projects/xampp/files/XAMPP%20Linux/5.6.14/xampp-linux-5.6.14-4-installer.run&gt;ï¼ˆ7.3.0æ²¡æœ‰32ä½ç‰ˆæœ¬çš„ï¼Œè‡ªå·±æ‰¾æ‰¾å“ªä¸ªç‰ˆæœ¬æœ‰ï¼‰[64bit] wget https://sourceforge.net/projects/xampp/files/XAMPP%20Linux/7.3.0/xampp-linux-x64-7.3.0-0-installer.run 123mkdir /home/xamppcd /home/xampp/wget https://sourceforge.net/projects/xampp/files/XAMPP%20Linux/7.3.0/xampp-linux-x64-7.3.0-0-installer.run å®‰è£…xamppï¼Œä¸ºç§æœ‰äº‘å®‰è£…æ„å»ºApacheå’ŒPHPç¯å¢ƒ 12chmod u+x xampp-linux-x64-7.3.0-0-installer.run./xampp-linux-x64-7.3.0-0-installer.run åˆ é™¤åŒ…ï¼š 1rm -rf /home/xampp/ å¯åŠ¨xamppï¼Œæ‰§è¡Œ/opt/lampp/lampp startå¯åŠ¨æœåŠ¡ é»˜è®¤å®‰è£…åœ¨/opt/lampp/ä¸‹ 1/opt/lampp/lampp start ä¸‹è½½å’Œå®‰è£…å¯é“äº‘kodexplorer ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„å¯é“äº‘KodExplorerç¨‹åº ä¸‹è½½åœ°å€ï¼šhttp://kodcloud.com/download.html ä¸‹è½½ï¼š 1234mkdir /home/kodexplorercd /home/kodexplorer/# å½“æ—¶æœ€æ–°ç‰ˆwget http://static.kalcaddle.com/update/download/kodexplorer4.37.zip å°†å¯é“äº‘kodexplorer.zipè§£å‹ 1unzip kodexplorer4.37.zip å°†è§£å‹åçš„å†…å®¹æ‹·è´è‡³/opt/lampp/htdocs/ç›®å½•ä¸‹ 123cp -r /home/kodexplorer/ /opt/lampp/htdocs/chmod 777 /opt/lampp/htdocs/kodexplorerchmod -R 777 /opt/lampp/htdocs/kodexplorer/data/ åˆ é™¤ä¸ç”¨æ–‡ä»¶ï¼š 1rm -rf /home/kodexplorer/ æµè§ˆå™¨è®¿é—®kodexplorerçš„index.phpå³å¯è®¿é—®KodExplorerç•Œé¢ å³ï¼šhttp://IPåœ°å€/kodexplorer/index.php ä¾‹ï¼šhttp://172.19.15.52/kodexplorer/index.php","categories":[{"name":"Linux","slug":"Linux","permalink":"/categories/Linux/"}],"tags":[{"name":"kodexplorer","slug":"kodexplorer","permalink":"/tags/kodexplorer/"},{"name":"éƒ¨ç½²","slug":"éƒ¨ç½²","permalink":"/tags/éƒ¨ç½²/"}]},{"title":"ä½¿ç”¨Javaæ‰“å¼€æ¡Œé¢æ–‡ä»¶","slug":"ä½¿ç”¨Javaæ‰“å¼€æ¡Œé¢æ–‡ä»¶","date":"2019-01-15T09:34:36.000Z","updated":"2019-01-15T09:59:44.143Z","comments":true,"path":"2019/01/15/ä½¿ç”¨Javaæ‰“å¼€æ¡Œé¢æ–‡ä»¶/","link":"","permalink":"/2019/01/15/ä½¿ç”¨Javaæ‰“å¼€æ¡Œé¢æ–‡ä»¶/","excerpt":"","text":"æ‰“å¼€æŸä¸€æ–‡ä»¶ï¼ˆé»˜è®¤è½¯ä»¶æ‰“å¼€ï¼‰123456789101112public static void main(String[] args) &#123; try &#123; Desktop desktop = Desktop.getDesktop(); if (desktop.isSupported(Desktop.Action.OPEN)) &#123; desktop.open(new File(\"Your.pdf\")); //å…¨è·¯å¾„ &#125; else &#123; System.out.println(\"Open is not supported\"); &#125; &#125; catch (IOException exp) &#123; exp.printStackTrace(); &#125;&#125; æŒ‡å®šæŸä¸€è½¯ä»¶æ‰“å¼€å¯¹åº”çš„æ–‡ä»¶1234Runtime.getRuntime() .exec(\"WINWORD.EXEï¼ˆä½¿ç”¨å•¥è½¯ä»¶æ‰“å¼€ï¼‰æ‰€åœ¨å…¨è·¯å¾„ D:\\\\test.docxï¼ˆæ–‡ä»¶å…¨è·¯å¾„ï¼‰\");//ä¾‹ï¼š\"C:\\\\Program Files\\\\Microsoft Office\\\\root\\\\Office16\\\\WINWORD.EXE D:\\\\3.pdf\"","categories":[{"name":"Java","slug":"Java","permalink":"/categories/Java/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"/tags/æŠ€å·§/"},{"name":"Desktop","slug":"Desktop","permalink":"/tags/Desktop/"}]},{"title":"pipçš„ä½¿ç”¨æŠ€å·§","slug":"pipçš„ä½¿ç”¨æŠ€å·§","date":"2019-01-12T06:57:20.000Z","updated":"2019-01-12T08:08:22.305Z","comments":true,"path":"2019/01/12/pipçš„ä½¿ç”¨æŠ€å·§/","link":"","permalink":"/2019/01/12/pipçš„ä½¿ç”¨æŠ€å·§/","excerpt":"","text":"å¦‚ä½•ä½¿ç”¨pipå®‰è£…ç‰¹å®šç‰ˆæœ¬çš„pythonç¬¬ä¸‰æ–¹åŒ…pythonçš„åŒ…ç®¡ç†å™¨pipç‰¹åˆ«å¥½ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥æ–¹ä¾¿çš„å®‰è£…ç¬¬ä¸‰æ–¹åŒ…ï¼Œä½†æ˜¯æ€æ ·ä½¿ç”¨pipæ¥å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„ç¬¬ä¸‰æ–¹åŒ…å‘¢ï¼Ÿ å®‰è£…å¥½pythonåï¼ŒåŒ…ç®¡ç†å™¨pipå°±å·²ç»å®‰è£…å¥½äº†ï¼Œåœ¨ç»ˆç«¯ä¸­è¾“å…¥pipå°±å¯ä»¥æŸ¥é˜…åˆ°pipä¸€äº›å¸¸ç”¨ç”¨æ³•ï¼Œå¦‚ï¼š 12pip install package#è¿™é‡Œpackageå³ä¸ºç¬¬ä¸‰æ–¹åŒ…çš„åç§°ï¼Œå¦‚tensorflowï¼Œä½¿ç”¨è¿™ç§å®‰è£…æ–¹å¼ä¼šå®‰è£…æœ€æ–°ç‰ˆæœ¬çš„åŒ… 12pip uninstall package#å¸è½½åŒ… 12pip list#åˆ—ä¸¾å‡ºå½“å‰ç¯å¢ƒå®‰è£…çš„æ‰€æœ‰åŒ… 12pip show package#æ˜¾ç¤ºæ‰€å®‰è£…åŒ…çš„ä¿¡æ¯ 12pip install package==version#packageï¼šåŒ…åï¼›versionï¼šç‰ˆæœ¬å·ã€‚å¦‚pip install tensorflow-gpu==1.12.0å³æ˜¯å®‰è£…1.12.0ç‰ˆæœ¬çš„gpuç‰ˆæœ¬çš„tensorflow å¤šç‰ˆæœ¬Pythonå…±å­˜æ—¶pipç»™æŒ‡å®šç‰ˆæœ¬çš„pythonå®‰è£…packageçš„æ–¹æ³•åœ¨linuxå®‰è£…äº†å¤šç‰ˆæœ¬pythonæ—¶ï¼ˆä¾‹å¦‚python2.7å’Œ3.4ï¼‰ï¼Œpipå®‰è£…çš„åŒ…ä¸ä¸€å®šæ˜¯ç”¨æˆ·æƒ³è¦çš„ä½ç½®ï¼Œæ­¤æ—¶å¯ä»¥ç”¨ -t é€‰é¡¹æ¥æŒ‡å®šä½ç½® æŸ¥çœ‹pipæŒ‡å‘123pip -V# è¾“å‡ºï¼špip 9.0.1 from /usr/lib/python2.7/site-packages/pip-9.0.1-py2.7.egg (python 2.7)# å‘ç°æŒ‡å‘python 2.7 æ‰€ä»¥æˆ‘ä»¬çš„é—®é¢˜å˜æˆäº†æ€ä¹ˆé€šè¿‡pipå»æŒ‡å®šå®‰è£…åˆ°Python3.4ä¸‹ è§£å†³æ–¹æ¡ˆ æ›´æ”¹pip3æŒ‡å‘ï¼ˆæ¨èï¼‰ è¿™ç§æ–¹æ³•å¯ä»¥ä¸€åŠ³æ°¸é€¸åœ°è®©ä¹‹åçš„pip3å®‰è£…éƒ½é¡ºåˆ©ä¸€ç‚¹ 1234567891011121314151617181920212223242526272829303132331.æŸ¥çœ‹pipåœ¨å“ªwhich pip# è¾“å‡ºï¼š/usr/bin/pip2.æŸ¥çœ‹pythonåœ¨å“ªwhich python# è¾“å‡ºï¼š/usr/bin/python3.æŸ¥çœ‹python3åœ¨å“ªwhich python3# è¾“å‡ºï¼š/usr/local/bin/python34.ç¼–è¾‘pipæ‰€åœ¨æ–‡ä»¶vim /usr/bin/pip# æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ï¼š-----------------------------pip--------------------------------#!/usr/bin/python# EASY-INSTALL-ENTRY-SCRIPT: 'pip==9.0.1','console_scripts','pip'__requires__ = 'pip==9.0.1'import reimport sysfrom pkg_resources import load_entry_pointif __name__ == '__main__': sys.argv[0] = re.sub(r'(-script\\.pyw?|\\.exe)?$', '', sys.argv[0]) sys.exit( load_entry_point('pip==9.0.1', 'console_scripts', 'pip')() )-----------------------------pip-end----------------------------å°†ç¬¬ä¸€è¡Œ #!/usr/bin/python ä¿®æ”¹ä¸º#!/usr/local/bin/python3ç„¶åpipå°±æŒ‡å‘python2äº† å¼ºåˆ¶å®‰è£…åˆ°Python3.4ç¯å¢ƒä¸‹ 1python3 -m pip install tensorflow-1.8.0-cp34-cp34m-manylinux1_x86_64.whl è¿™æ ·å°±å¯ä»¥æŒ‡å®šå®‰è£…åˆ°python3ä¸‹äº†ï¼Œä¸è¿‡ç”¨è¿™ç§æ–¹æ³•çš„è¯æ¯æ¬¡è¦å®‰è£…éƒ½å¾—è¿™ä¹ˆåšï¼Œä¸è¿‡å› ä¸ºæˆ‘æ˜¯åœ¨åˆ«äººæœåŠ¡å™¨ä¸Šåšï¼Œä¸å¥½éšä¾¿æ›´æ”¹ï¼Œå› æ­¤é‡‡ç”¨è¿™ç§æ–¹å¼ã€‚ ç”¨ -t é€‰é¡¹æ¥æŒ‡å®šå®‰è£…ä½ç½® ä¾‹å¦‚ç›®æ ‡ä½ç½®æ˜¯/usr/local/lib/python3.4/site-packages/ ï¼Œè¦å®‰è£…tensorflow-1.8.0-cp34-cp34m-manylinux1_x86_64.whlè¿™ä¸ªåŒ…ï¼Œåˆ™ï¼š 1pip install -t /usr/local/lib/python3.4/site-packages/ tensorflow-1.8.0-cp34-cp34m-manylinux1_x86_64.whl è¿™ä¸€ç§æ–¹å¼å®‰è£…ä¸€èˆ¬ä¼šæŠ¥Command &quot;python setup.py egg_info&quot; failed with error code 1è¿™ä¸ªé”™ ã€‚è§£å†³æ–¹æ¡ˆï¼ˆç»éªŒï¼‰ï¼š 12python -m pip install --upgrade --force pip pip install setuptools==33.1.1","categories":[{"name":"Linux","slug":"Linux","permalink":"/categories/Linux/"}],"tags":[{"name":"Python","slug":"Python","permalink":"/tags/Python/"},{"name":"pip","slug":"pip","permalink":"/tags/pip/"}]},{"title":"Hibernateä¸­æ›´æ–°éç©ºåŸŸ","slug":"Hibernateä¸­æ›´æ–°éç©ºåŸŸ","date":"2019-01-10T01:27:16.000Z","updated":"2019-01-10T08:14:58.225Z","comments":true,"path":"2019/01/10/Hibernateä¸­æ›´æ–°éç©ºåŸŸ/","link":"","permalink":"/2019/01/10/Hibernateä¸­æ›´æ–°éç©ºåŸŸ/","excerpt":"","text":"Hibernateä¸­æ›´æ–°éç©ºåŸŸï¼›ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸­æœ‰çš„åŸŸå¯èƒ½æ˜¯nullï¼Œä½†æ˜¯æˆ‘å¹¶ä¸æƒ³è¦†ç›–åŸæ¥çš„æ•°æ®åº“ä¸­çš„æœ‰å€¼çš„åŸŸã€‚ æˆ‘çš„å®ç°æ–¹æ³•ï¼š 12345678910111213141516171819202122232425262728public class BeanUtil &#123; /** * å¤åˆ¶srcå¯¹è±¡çš„éç©ºå±æ€§å€¼åˆ°targetä¸­ * @param src * @param target */ public static void copyNonNullProperties(Object src, Object target) &#123; BeanUtils.copyProperties(src, target, getNullPropertyNames(src)); &#125; /** * è·å–å¯¹è±¡ä¸­å±æ€§ä¸ºç©ºçš„å±æ€§ * @param source * @return */ public static String[] getNullPropertyNames (Object source) &#123; final BeanWrapper src = new BeanWrapperImpl(source); PropertyDescriptor[] pds = src.getPropertyDescriptors(); Set&lt;String&gt; emptyNames = new HashSet&lt;&gt;(); for(PropertyDescriptor pd : pds) &#123; Object srcValue = src.getPropertyValue(pd.getName()); if (srcValue == null) emptyNames.add(pd.getName()); &#125; String[] result = new String[emptyNames.size()]; return emptyNames.toArray(result); &#125;&#125; å¦‚ä½•è°ƒç”¨ï¼š 123456å®ä½“ç±»1ï¼šsrc ï¼ˆå‰ç«¯ä¼ æ¥çš„æ•°æ®ï¼‰å®ä½“ç±»1ï¼šexisting ï¼ˆé€šè¿‡å‰ç«¯ä¼ æ¥æ•°æ®çš„idè·å–å¾—åˆ°æ•°æ®åº“è¡¨é‡Œçš„æ•°æ®ï¼‰//ç”¨srcä¸­ä¸ä¸ºç©ºçš„å±æ€§æ›¿æ¢existingä¸­å¯¹åº”çš„å±æ€§copyNonNullProperties(src,existing);//è°ƒç”¨hibernateçš„å…³ç³»æ›´æ–°æ–¹æ³•iModelConfigDAO.update(existing); iModelConfigDAOçš„å®ç°ç±»è¯´æ˜ï¼š 123456789101112public class ModelConfigDAOImpl implements IModelConfigDAO&#123; @Resource private SessionFactory sessionFactory; private Session getSession() &#123; return sessionFactory.getCurrentSession(); &#125; public void update(ModelConfig modelConfig) &#123; this.getSession().update(modelConfig); &#125;&#125;","categories":[{"name":"Java","slug":"Java","permalink":"/categories/Java/"}],"tags":[{"name":"Hibernate","slug":"Hibernate","permalink":"/tags/Hibernate/"}]},{"title":"ubuntu 18.04.1 å¼€æœºå¯åŠ¨è„šæœ¬","slug":"ubuntu-18-04-1-å¼€æœºå¯åŠ¨è„šæœ¬","date":"2019-01-07T08:18:31.000Z","updated":"2019-01-30T09:23:28.061Z","comments":true,"path":"2019/01/07/ubuntu-18-04-1-å¼€æœºå¯åŠ¨è„šæœ¬/","link":"","permalink":"/2019/01/07/ubuntu-18-04-1-å¼€æœºå¯åŠ¨è„šæœ¬/","excerpt":"","text":"ubuntu 18.04.1 å¼€æœºå¯åŠ¨è„šæœ¬ubuntu18.04ä¸å†ä½¿ç”¨initdç®¡ç†ç³»ç»Ÿï¼Œæ”¹ç”¨systemdã€‚ä¸ªäººè§‰å¾—systemdå¾ˆéš¾ç”¨ï¼Œæ”¹å˜å¤ªå¤§ï¼Œè·Ÿä¹‹å‰çš„å®Œå…¨ä¸åŒ ä¸ºäº†åƒä»¥å‰ä¸€æ ·ï¼Œåœ¨/etc/rc.localä¸­è®¾ç½®å¼€æœºå¯åŠ¨ç¨‹åºï¼Œéœ€è¦ä»¥ä¸‹å‡ æ­¥ï¼š systemdé»˜è®¤è¯»å–/etc/systemd/systemä¸‹çš„é…ç½®æ–‡ä»¶ï¼Œè¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶ä¼šé“¾æ¥/lib/systemd/system/ä¸‹çš„æ–‡ä»¶ã€‚ä¸€èˆ¬ç³»ç»Ÿå®‰è£…å®Œ/lib/systemd/system/ä¸‹ä¼šæœ‰rc-local.serviceæ–‡ä»¶ï¼Œå³æˆ‘ä»¬éœ€è¦çš„é…ç½®æ–‡ä»¶ã€‚ é“¾æ¥è¿‡æ¥ï¼š 1ln -fs /lib/systemd/system/rc-local.service /etc/systemd/system/rc-local.service æ‰“å¼€è„šæœ¬å†…å®¹ï¼š 1cat /etc/systemd/system/rc-local.service 1234567891011121314151617181920212223# SPDX-License-Identifier: LGPL-2.1+## This file is part of systemd.## systemd is free software; you can redistribute it and/or modify it# under the terms of the GNU Lesser General Public License as published by# the Free Software Foundation; either version 2.1 of the License, or# (at your option) any later version.# This unit gets pulled automatically into multi-user.target by# systemd-rc-local-generator if /etc/rc.local is executable.[Unit]Description=/etc/rc.local CompatibilityDocumentation=man:systemd-rc-local-generator(8)ConditionFileIsExecutable=/etc/rc.localAfter=network.target[Service]Type=forkingExecStart=/etc/rc.local startTimeoutSec=0RemainAfterExit=yesGuessMainPID=no ä¸€èˆ¬æ­£å¸¸çš„å¯åŠ¨æ–‡ä»¶ä¸»è¦åˆ†æˆä¸‰éƒ¨åˆ†ï¼š [Unit] æ®µ: å¯åŠ¨é¡ºåºä¸ä¾èµ–å…³ç³» [Service] æ®µ: å¯åŠ¨è¡Œä¸º,å¦‚ä½•å¯åŠ¨ï¼Œå¯åŠ¨ç±»å‹[Install] æ®µ: å®šä¹‰å¦‚ä½•å®‰è£…è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œå³æ€æ ·åšåˆ°å¼€æœºå¯åŠ¨ å¯ä»¥çœ‹å‡ºï¼Œ/etc/rc.local çš„å¯åŠ¨é¡ºåºæ˜¯åœ¨ç½‘ç»œåé¢ï¼Œä½†æ˜¯æ˜¾ç„¶å®ƒå°‘äº† Install æ®µï¼Œä¹Ÿå°±æ²¡æœ‰å®šä¹‰å¦‚ä½•åšåˆ°å¼€æœºå¯åŠ¨ï¼Œæ‰€ä»¥æ˜¾ç„¶è¿™æ ·é…ç½®æ˜¯æ— æ•ˆçš„ã€‚ å› æ­¤æˆ‘ä»¬å°±éœ€è¦åœ¨åé¢å¸®ä»–åŠ ä¸Š [Install] æ®µ: 123[Install] WantedBy=multi-user.target Alias=rc-local.service è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œubuntu-18.04 é»˜è®¤æ˜¯æ²¡æœ‰ /etc/rc.local è¿™ä¸ªæ–‡ä»¶çš„ï¼Œéœ€è¦è‡ªå·±åˆ›å»º åˆ›å»º/etc/rc.localæ–‡ä»¶ï¼ˆæœ‰çš„è¯ä¸ç”¨å†åˆ›å»ºäº†ï¼‰ 1touch /etc/rc.local èµ‹å¯æ‰§è¡Œæƒé™ 1chmod 755 /etc/rc.local ç¼–è¾‘rc.localï¼Œæ·»åŠ éœ€è¦å¼€æœºå¯åŠ¨çš„ä»»åŠ¡ 12345678910111213141516171819#!/bin/sh -e# # rc.local## This script is executed at the end of each multiuser runlevel.# Make sure that the script will \"exit 0\" on success or any other# value on error.## In order to enable or disable this script just change the execution# bits.## By default this script does nothing.########################æ‰‹åŠ¨æ·»åŠ çš„å‘½ä»¤########################echo \"this is a test\" &gt; /usr/local/text.logsudo vncserver######################æ‰‹åŠ¨æ·»åŠ çš„å‘½ä»¤-end######################exit 0 å…¶ä¸­sudo vncserverå°±æ˜¯éœ€è¦å¼€æœºå¯åŠ¨çš„ä»»åŠ¡ï¼ˆæ³¨æ„ï¼šsudoå†™ä¸Šæœ‰ç›Šæ— å®³ï¼Œé¿å…ä¸å¿…è¦çš„éº»çƒ¦ï¼‰ echo &quot;this is a test&quot; &gt; /usr/local/text.logæ˜¯æµ‹è¯•å¼€æœºè„šæœ¬æ˜¯å¦ç”Ÿæ•ˆç”¨çš„ æ‰§è¡Œrebooté‡å¯ç³»ç»Ÿï¼ˆæŸ¥çœ‹ /usr/local/text.log æ–‡ä»¶æ˜¯å¦å­˜åœ¨å°±çŸ¥é“å¼€æœºè„šæœ¬æ˜¯å¦ç”Ÿæ•ˆäº†ï¼‰ ubuntu - ä¸€èˆ¬æƒ…å†µå¼€æœºå¯åŠ¨è„šæœ¬å€Ÿé‰´äºæ­¤åšå®¢ å…ˆå†™ä¸€ä¸ªè„šæœ¬ï¼Œé‡Œé¢å†™ä¸Šæ‰§è¡Œè¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œå†ä½¿ç”¨update-rc.d è„šæœ¬å defaultså‘½ä»¤å°†æ”¹è„šæœ¬æ·»åŠ åˆ°ç³»ç»Ÿå¯åŠ¨ä»»åŠ¡ 12cd /etc/init.dvim tale 12345678910111213#!/bin/bash#program#å…ˆå°†jdkçš„ç¯å¢ƒå‡†å¤‡å¥½export JAVA_HOME=/usr/local/jdk1.8export JRE=$JAVA_HOME/jreexport CLASSPATH=$JAVA_HOME/lib:$JRE/lib:.export PATH=$PATH:$JAVA_HOME/bin/:$JRE/bin#æ‰§è¡Œå‘½ä»¤nohup java -jar /home/veir/tale/tale-least.jar &gt;/home/veir/tale/logs/tale.log &amp;exit 0 ä¿å­˜åï¼Œç»™è„šæœ¬æ·»åŠ å¯æ‰§è¡Œæƒé™ 1chmod +x tale æ·»åŠ å¼€æœºå¯åŠ¨æœåŠ¡ 12update-rc.d tale defaults#defaultsåé¢å¯ä»¥åŠ ä¸€ä¸ªæ•°å­—ï¼Œä¾‹å¦‚99ï¼Œå®ƒè¡¨æ˜ä¸€ä¸ªä¼˜å…ˆçº§ï¼Œè¶Šé«˜è¡¨ç¤ºæ‰§è¡Œçš„è¶Šæ™š æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„ï¼Œå¾ˆå¤šå‘½ä»¤çš„æ‰§è¡Œéœ€è¦ä¸€ä¸ªç³»ç»Ÿçš„ç¯å¢ƒï¼Œä¾‹å¦‚ä¸Šé¢çš„java -jar xxxå°±éœ€è¦jdkçš„ç¯å¢ƒæ”¯æŒï¼Œç„¶åå¾ˆæœ‰å¯èƒ½ï¼Œç³»ç»Ÿåœ¨æ‰§è¡Œæ­¤è„šæœ¬æ—¶ï¼Œjdkçš„ç¯å¢ƒè¿˜æ²¡æœ‰åŠ è½½è¿›æ¥ï¼Œæ‰€ä»¥å°±éœ€è¦æ‰‹åŠ¨åœ¨è¯¥è„šæœ¬ä¸­å£°æ˜éœ€è¦çš„ç¯å¢ƒ ä¿®æ”¹/etc/rc.localè„šæœ¬/etc/rc.localæ˜¯Linuxç³»ç»Ÿå¯åŠ¨åè‡ªåŠ¨æ‰§è¡Œçš„ä¸€ä¸ªè„šæœ¬ï¼Œé»˜è®¤æƒ…å†µä¸‹è¿™ä¸ªè„šæœ¬é‡Œé¢æ²¡æœ‰ä»»åŠ¡ã€‚ä¿®æ”¹è¿™ä¸ªè„šæœ¬å¯ä»¥å¯åŠ¨ä½ è‡ªå·±çš„åº”ç”¨ã€‚ ä¿®æ”¹æ–¹å¼å¾ˆç®€å•ï¼Œåœ¨æœ€åä¸€è¡Œexit 0ä¹‹å‰åŠ ä¸Šå¼€å¯æœåŠ¡æˆ–åº”ç”¨çš„å‘½ä»¤å°±å¥½äº† 1vim /etc/rc.local å¾—åˆ°è§†å›¾å¦‚ä¸‹ï¼š 12345678910111213141516171819#!/bin/sh -e## rc.local## This script is executed at the end of each multiuser runlevel.# Make sure that the script will \"exit 0\" on success or any other# value on error.## In order to enable or disable this script just change the execution# bits.## By default this script does nothing.########################æ‰‹åŠ¨æ·»åŠ çš„å‘½ä»¤######################### å¯åŠ¨xampp-å¯é“äº‘å¯è®¿é—®sudo /opt/lampp/lampp start######################æ‰‹åŠ¨æ·»åŠ çš„å‘½ä»¤-end######################exit 0 centos/redhat - ä¸€èˆ¬æƒ…å†µå¼€æœºå¯åŠ¨è„šæœ¬å…ˆå†™ä¸€ä¸ªè„šæœ¬ï¼Œé‡Œé¢å†™ä¸Šæ‰§è¡Œè¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œå†ä½¿ç”¨update-rc.d è„šæœ¬å defaultså‘½ä»¤å°†æ”¹è„šæœ¬æ·»åŠ åˆ°ç³»ç»Ÿå¯åŠ¨ä»»åŠ¡ 12cd /etc/init.dvim lampp.sh 1234#!/bin/bash# å¯åŠ¨xampp-å¯é“äº‘å¯è®¿é—®sudo /opt/lampp/lampp start su -c â€˜/etc/init.d/lampp.shâ€™ ä¿å­˜åï¼Œç»™è„šæœ¬æ·»åŠ å¯æ‰§è¡Œæƒé™ 1chmod +x lampp.sh æ‰“å¼€/etc/rc.d/rc.localæˆ–/etc/rc.localæ–‡ä»¶ï¼Œåœ¨æœ«å°¾å¢åŠ /etc/init.d/lampp.sh 12345678910111213141516#!/bin/bash# THIS FILE IS ADDED FOR COMPATIBILITY PURPOSES## It is highly advisable to create own systemd services or udev rules# to run scripts during boot instead of using this file.## In contrast to previous versions due to parallel execution during boot# this script will NOT be run after all other services.## Please note that you must run 'chmod +x /etc/rc.d/rc.local' to ensure# that this script will be executed during boot.########################æ‰‹åŠ¨æ·»åŠ çš„å‘½ä»¤######################### å¯åŠ¨xampp-å¯é“äº‘å¯è®¿é—®/etc/init.d/lampp.sh######################æ‰‹åŠ¨æ·»åŠ çš„å‘½ä»¤-end###################### åœ¨centos7(ä¸ä»…ä»…)ä¸­ï¼Œ/etc/rc.d/rc.localçš„æƒé™è¢«é™ä½äº†ï¼Œæ‰€ä»¥éœ€è¦æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤èµ‹äºˆå…¶å¯æ‰§è¡Œæƒé™ 1chmod +x /etc/rc.d/rc.local ä¿®æ”¹/etc/rc.localè„šæœ¬/etc/rc.localæ˜¯Linuxç³»ç»Ÿå¯åŠ¨åè‡ªåŠ¨æ‰§è¡Œçš„ä¸€ä¸ªè„šæœ¬ï¼Œé»˜è®¤æƒ…å†µä¸‹è¿™ä¸ªè„šæœ¬é‡Œé¢æ²¡æœ‰ä»»åŠ¡ã€‚ä¿®æ”¹è¿™ä¸ªè„šæœ¬å¯ä»¥å¯åŠ¨ä½ è‡ªå·±çš„åº”ç”¨ã€‚ ä¿®æ”¹æ–¹å¼å¾ˆç®€å•ï¼Œåœ¨æœ€ååŠ ä¸Šå¼€å¯æœåŠ¡æˆ–åº”ç”¨çš„å‘½ä»¤å°±å¥½äº† 1vim /etc/rc.local å¾—åˆ°è§†å›¾å¦‚ä¸‹ï¼š 12345678910111213141516#!/bin/bash# THIS FILE IS ADDED FOR COMPATIBILITY PURPOSES## It is highly advisable to create own systemd services or udev rules# to run scripts during boot instead of using this file.## In contrast to previous versions due to parallel execution during boot# this script will NOT be run after all other services.## Please note that you must run 'chmod +x /etc/rc.d/rc.local' to ensure# that this script will be executed during boot.########################æ‰‹åŠ¨æ·»åŠ çš„å‘½ä»¤######################### å¯åŠ¨xampp-å¯é“äº‘å¯è®¿é—®sudo /opt/lampp/lampp start######################æ‰‹åŠ¨æ·»åŠ çš„å‘½ä»¤-end###################### å¯åœ¨ä»¥ä¸Šè§†å›¾ä¸­å‘ç°æœ‰ä¸€å¥# Please note that you must run &#39;chmod +x /etc/rc.d/rc.local&#39; to ensureä¸­æ–‡ç¿»è¯‘è¯·æ³¨æ„ï¼Œæ‚¨å¿…é¡»è¿è¡Œâ€œchmod +x /etc/rc.d/rc.æ‰èƒ½ç¡®ä¿æˆåŠŸ - æ„æ€å¾ˆæ˜æ˜¾äº†ï¼ 1chmod +x /etc/rc.d/rc.local","categories":[{"name":"Linux","slug":"Linux","permalink":"/categories/Linux/"}],"tags":[{"name":"Ubuntu","slug":"Ubuntu","permalink":"/tags/Ubuntu/"},{"name":"CentOS","slug":"CentOS","permalink":"/tags/CentOS/"},{"name":"RedHat","slug":"RedHat","permalink":"/tags/RedHat/"},{"name":"å¼€æœºå¯åŠ¨","slug":"å¼€æœºå¯åŠ¨","permalink":"/tags/å¼€æœºå¯åŠ¨/"}]},{"title":"æ–‡ä»¶æ‰“åŒ…-è§£å‹-ä¸‹è½½","slug":"æ–‡ä»¶æ‰“åŒ…-è§£å‹-ä¸‹è½½","date":"2018-12-28T03:07:17.000Z","updated":"2019-03-13T07:36:49.686Z","comments":true,"path":"2018/12/28/æ–‡ä»¶æ‰“åŒ…-è§£å‹-ä¸‹è½½/","link":"","permalink":"/2018/12/28/æ–‡ä»¶æ‰“åŒ…-è§£å‹-ä¸‹è½½/","excerpt":"","text":"æ–‡ä»¶æ‰“åŒ…123456789101112131415161718192021222324252627282930313233/** * æ–‡ä»¶æ‰“åŒ… * å°†ä¼ é€’è¿‡æ¥çš„æ–‡ä»¶åˆ—è¡¨å†™å…¥zipæ–‡ä»¶ * @param fileList è¦æ‰“åŒ…çš„æ–‡ä»¶ * @param zipFileName æ‰“åŒ…åçš„æ–‡ä»¶å * @throws IOException */public static void downZipManyFile(List&lt;File&gt; fileList, String zipFileName) throws IOException &#123; BufferedInputStream br = null;//è¾“å…¥æµ ZipOutputStream out = null; // å‹ç¼©æ–‡ä»¶è¾“å‡ºæµ ZipEntry zip = null; //ç”¨äºè¡¨ç¤º ZIP æ–‡ä»¶æ¡ç›®ã€‚ int size =-1; byte[] buffer = new byte[2048];// å®šä¹‰ç¼“å†²åŒº if(fileList.size()&gt;0)&#123; out = new ZipOutputStream(new FileOutputStream(zipFileName)); for (int i = 0; i &lt; fileList.size(); i++) &#123; File f =fileList.get(i); zip = new ZipEntry(f.getName()); out.putNextEntry(zip); br = new BufferedInputStream(new FileInputStream(f)); while((size=br.read(buffer))!=-1)&#123; out.write(buffer,0,size); out.flush(); &#125; &#125; zip.clone(); br.close(); out.close(); &#125;&#125; å¤šç§å‹ç¼©æ–‡ä»¶è§£å‹åŒ…å«å®ç°å¯¹.zipã€.rarã€.7zã€.tarã€.tar.gzçš„è§£å‹ Maven 1234567891011121314151617181920&lt;!-- .7z --&gt;&lt;dependency&gt; &lt;groupId&gt;net.sf.sevenzipjbinding&lt;/groupId&gt; &lt;artifactId&gt;sevenzipjbinding&lt;/artifactId&gt; &lt;version&gt;9.20-2.00beta&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;net.sf.sevenzipjbinding&lt;/groupId&gt; &lt;artifactId&gt;sevenzipjbinding-all-platforms&lt;/artifactId&gt; &lt;version&gt;9.20-2.00beta&lt;/version&gt;&lt;/dependency&gt;&lt;!-- .7z end --&gt; &lt;!-- .tar/.tar.gz --&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.ant&lt;/groupId&gt; &lt;artifactId&gt;ant&lt;/artifactId&gt; &lt;version&gt;1.10.4&lt;/version&gt;&lt;/dependency&gt;&lt;!-- .tar/.tar.gz end --&gt; ä»£ç å®ç° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337/*åŠŸèƒ½ï¼šå¤šç§æ ¼å¼å‹ç¼©æ–‡ä»¶è§£å‹(.zipã€.rarã€.7zã€.tarã€.tar.gz)*///ä½¿ç”¨gbkç¼–ç é¿å…zipè§£å‹ä¸­æ–‡æ–‡ä»¶åä¹±ç private static final String CHINESE_CHARSET = \"gbk\";//æ–‡ä»¶è¯»å–ç¼“å†²åŒºå¤§å°private static final int CACHE_SIZE = 1024;//ç³»ç»Ÿç±»å‹private static final String WINDOWS=\"windows\";private static final String LINUX=\"linux\";/** * å¤šç§æ ¼å¼å‹ç¼©æ–‡ä»¶è§£å‹ * @param srcFileName æºæ–‡ä»¶å…¨è·¯å¾„ * @param destDir è§£å‹åå­˜å‚¨è·¯å¾„ */public static void deCompress(String srcFileName, String destDir)&#123; //å­˜å‚¨è·¯å¾„ä¸å­˜åœ¨åˆ™åˆ›å»º File dFile=new File(destDir); if (!dFile.exists()) &#123; dFile.mkdirs(); &#125; if (srcFileName.toLowerCase().endsWith(\".zip\")) &#123; unZip(srcFileName, destDir); &#125; else if (srcFileName.toLowerCase().endsWith(\".rar\")) &#123; unRar(srcFileName, destDir); &#125;else if (srcFileName.toLowerCase().endsWith(\".7z\")) &#123; un7Z(srcFileName, destDir); &#125;else if (srcFileName.toLowerCase().endsWith(\".tar\")) &#123; unTar(srcFileName, destDir); &#125;else if (srcFileName.toLowerCase().endsWith(\".tar.gz\")) &#123; unTarGz(srcFileName, destDir); &#125;&#125;/** * .zipæ ¼å¼è§£å‹ * @param srcFileName æºæ–‡ä»¶å…¨è·¯å¾„ * @param destDir è§£å‹åå­˜å‚¨è·¯å¾„ */public static void unZip(String srcFileName, String destDir) &#123; try &#123; //è§£å†³ä¸­æ–‡ä¹±ç  ZipFile zip = new ZipFile(srcFileName, Charset.forName(CHINESE_CHARSET)); //å¾ªç¯éå† for (Enumeration&lt;? extends ZipEntry&gt; entries = zip.entries(); entries.hasMoreElements();) &#123; ZipEntry entry = entries.nextElement(); String zipEntryName = entry.getName(); InputStream in = zip.getInputStream(entry); String outPath = (destDir +\"/\"+ zipEntryName).replaceAll(\"\\\\*\", \"/\"); // åˆ¤æ–­è·¯å¾„æ˜¯å¦å­˜åœ¨,ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶è·¯å¾„ File file = new File(outPath.substring(0, outPath.lastIndexOf('/'))); if (!file.exists()) &#123; file.mkdirs(); &#125; // åˆ¤æ–­æ–‡ä»¶å…¨è·¯å¾„æ˜¯å¦ä¸ºæ–‡ä»¶å¤¹,å¦‚æœæ˜¯ä¸Šé¢å·²ç»ä¸Šä¼ ,ä¸éœ€è¦è§£å‹ if (new File(outPath).isDirectory()) &#123; continue; &#125; FileOutputStream out = new FileOutputStream(outPath); byte[] buf = new byte[CACHE_SIZE]; int len; while ((len = in.read(buf)) &gt; 0) &#123; out.write(buf, 0, len); &#125; in.close(); out.close(); &#125; &#125;catch (Exception e)&#123; e.printStackTrace(); &#125;&#125;/** * .raræ ¼å¼è§£å‹ * @param srcFileName æºæ–‡ä»¶å…¨è·¯å¾„ * @param destDir è§£å‹åå­˜å‚¨è·¯å¾„ */public static void unRar(String srcFileName, String destDir)&#123; String cmd = null; String unRarCmd = null; try &#123; if (systemType().equals(WINDOWS)) &#123; //è§£å‹æ¨¡æ¿å‘½ä»¤ unRarCmd = \"F:\\\\Program Files (x86)\\\\WinRAR\\\\WinRAR.exe x \"; //æ„å»ºè§£å‹å‘½ä»¤ cmd = unRarCmd + srcFileName + \" \" + destDir; &#125; else if (systemType().equals(LINUX)) &#123; //è§£å‹æ¨¡æ¿å‘½ä»¤ unRarCmd = \"unrar x \"; //æ„å»ºè§£å‹å‘½ä»¤ cmd = unRarCmd + srcFileName + \" \" + destDir; &#125; //æ„é€ è¿è¡Œå¯¹è±¡ Runtime rt = Runtime.getRuntime(); //åœ¨å•ç‹¬çš„è¿›ç¨‹ä¸­æ‰§è¡ŒæŒ‡å®šçš„å­—ç¬¦ä¸²å‘½ä»¤ã€‚ rt.exec(cmd); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125;&#125;/** * .7zæ ¼å¼è§£å‹ * @param srcFileName æºæ–‡ä»¶å…¨è·¯å¾„ * @param destDir è§£å‹åå­˜å‚¨è·¯å¾„ */public static void un7Z(String srcFileName, String destDir)&#123; RandomAccessFile randomAccessFile = null; IInArchive inArchive = null; try &#123; randomAccessFile = new RandomAccessFile(srcFileName, \"r\"); inArchive = SevenZip. openInArchive(null,new RandomAccessFileInStream(randomAccessFile)); ISimpleInArchive simpleInArchive = inArchive.getSimpleInterface(); //éå† for (ISimpleInArchiveItem item : simpleInArchive.getArchiveItems()) &#123; int[] hash = new int[] &#123; 0 &#125;; if (!item.isFolder()) &#123; ExtractOperationResult result; long[] sizeArray = new long[1]; //tarFileæ˜¯éå†çš„æ¯ä¸€ä¸ªæ–‡ä»¶ File tarFile=new File(destDir+File.separator+item.getPath()); //tarFileçˆ¶ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»º if (!tarFile.getParentFile().exists()) &#123; tarFile.getParentFile().mkdirs(); &#125; //åˆ›å»ºtarFileæ–‡ä»¶ tarFile.createNewFile(); result = item.extractSlow(new ISequentialOutStream() &#123; public int write(byte[] data) throws SevenZipException &#123; FileOutputStream fos=null; try &#123; fos = new FileOutputStream(tarFile.getAbsolutePath()); //å°†æ•°æ®å†™å…¥fos fos.write(data); fos.flush(); fos.close(); &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; hash[0] ^= Arrays.hashCode(data); sizeArray[0] += data.length; return data.length; &#125; &#125;); &#125; &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); System.exit(1); &#125; finally &#123; if (inArchive != null) &#123; try &#123; inArchive.close(); &#125; catch (SevenZipException e) &#123; e.printStackTrace(); &#125; &#125; if (randomAccessFile != null) &#123; try &#123; randomAccessFile.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125;/** * .taræ ¼å¼è§£å‹ * @param srcFileName æºæ–‡ä»¶å…¨è·¯å¾„ * @param destDir è§£å‹åå­˜å‚¨è·¯å¾„ */public static void unTar(String srcFileName, String destDir)&#123; FileInputStream fis = null; OutputStream fos = null; TarInputStream tarInputStream = null; try &#123; fis = new FileInputStream(new File(srcFileName)); tarInputStream = new TarInputStream(fis, CACHE_SIZE); TarEntry entry = null; while(true)&#123; entry = tarInputStream.getNextEntry(); if( entry == null)&#123; break; &#125; if(entry.isDirectory())&#123; System.out.println(entry.getName()); createDirectory(destDir, entry.getName()); // åˆ›å»ºå­ç›®å½• &#125;else&#123; fos = new FileOutputStream(new File(destDir + File.separator + entry.getName())); int count; byte data[] = new byte[CACHE_SIZE]; while ((count = tarInputStream.read(data)) != -1) &#123; fos.write(data, 0, count); &#125; fos.flush(); &#125; &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125;finally &#123; try &#123; if(fis != null)&#123; fis.close(); &#125; if(fos != null)&#123; fos.close(); &#125; if(tarInputStream != null)&#123; tarInputStream.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125;/** * .tar.gzè§£å‹ * @param srcFileName æºæ–‡ä»¶å…¨è·¯å¾„ * @param destDir è§£å‹åå­˜å‚¨è·¯å¾„ */public static void unTarGz(String srcFileName, String destDir)&#123; FileInputStream fileInputStream = null; BufferedInputStream bufferedInputStream = null; GZIPInputStream gzipIn = null; TarInputStream tarIn = null; OutputStream out = null; try &#123; fileInputStream = new FileInputStream(new File(srcFileName)); bufferedInputStream = new BufferedInputStream(fileInputStream); gzipIn = new GZIPInputStream(bufferedInputStream); tarIn = new TarInputStream(gzipIn, CACHE_SIZE); TarEntry entry = null; while((entry = tarIn.getNextEntry()) != null)&#123; if(entry.isDirectory())&#123; // æ˜¯ç›®å½• createDirectory(destDir, entry.getName()); // åˆ›å»ºå­ç›®å½• &#125;else&#123; // æ˜¯æ–‡ä»¶ File tempFIle = new File(destDir + File.separator + entry.getName()); createDirectory(tempFIle.getParent() + File.separator, null); out = new FileOutputStream(tempFIle); int len =0; byte[] b = new byte[CACHE_SIZE]; while ((len = tarIn.read(b)) != -1)&#123; out.write(b, 0, len); &#125; out.flush(); &#125; &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125;finally &#123; try &#123; if(out != null)&#123; out.close(); &#125; if(tarIn != null)&#123; tarIn.close(); &#125; if(gzipIn != null)&#123; gzipIn.close(); &#125; if(bufferedInputStream != null)&#123; bufferedInputStream.close(); &#125; if(fileInputStream != null)&#123; fileInputStream.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125;/** * æ„å»ºç›®å½• * @param outputDir è¾“å‡ºç›®å½• * @param subDir å­ç›®å½• */private static void createDirectory(String outputDir, String subDir)&#123; File file = new File(outputDir); if(!(subDir == null || subDir.trim().equals(\"\"))) &#123;//å­ç›®å½•ä¸ä¸ºç©º file = new File(outputDir + File.separator + subDir); &#125; if(!file.exists())&#123; if(!file.getParentFile().exists())&#123; file.getParentFile().mkdirs(); &#125; file.mkdirs(); &#125;&#125;/** * åˆ¤æ–­ç¨‹åºè¿è¡Œåœ¨ä»€ä¹ˆç³»ç»Ÿä¸Š * @return ç³»ç»Ÿç±»å‹ */public static String systemType() &#123; Properties properties = System.getProperties(); String os = properties.getProperty(\"os.name\"); if (os != null &amp;&amp; os.toLowerCase().contains(WINDOWS))&#123; return WINDOWS; &#125;else if (os != null &amp;&amp; os.toLowerCase().contains(LINUX))&#123; return LINUX; &#125; return null;&#125;public static void main(String[] args) &#123; //deCompress(\"E:/Test/Test01.zip\",\"E:/Test/testZip\"); //deCompress(\"E:/Test/Test02.rar\",\"E:/Test/testRar\"); //deCompress(\"E:/Test/Test03.7z\",\"E:/Test/test7z\"); //deCompress(\"E:/Test/Test04.tar\",\"E:/Test/testTar\"); //deCompress(\"E:/Test/apache-tomcat-9.0.13-src.tar.gz\",\"E:/Test/testTarGz\");&#125; ä»æœåŠ¡å™¨ä¸‹è½½æ–‡ä»¶ä¸‹è½½å·²ç»æ‰“åŒ…å¥½çš„æ–‡ä»¶123456789101112131415161718192021222324252627282930313233343536/** * æ–‡ä»¶ä¸‹è½½ * @param zipFileName zipæ–‡ä»¶å…¨è·¯å¾„ï¼ˆå«æ–‡ä»¶åï¼‰ * @param response * @param isDelete æ˜¯å¦å°†ç”Ÿæˆçš„æœåŠ¡å™¨ç«¯æ–‡ä»¶åˆ é™¤ * @return */public ReturnT&lt;?&gt; downloadFile(String zipFileName, HttpServletResponse response, boolean isDelete) &#123; try &#123; File file=new File(zipFileName); // ä»¥æµçš„å½¢å¼ä¸‹è½½æ–‡ä»¶ã€‚ BufferedInputStream fis = new BufferedInputStream(new FileInputStream(file.getPath())); byte[] buffer = new byte[fis.available()]; fis.read(buffer); fis.close(); // æ¸…ç©ºresponse response.reset(); OutputStream toClient = new BufferedOutputStream(response.getOutputStream()); response.setContentType(\"application/octet-stream\"); response.setHeader(\"Content-Disposition\", \"attachment;filename=\" + new String(file.getName().getBytes(\"UTF-8\"),\"ISO-8859-1\")); toClient.write(buffer); toClient.flush(); toClient.close(); if(isDelete) &#123; //å°†ç”Ÿæˆçš„æœåŠ¡å™¨ç«¯æ–‡ä»¶åˆ é™¤ file.delete(); &#125; return new ReturnT(HttpStatus.OK, \"ä¸‹è½½æˆåŠŸ\", null); &#125; catch (Exception e) &#123; logger.error(\"ä¸‹è½½å¤±è´¥\",e); return new ReturnT(HttpStatus.NOT_FOUND, \"ä¸‹è½½å¤±è´¥\", null); &#125;&#125; å˜æ‰“åŒ…è¾¹ä¸‹è½½12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879/** * ä¸‹è½½-è¾¹æ‰“åŒ…è¾¹ä¸‹è½½ * @param downloadName å‹ç¼©åŒ…çš„åå­— * @param fileList æ‰€æœ‰éœ€è¦ä¸‹è½½çš„æ–‡ä»¶åˆ—è¡¨ * @param request * @param response * @return */@Overridepublic ReturnT&lt;?&gt; downloadFile(String downloadName, List&lt;File&gt; fileList, HttpServletRequest request, HttpServletResponse response) &#123; //å“åº”å¤´çš„è®¾ç½® response.reset(); response.setCharacterEncoding(\"utf-8\"); response.setContentType(\"multipart/form-data\"); //è®¾ç½®å‹ç¼©åŒ…çš„åå­— //è§£å†³ä¸åŒæµè§ˆå™¨å‹ç¼©åŒ…åå­—å«æœ‰ä¸­æ–‡æ—¶ä¹±ç çš„é—®é¢˜ String agent = request.getHeader(\"USER-AGENT\"); try &#123; if (agent.contains(\"MSIE\")||agent.contains(\"Trident\")) &#123; downloadName = java.net.URLEncoder.encode(downloadName, \"UTF-8\"); &#125; else &#123; downloadName = new String(downloadName.getBytes(\"UTF-8\"),\"ISO-8859-1\"); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); return new ReturnT(HttpStatus.NOT_FOUND, \"ä¸‹è½½å¤±è´¥\", null); &#125; response.setHeader(\"Content-Disposition\", \"attachment;fileName=\\\"\" + downloadName + \"\\\"\"); //è®¾ç½®å‹ç¼©æµï¼šç›´æ¥å†™å…¥responseï¼Œå®ç°è¾¹å‹ç¼©è¾¹ä¸‹è½½ ZipOutputStream zipos = null; try &#123; zipos = new ZipOutputStream( new BufferedOutputStream(response.getOutputStream())); zipos.setMethod(ZipOutputStream.DEFLATED); //è®¾ç½®å‹ç¼©æ–¹æ³• &#125; catch (Exception e) &#123; e.printStackTrace(); return new ReturnT(HttpStatus.NOT_FOUND, \"ä¸‹è½½å¤±è´¥\", null); &#125; //å¾ªç¯å°†æ–‡ä»¶å†™å…¥å‹ç¼©æµ DataOutputStream os = null; for(int i = 0; i &lt; fileList.size(); i++ )&#123; File file = fileList.get(i); try &#123; //æ·»åŠ ZipEntryï¼Œå¹¶ZipEntryä¸­å†™å…¥æ–‡ä»¶æµ //è¿™é‡Œï¼ŒåŠ ä¸Šiæ˜¯é˜²æ­¢è¦ä¸‹è½½çš„æ–‡ä»¶æœ‰é‡åçš„å¯¼è‡´ä¸‹è½½å¤±è´¥ zipos.putNextEntry(new ZipEntry(i + file.getName())); os = new DataOutputStream(zipos); InputStream is = new FileInputStream(file); byte[] b = new byte[100]; int length = 0; while((length = is.read(b))!= -1)&#123; os.write(b, 0, length); &#125; is.close(); zipos.closeEntry(); &#125; catch (IOException e) &#123; e.printStackTrace(); return new ReturnT(HttpStatus.NOT_FOUND, \"ä¸‹è½½å¤±è´¥\", null); &#125; &#125; //å…³é—­æµ try &#123; os.flush(); os.close(); zipos.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); return new ReturnT(HttpStatus.NOT_FOUND, \"ä¸‹è½½å¤±è´¥\", null); &#125; return new ReturnT(HttpStatus.OK, \"ä¸‹è½½æˆåŠŸ\", null);&#125; å…¶å®ƒæ–‡ä»¶æ“ä½œè·å–å•ä¸ªæ–‡ä»¶çš„æ‰€æœ‰å†…å®¹123456789101112131415161718192021222324/** * è·å–å•ä¸ªæ–‡ä»¶çš„æ‰€æœ‰å†…å®¹ * @param fileName æ–‡ä»¶å…¨è·¯å¾„ * @return */public static String readToString(String fileName) &#123; try &#123; File file = new File(fileName); Long filelength = file.length(); byte[] filecontent = new byte[filelength.intValue()]; FileInputStream in = new FileInputStream(file); in.read(filecontent); in.close(); return new String(filecontent, encoding); &#125; catch (FileNotFoundException e) &#123; logger.error(\"è¯¥æ–‡ä»¶ä¸å­˜åœ¨æˆ–è·¯å¾„é”™è¯¯\",e); e.printStackTrace(); return null; &#125; catch (IOException e) &#123; logger.error(\"è¯»å–æ–‡ä»¶å‡ºé”™\",e); e.printStackTrace(); return null; &#125;&#125; è·å–å¤šä¸ªæ–‡ä»¶çš„æ–‡ä»¶ååˆ—è¡¨(å…¨è·¯å¾„)123456789101112131415161718192021222324252627282930/** * è·å–å¤šä¸ªæ–‡ä»¶æ–‡ä»¶åˆ—è¡¨(å…¨è·¯å¾„) * @param fileDir æ–‡ä»¶å¤¹è·¯å¾„ * @param picturePath å›¾ç‰‡ç›¸å¯¹è·¯å¾„ * @param request * @return è¿”å›å¸¦åŸŸåçš„æ–‡ä»¶è·¯å¾„ */public static List&lt;String&gt; readToListPath(String fileDir, String picturePath, HttpServletRequest request) &#123; //è·å–å¸¦éƒ¨ç½²ç¯å¢ƒä¸Šä¸‹æ–‡çš„åŸŸå StringBuffer url = request.getRequestURL(); String tempContextUrl = url .delete(url.length() - request.getRequestURI().length(), url.length()) .append(request.getContextPath()).toString(); List&lt;String&gt; fileNameList = new ArrayList&lt;&gt;(); try &#123; List&lt;File&gt; fileList = getFilePath(fileDir,\"\"); if (fileList.size()==0)&#123; return fileNameList; &#125; for (File f1 : fileList) &#123; fileNameList.add(tempContextUrl+picturePath+\"/\"+f1.getName()); &#125; return fileNameList; &#125;catch (Exception e)&#123; logger.error(\"è·å–å¤šä¸ªæ–‡ä»¶æ–‡ä»¶åˆ—è¡¨å¼‚å¸¸\",e); e.printStackTrace(); return null; &#125;&#125; è·å–å¤šä¸ªæ–‡ä»¶çš„å†…å®¹åˆ—è¡¨123456789101112131415161718192021/** * è·å–å¤šä¸ªæ–‡ä»¶å†…å®¹åˆ—è¡¨ * @param fileDir æ–‡ä»¶æ‰€åœ¨è·¯å¾„ * @return */public static List&lt;String&gt; readToListAndString(String fileDir)&#123; try &#123; List&lt;String&gt; fileContentList = new ArrayList&lt;&gt;(); List&lt;File&gt; fileList = getFilePath(fileDir,\"\"); for (File file : fileList)&#123; if(!readToString(file.toString()).equals(\"\"))&#123; fileContentList.add(readToString(file.toString())); &#125; &#125; return fileContentList; &#125;catch (Exception e)&#123; logger.error(\"è·å–å¤šä¸ªæ–‡ä»¶å†…å®¹åˆ—è¡¨å¼‚å¸¸\",e); e.printStackTrace(); return null; &#125;&#125; é€’å½’è·å–ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶123456789101112131415161718192021222324252627282930/** * é€’å½’è·å–ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ * @param fileDir æ–‡ä»¶æ‰€åœ¨è·¯å¾„ * @return */public static List&lt;File&gt; getFilePath(String fileDir,String endsWith)&#123; List&lt;File&gt; fileList = new ArrayList&lt;&gt;(); File file = new File(fileDir); File[] files = file.listFiles();// è·å–ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ if (files == null) &#123;// å¦‚æœç›®å½•ä¸ºç©ºï¼Œè¿”å›ç©º return null; &#125; // éå†ï¼Œç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ for (File f : files) &#123; if (f.isFile()) &#123; if(endsWith.equals(\"\")||endsWith==null)&#123; fileList.add(f); &#125;else &#123; if (f.getName().endsWith(endsWith))&#123; fileList.add(f); &#125; &#125; &#125; else if (f.isDirectory()) &#123; getFilePath(f.getAbsolutePath(),endsWith); &#125; &#125; return fileList;&#125; é€’å½’åˆ é™¤æ–‡ä»¶ï¼ˆåˆ é™¤æ–‡ä»¶å¤¹ï¼‰12345678910111213141516171819/** * é€’å½’åˆ é™¤ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åŠå­ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ * @param dir ç›®å½•è·¯å¾„ * @return */public static boolean deleteDir(File dir) &#123; if (dir.isDirectory()) &#123; String[] children = dir.list(); //é€’å½’åˆ é™¤ç›®å½•ä¸­çš„å­ç›®å½•ä¸‹ for (int i=0; i&lt;children.length; i++) &#123; boolean success = deleteDir(new File(dir, children[i])); if (!success) &#123; return false; &#125; &#125; &#125; // ç›®å½•æ­¤æ—¶ä¸ºç©ºæˆ–è€…æ˜¯æ–‡ä»¶ï¼Œå¯ä»¥åˆ é™¤ return dir.delete();&#125;","categories":[{"name":"Java","slug":"Java","permalink":"/categories/Java/"}],"tags":[{"name":"æ–‡ä»¶æ‰“åŒ…","slug":"æ–‡ä»¶æ‰“åŒ…","permalink":"/tags/æ–‡ä»¶æ‰“åŒ…/"},{"name":"å‹ç¼©æ–‡ä»¶è§£å‹","slug":"å‹ç¼©æ–‡ä»¶è§£å‹","permalink":"/tags/å‹ç¼©æ–‡ä»¶è§£å‹/"}]},{"title":"linuxç¯å¢ƒä¸‹å®‰è£… openOffice å¹¶å¯åŠ¨æœåŠ¡","slug":"linuxç¯å¢ƒä¸‹å®‰è£…-openOffice-å¹¶å¯åŠ¨æœåŠ¡","date":"2018-12-25T02:07:07.000Z","updated":"2019-01-10T08:06:15.269Z","comments":true,"path":"2018/12/25/linuxç¯å¢ƒä¸‹å®‰è£…-openOffice-å¹¶å¯åŠ¨æœåŠ¡/","link":"","permalink":"/2018/12/25/linuxç¯å¢ƒä¸‹å®‰è£…-openOffice-å¹¶å¯åŠ¨æœåŠ¡/","excerpt":"","text":"èƒŒæ™¯æ•…äº‹è¿™ä¸¤å¤©é‡åˆ°ä¸€ä¸ªå¤§å‘ï¼Œå®¢æˆ·è¦åšoffice æ–‡æ¡£åœ¨çº¿é¢„è§ˆåŠŸèƒ½ï¼Œäºæ˜¯ä¹å°±è¦æŠŠofficeæ–‡æ¡£è½¬æ¢æˆpdfäº¤ç»™å‰ç«¯æ˜¾ç¤ºã€‚ åœ¨æŸåº¦æ‰¾äº†ä¸€åœˆéƒ½è¯´openOffice+jodconverter å¯ä»¥æå®šè¿™ä¸ªäº‹æƒ…ã€‚ä»£ç å€’æ˜¯å¾ˆå¥½æ‰¾ï¼Œä¸è¿‡ç‰ˆæœ¬å¾ˆå¤šï¼Œå„ç±»jaråŒ…ä¹Ÿå¾ˆå¤šï¼Œä½†å°è¯•ä¸‹æ¥å‘ç°ï¼Œè½¬åŒ–æ•ˆæœå¾ˆä¸€èˆ¬ï¼Œå¤æ‚çš„excelä¹Ÿæ— æ³•æˆåŠŸã€‚æœ‰åŒäº‹å»ºè®®æ”¾åˆ°æœåŠ¡å™¨ä¸Šæ•ˆæœå¯èƒ½å¥½äº›ï¼Œäºæ˜¯å°±å¼€å§‹æŠ˜è…¾åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…OpenOfficeè¿™ä¸ªäº‹æƒ…ã€‚ç½‘ä¸Šå„ç§æ‰¾å¤§ç¥çš„åšæ–‡ï¼Œå‘ç°å®‰è£…èµ·æ¥ä¸æ˜¯å¾ˆé¡ºç•…ï¼Œå°±å†™äº†è¿™ç¯‡éšç¬”ï¼Œè®°å½•ä¸€ä¸‹ï¼Œé‡åˆ°çš„é—®é¢˜ï¼Œæ–¹ä¾¿è‡ªå·±ä»¥åæŸ¥çœ‹ã€‚ â€‹ openOfficeè½¬è½¬wordæ–‡æ¡£æ•ˆæœä¸é”™ï¼Œè½¬Excelçš„è¯å°±çœŸçš„æ•ˆæœä¸è¡Œï¼Œç®€å•çš„Excelèƒ½å¤„ç†å¤„ç†ï¼Œå¤æ‚çš„å°±å¾ˆæ…¢å¾ˆæ…¢ï¼Œè€Œä¸”æ•ˆæœæå·®ã€‚å†è¯´ï¼Œå®é™…ä¸Šå¾®è½¯è‡ªå·±çš„officeè½¯ä»¶è½¬pdfçš„æ•ˆæœä¹Ÿå¾ˆå·®ã€‚ æ“ä½œæ­¥éª¤ http://www.openoffice.org/zh-cn/download/ å»å®˜ç½‘é“¾æ¥ä¸‹è½½linuxç‰ˆæœ¬çš„openOffice ä»¥4.1.6 ç‰ˆæœ¬ä¸ºä¾‹ã€‚ å°†å‹ç¼©åŒ…ä¸Šä¼ è‡³æœåŠ¡å™¨ä¸Šï¼Œå¹¶è¿›è¡Œè§£å‹å®‰è£…ã€‚ 12345tar -zxvf å¯¹åº”çš„å‹ç¼©åŒ…åå­—cd è¿›å…¥è§£å‹åçš„ /zh-cn/RPMSyum localinstall *.rpmcd desktop-integrationrpm -ivh openoffice4.1.6-redhat-menus-4.1.6-9789.noarch.rpm é»˜è®¤ä¼šå®‰è£…åœ¨/optç›®å½•ä¸‹ã€‚ å¯åŠ¨æœåŠ¡ 123/opt/openoffice4/program/soffice -headless -accept=\"socket,host=127.0.0.1,port=8100;urp;\" -nofirststartwizard ä¸´æ—¶å¯åŠ¨nohup /opt/openoffice4/program/soffice -headless -accept=\"socket,host=127.0.0.1,port=8100;urp;\" -nofirststartwizard &amp; åå°å¯åŠ¨ ç«¯å£å·æ ¹æ®è‡ªå·±é¡¹ç›®å®é™…æ¥ç¡®å®šã€‚ åå°å¯åŠ¨ä¼šä¸€ç›´å ç”¨å†…å­˜ï¼Œæ®å„è·¯å¤§ç¥è¯´ å¤§æ¦‚100Mï¼Œæˆ‘è‡ªå·±æ²¡æµ‹è¿‡å…·ä½“å€¼ä¸æ¸…æ¥šã€‚ æœ‰çš„ç¨‹åºæ˜¯éœ€è¦é¢„å…ˆå¯åŠ¨openOffice æœåŠ¡çš„ï¼Œæœ‰çš„åˆ™åœ¨ä»£ç é‡Œè‡ªå·±å¯åŠ¨æœåŠ¡ã€‚ .æŸ¥çœ‹è¿›ç¨‹ 1netstat -lnp |grep ç«¯å£å· å¤§æ¦‚æ˜¾ç¤ºæˆè¿™æ ·å°±ç®—å¯åŠ¨å®Œäº†ã€‚ 1tcp 0 0 127.0.0.1:8100 0.0.0.0:* LISTEN 14362/soffice.bin é—®é¢˜è£…å®Œopenofficeåå¯åŠ¨æœåŠ¡å¯èƒ½ä¼šæŠ¥é”™ï¼šno suitable windowing system found, exiting ä»å­—é¢ä¸Šçš„æ„æ€å°±æ˜¯ç¼ºå°‘ä¸€ä¸ªçª—å£åŒ–çš„ç³»ç»Ÿã€‚æ‰€ä»¥å°±å®‰è£…ä¸€ä¸ªã€‚ 1yum groupinstall \"X Window System\"","categories":[{"name":"Linux","slug":"Linux","permalink":"/categories/Linux/"}],"tags":[{"name":"openOffice","slug":"openOffice","permalink":"/tags/openOffice/"},{"name":"å®‰è£…","slug":"å®‰è£…","permalink":"/tags/å®‰è£…/"}]},{"title":"å°†Word(.doc)é‡Œçš„å›¾ç‰‡æ›¿æ¢æˆæ–‡æœ¬","slug":"å°†Word-doc-é‡Œçš„å›¾ç‰‡æ›¿æ¢æˆæ–‡æœ¬","date":"2018-12-20T03:23:24.000Z","updated":"2018-12-29T03:04:42.141Z","comments":true,"path":"2018/12/20/å°†Word-doc-é‡Œçš„å›¾ç‰‡æ›¿æ¢æˆæ–‡æœ¬/","link":"","permalink":"/2018/12/20/å°†Word-doc-é‡Œçš„å›¾ç‰‡æ›¿æ¢æˆæ–‡æœ¬/","excerpt":"","text":"ç›®æ ‡ï¼šå°†wordé‡Œçš„å›¾ç‰‡æ›¿æ¢æˆæ–‡æœ¬æµç¨‹ã€æ€æƒ³ï¼š è¯»å–å‡ºWordä¸­çš„å›¾ç‰‡ - å­˜å‚¨è¯»å–åˆ°çš„å›¾ç‰‡ï¼ˆæä¾›å›¾ç‰‡è¯†åˆ«åŸï¼‰ - åˆ é™¤Wordä¸­çš„è¯¥å›¾ç‰‡ - åœ¨Wordä¸­è¯¥å›¾ç‰‡ä½ç½®æ’å…¥æ›¿æ¢æ–‡å­— - åˆ é™¤å­˜å‚¨çš„å›¾ç‰‡ Mavenä¾èµ–1234567891011121314151617181920212223242526&lt;!-- poi-å®ç°wordæ–‡ä»¶çš„è¯»å–å’Œä¿®æ”¹ç­‰æ“ä½œ --&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.poi&lt;/groupId&gt; &lt;artifactId&gt;poi&lt;/artifactId&gt; &lt;version&gt;4.0.0&lt;/version&gt;&lt;/dependency&gt;&lt;!-- é’ˆå¯¹äº2007ç‰ˆï¼ˆ.docxï¼‰ --&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.poi&lt;/groupId&gt; &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt; &lt;version&gt;4.0.0&lt;/version&gt;&lt;/dependency&gt;&lt;!-- é’ˆå¯¹äº2003ç‰ˆï¼ˆ.docï¼‰ --&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.poi&lt;/groupId&gt; &lt;artifactId&gt;poi-scratchpad&lt;/artifactId&gt; &lt;version&gt;4.0.0&lt;/version&gt;&lt;/dependency&gt;&lt;!-- poi-end --&gt;&lt;!-- Jsoup-ç”¨ä»¥è§£æHTML --&gt;&lt;dependency&gt; &lt;groupId&gt;org.jsoup&lt;/groupId&gt; &lt;artifactId&gt;jsoup&lt;/artifactId&gt; &lt;version&gt;1.11.3&lt;/version&gt;&lt;/dependency&gt;&lt;!-- Jsoup-end --&gt; ä»£ç å®ç°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195public static void main(String argv[]) &#123; try &#123; //æºæ–‡ä»¶å…¨è·¯å¾„ String oldFileName = \"D:/Test/ml/test.doc\"; //ç›®æ ‡æ–‡ä»¶å…¨è·¯å¾„ String newFileName = \"D:/Test/ml/html_to_word.doc\"; //æ„é€ HTMLç”Ÿæˆå…¨è·¯å¾„ String temporary = new File(oldFileName).getParent()+File.separator+\"temporary.html\"; //è¯»å–DOCç”Ÿæˆè·å¾—htmlå†…å®¹å’Œå›¾ç‰‡é›† Map&lt;String,Object&gt; map = convert2Html(oldFileName); //å–å¾—å›¾ç‰‡é›† List&lt;String&gt; listPics = (List&lt;String&gt;) map.get(\"listPics\"); //å–å¾—ç”Ÿæˆçš„htmlå†…å®¹ String htmlContent = (String) map.get(\"htmlContent\"); for (String pic : listPics)&#123; //æœ‰åç¼€åçš„å›¾ç‰‡æ‰è¿›è¡Œè¯†åˆ« if (pic.lastIndexOf(\".\") != -1)&#123; //ä»¥ä¸‹ä¸¤è¡Œä»£ç æ˜¯æ„é€ HTMLä¸­çš„å›¾ç‰‡æ ‡è®°ï¼ˆå³ï¼š&lt;img ...&gt;ï¼‰ String temp = htmlContent.substring( htmlContent.indexOf(\"&lt;img src=\\\"\"+pic.replace(\"\\\\\",\"/\")+\"\\\"\")); temp = temp.substring(0,temp.indexOf(\"&gt;\")+1); //æ–‡å­—æ›¿æ¢å›¾ç‰‡ htmlContent = htmlContent.replaceAll(temp,\"&lt;span&gt;&#123;&#123;title&#125;&#125;&lt;/span&gt;\"); &#125;else &#123;/*å› ä¸ºè¯†åˆ«å‡ºæ¥çš„éå›¾ç‰‡æ ¼å¼ï¼ˆå³ï¼šæ— åç¼€åï¼‰çš„å›¾ç‰‡å†æ”¾å›docæ—¶ä¼šå‡ºç° å›¾ç‰‡å¼‚å¸¸æ˜¾ç¤ºï¼Œæ‰€ä»¥ä»¥\"&lt;span&gt;&lt;/span&gt;\"è¿›è¡Œå ä½*/ //ä»¥ä¸‹ä¸¤è¡Œä»£ç æ˜¯æ„é€ HTMLä¸­çš„å›¾ç‰‡æ ‡è®°ï¼ˆå³ï¼š&lt;img ...&gt;ï¼‰ String temp = htmlContent.substring( htmlContent.indexOf(\"&lt;img src=\\\"\"+pic.replace(\"\\\\\",\"/\")+\"\\\"\")); temp = temp.substring(0,temp.indexOf(\"&gt;\")+1); //å ä½ htmlContent = htmlContent.replaceAll(temp,\"&lt;span&gt;&lt;/span&gt;\"); &#125; &#125; //è¾“å‡ºHTMLæ–‡ä»¶ writeFile(htmlContent, temporary); //HTMLè½¬Doc html2Doc(temporary,newFileName); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125;&#125;/** * è¾“å‡ºHTMLæ–‡ä»¶ * @param content ä»docè¯»å–ç”Ÿæˆçš„htmlæ–‡æœ¬ * @param path ç›®æ ‡æ–‡ä»¶å…¨è·¯å¾„ */public static void writeFile(String content, String path) &#123; FileOutputStream fos = null; BufferedWriter bw = null; org.jsoup.nodes.Document doc = Jsoup.parse(content); String styleOld=doc.getElementsByTag(\"style\").html(); //ç»Ÿä¸€å­—ä½“æ ¼å¼ä¸ºå®‹ä½“ styleOld=styleOld.replaceAll(\"font-family:.+(?=;\\\\b)\", \"font-family:SimSun\"); doc.getElementsByTag(\"head\").empty(); doc.getElementsByTag(\"head\") .append(\"&lt;meta http-equiv=\\\"Content-Type\\\" content=\\\"text/html; charset=UTF-8\\\"&gt;&lt;/meta&gt;\"); doc.getElementsByTag(\"head\") .append(\" &lt;style type=\\\"text/css\\\"&gt;&lt;/style&gt;\"); doc.getElementsByTag(\"style\") .append(styleOld); /*æ­£åˆ™è¡¨è¾¾å¼æŸ¥è¯¢å­—ä½“å†…å®¹ï¼šfont-family:.+(?=;\\b)*/ content=doc.html(); content=content .replace(\"&lt;meta http-equiv=\\\"Content-Type\\\" content=\\\"text/html; charset=UTF-8\\\"&gt;\", \"&lt;meta http-equiv=\\\"Content-Type\\\" content=\\\"text/html; charset=UTF-8\\\"&gt;&lt;/meta&gt;\"); try &#123; File file = new File(path); fos = new FileOutputStream(file); bw = new BufferedWriter(new OutputStreamWriter(fos,\"UTF-8\")); bw.write(content); &#125; catch (FileNotFoundException fnfe) &#123; fnfe.printStackTrace(); &#125; catch (IOException ioe) &#123; ioe.printStackTrace(); &#125; finally &#123; try &#123; if (bw != null) bw.close(); if (fos != null) fos.close(); &#125; catch (IOException ie) &#123; &#125; &#125;&#125;/** * è¯»å–DOCç”Ÿæˆè·å¾—htmlå†…å®¹å’Œå›¾ç‰‡é›† * @param fileName æºæ–‡ä»¶å…¨è·¯å¾„ * @return è¿”å›çš„mapä¸­åŒ…å«htmlå†…å®¹å’Œå›¾ç‰‡é›† * @throws Exception */public static Map&lt;String,Object&gt; convert2Html(String fileName) throws Exception &#123; //å­˜æ”¾htmlå†…å®¹å’Œå›¾ç‰‡é›† Map&lt;String,Object&gt; map = new HashMap&lt;&gt;(); //ä¿å­˜å›¾ç‰‡é›† List&lt;String&gt; listPics = new ArrayList&lt;&gt;(); //æ„é€ æå–å‡ºæ¥çš„å›¾ç‰‡ä¿å­˜è·¯å¾„ä»¥åŠHTMLä¸­&lt;img&gt;çš„å›¾ç‰‡æºè·¯å¾„ String imgPath = new File(fileName).getParent()+ File.separator+\"img\"+File.separator; File file = new File(imgPath); //ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»º if (!file.exists())&#123; file.mkdirs(); &#125; HWPFDocument wordDocument = new HWPFDocument(new FileInputStream(fileName)); //WordToHtmlUtils.loadDoc(new FileInputStream(inputFile)); WordToHtmlConverter wordToHtmlConverter = new WordToHtmlConverter( DocumentBuilderFactory.newInstance().newDocumentBuilder() .newDocument()); wordToHtmlConverter.setPicturesManager( new PicturesManager() &#123; public String savePicture(byte[] content, PictureType pictureType, String suggestedName, float widthInches, float heightInches ) &#123; return imgPath.replace(\"\\\\\",\"/\") + suggestedName; &#125; &#125; ); wordToHtmlConverter.processDocument(wordDocument); //ä¿å­˜å›¾ç‰‡ List pics=wordDocument.getPicturesTable().getAllPictures(); if(pics!=null)&#123; for(int i=0;i&lt;pics.size();i++)&#123; Picture pic = (Picture)pics.get(i); try &#123; String picAbsolutePath = imgPath + pic.suggestFullFileName(); //å°†å›¾ç‰‡å…¨è·¯å¾„å­˜å…¥listPics listPics.add(picAbsolutePath); pic.writeImageContent(new FileOutputStream(picAbsolutePath)); &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; &#125; &#125; Document htmlDocument = wordToHtmlConverter.getDocument(); ByteArrayOutputStream out = new ByteArrayOutputStream(); DOMSource domSource = new DOMSource(htmlDocument); StreamResult streamResult = new StreamResult(out); TransformerFactory tf = TransformerFactory.newInstance(); Transformer serializer = tf.newTransformer(); serializer.setOutputProperty(OutputKeys.ENCODING, \"UTF-8\"); serializer.setOutputProperty(OutputKeys.INDENT, \"yes\"); serializer.setOutputProperty(OutputKeys.METHOD, \"HTML\"); serializer.transform(domSource, streamResult); out.close(); String htmlContent=new String(out.toByteArray()); //æ›¿æ¢UEditoræ— æ³•è¯†åˆ«çš„è½¬ä¹‰å­—ç¬¦ htmlContent=htmlContent.replaceAll(\"&amp;ldquo;\",\"\\\"\").replaceAll(\"&amp;rdquo;\",\"\\\"\") .replaceAll(\"&amp;mdash;\",\"-\"); map.put(\"htmlContent\",htmlContent); map.put(\"listPics\",listPics); return map;&#125;/** * htmlè½¬doc * @param source * @param target * @throws Exception */public static void html2Doc(String source , String target) throws Exception &#123; //åˆ›å»º POIFSFileSystem å¯¹è±¡ POIFSFileSystem poifs = new POIFSFileSystem(); //è·å–DirectoryEntry DirectoryEntry directory = poifs.getRoot(); //åˆ›å»ºè¾“å‡ºæµ OutputStream out = new FileOutputStream(target); try &#123; //åˆ›å»ºæ–‡æ¡£,1.æ ¼å¼\"WordDocument\",2.HTMLæ–‡ä»¶è¾“å…¥æµ directory.createDocument(\"WordDocument\", new FileInputStream(source)); //å†™å…¥ poifs.writeFilesystem(out); //é‡Šæ”¾èµ„æº out.close(); System.out.println(\"success\"); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125;&#125;","categories":[{"name":"Java","slug":"Java","permalink":"/categories/Java/"}],"tags":[{"name":"POI","slug":"POI","permalink":"/tags/POI/"},{"name":"Word","slug":"Word","permalink":"/tags/Word/"},{"name":"Jsoup","slug":"Jsoup","permalink":"/tags/Jsoup/"}]},{"title":"OpenOffice-å®ç°æ–‡ä»¶æ ¼å¼ä¹‹é—´çš„è½¬æ¢.md","slug":"OpenOffice-å®ç°æ–‡ä»¶æ ¼å¼ä¹‹é—´çš„è½¬æ¢","date":"2018-12-18T11:10:47.000Z","updated":"2018-12-18T12:50:46.786Z","comments":true,"path":"2018/12/18/OpenOffice-å®ç°æ–‡ä»¶æ ¼å¼ä¹‹é—´çš„è½¬æ¢/","link":"","permalink":"/2018/12/18/OpenOffice-å®ç°æ–‡ä»¶æ ¼å¼ä¹‹é—´çš„è½¬æ¢/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"iTextPDF-å®ç°å‘PDFè¿½åŠ å†…å®¹","slug":"iTextPDF-å®ç°å‘PDFè¿½åŠ å†…å®¹","date":"2018-12-18T11:10:03.000Z","updated":"2018-12-18T12:49:51.129Z","comments":true,"path":"2018/12/18/iTextPDF-å®ç°å‘PDFè¿½åŠ å†…å®¹/","link":"","permalink":"/2018/12/18/iTextPDF-å®ç°å‘PDFè¿½åŠ å†…å®¹/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"å°†Word(.docx)-é‡Œçš„å›¾ç‰‡æ›¿æ¢æˆæ–‡æœ¬","slug":"å°†Word-docx-é‡Œçš„å›¾ç‰‡æ›¿æ¢æˆæ–‡æœ¬","date":"2018-12-18T11:08:31.000Z","updated":"2018-12-25T03:01:54.817Z","comments":true,"path":"2018/12/18/å°†Word-docx-é‡Œçš„å›¾ç‰‡æ›¿æ¢æˆæ–‡æœ¬/","link":"","permalink":"/2018/12/18/å°†Word-docx-é‡Œçš„å›¾ç‰‡æ›¿æ¢æˆæ–‡æœ¬/","excerpt":"","text":"ç›®æ ‡ï¼šå°†wordé‡Œçš„å›¾ç‰‡æ›¿æ¢æˆæ–‡æœ¬æµç¨‹ã€æ€æƒ³ï¼š è¯»å–å‡ºWordä¸­çš„å›¾ç‰‡ - å­˜å‚¨è¯»å–åˆ°çš„å›¾ç‰‡ï¼ˆæä¾›å›¾ç‰‡è¯†åˆ«åŸï¼‰ - åˆ é™¤Wordä¸­çš„è¯¥å›¾ç‰‡ - åœ¨Wordä¸­è¯¥å›¾ç‰‡ä½ç½®æ’å…¥æ›¿æ¢æ–‡å­— - åˆ é™¤å­˜å‚¨çš„å›¾ç‰‡ Mavenä¾èµ–12345678910111213141516171819&lt;!-- poi-å®ç°wordæ–‡ä»¶çš„è¯»å–å’Œä¿®æ”¹ç­‰æ“ä½œ --&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.poi&lt;/groupId&gt; &lt;artifactId&gt;poi&lt;/artifactId&gt; &lt;version&gt;4.0.0&lt;/version&gt;&lt;/dependency&gt;&lt;!-- é’ˆå¯¹äº2007ç‰ˆï¼ˆ.docxï¼‰ --&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.poi&lt;/groupId&gt; &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt; &lt;version&gt;4.0.0&lt;/version&gt;&lt;/dependency&gt;&lt;!-- é’ˆå¯¹äº2003ç‰ˆï¼ˆ.docï¼‰ --&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.poi&lt;/groupId&gt; &lt;artifactId&gt;poi-scratchpad&lt;/artifactId&gt; &lt;version&gt;4.0.0&lt;/version&gt;&lt;/dependency&gt;&lt;!-- poi-end --&gt; ä»£ç å®ç°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109public static void main(String[] args) throws Exception &#123; textReplacePhoto(\"D:\\\\Test\\\\åŸæŠ¥æ ¼å¼æ ·ä¾‹3.docx\", \"D:\\\\Test\\\\åŸæŠ¥æ ¼å¼æ ·ä¾‹3-1.docx\",\"D:/Test/img\");&#125;/** * å°†wordé‡Œçš„å›¾ç‰‡å…¨éƒ¨æ›¿æ¢æˆæ–‡æœ¬ * @param oldFileName ä¼ å…¥åŸæ–‡ä»¶çš„å…¨è·¯å¾„ï¼ˆå«æ–‡ä»¶åï¼‰ * @param newFileName ä¿å­˜ä¿®æ”¹åæ–‡ä»¶çš„å…¨è·¯å¾„ï¼ˆå«æ–‡ä»¶åï¼‰ * @param picturePath è¯»å–å‡ºæ¥çš„å›¾ç‰‡ä¿å­˜è·¯å¾„ * @throws Exception */public static void textReplacePhoto(String oldFileName, String newFileName, String picturePath) throws Exception &#123; File newFile = new File(newFileName.replace(new File(newFileName).getName(),\"\")); //ä¿å­˜è·¯å¾„ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»º if (!newFile.exists())&#123; newFile.mkdirs(); &#125; if (oldFileName.endsWith(\".docx\"))&#123; //.docxæ–‡ä»¶çš„å¤„ç†æ–¹æ³• //ä¸ºäº†ç¡®å®šå›¾ç‰‡é›†ä¸­çš„æŸä¸€å¼ å›¾ç‰‡ int imgNum=0; //åˆ›å»ºè¾“å…¥æµ InputStream oldIs = new FileInputStream(oldFileName); //åˆ›å»ºè¾“å‡ºæµ OutputStream newOs = new FileOutputStream(newFileName); //åˆ›å»ºä¸€ä¸ªXWPFDocument XWPFDocument docx = new XWPFDocument(oldIs); //è·å–åˆ°è¯¥æ–‡æ¡£çš„æ‰€æœ‰æ®µè½é›† List&lt;XWPFParagraph&gt; paras = docx.getParagraphs(); //è·å–åˆ°è¯¥æ–‡æ¡£çš„æ‰€æœ‰å›¾ç‰‡é›† List&lt;XWPFPictureData&gt; pictures = docx.getAllPictures(); for (XWPFParagraph para:paras)&#123; //æ®µè½ä¸­æ‰€æœ‰XWPFRun List&lt;XWPFRun&gt; runList = para.getRuns(); for (int i=0;i&lt;runList.size();i++) &#123; XWPFRun run=runList.get(i); //åˆ¤æ–­è¯¥æ®µè½æ˜¯å¦æ˜¯å›¾ç‰‡ if (!run.getEmbeddedPictures().isEmpty())&#123; //å­˜å‚¨è¯»å–åˆ°çš„å›¾ç‰‡,å¹¶è·å–å›¾ç‰‡å…¨è·¯å¾„ String pictureName=savePictureDocx(pictures,picturePath,imgNum++); //å®é™…æœ‰å›¾ç‰‡æ‰è¿›è¡Œä»¥ä¸‹æ“ä½œ if (pictureName!=null)&#123; //åˆ é™¤å›¾ç‰‡ para.removeRun(i); //æ’å…¥æ–‡å­— para.insertNewRun(i).setText(\"&#123;&#123;title&#125;&#125;\"); //åˆ é™¤å›¾ç‰‡ deletePicture(pictureName); &#125; &#125; &#125; &#125; docx.write(newOs); docx.close(); oldIs.close(); newOs.flush(); newOs.close(); &#125;&#125;/** * å­˜å‚¨è¯»å–åˆ°çš„å›¾ç‰‡ - docx * @param pictures å›¾ç‰‡é›† * @param picturePath å›¾ç‰‡ä¿å­˜è·¯å¾„ * @param imgNum ç¡®å®šå›¾ç‰‡é›†ä¸­çš„æŸä¸€å¼ å›¾ç‰‡ * @return å›¾ç‰‡å…¨è·¯å¾„ * @throws IOException */public static String savePictureDocx(List&lt;XWPFPictureData&gt; pictures, String picturePath,int imgNum) throws IOException &#123; File pictureFile = new File(picturePath); //ä¿å­˜è·¯å¾„ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»º if (!pictureFile.exists())&#123; pictureFile.mkdirs(); &#125; List&lt;XWPFPictureData&gt; pictures = para.getDocument().getAllPictures(); if (pictures.size()!=0)&#123; XWPFPictureData picture = pictures.get(imgNum); String rawName = picture.getFileName(); String fileExt = rawName.substring(rawName.lastIndexOf(\".\")); String newName = System.currentTimeMillis() + UUID.randomUUID().toString() + fileExt; String pictureName = picturePath + File.separator + newName; FileOutputStream fos = new FileOutputStream(pictureName); fos.write(picture.getData()); fos.flush(); fos.close(); return pictureName; &#125; return null;&#125;/** * åˆ é™¤ä¸´æ—¶å­˜å‚¨çš„å›¾ç‰‡ * @param pictureName å›¾ç‰‡å…¨è·¯å¾„ï¼ˆå«æ–‡ä»¶åï¼‰ * @return */public static boolean deletePicture(String pictureName) &#123; File pictureFile = new File(pictureName); // ç›®å½•æ­¤æ—¶ä¸ºç©ºï¼Œå¯ä»¥åˆ é™¤ return pictureFile.delete();&#125;","categories":[{"name":"Java","slug":"Java","permalink":"/categories/Java/"}],"tags":[{"name":"POI","slug":"POI","permalink":"/tags/POI/"},{"name":"Word","slug":"Word","permalink":"/tags/Word/"}]},{"title":"ç”¨VNCæ­å»ºUbuntu VNCå¯è§†åŒ–ç•Œé¢","slug":"ç”¨VNCæ­å»ºUbuntu VNCå¯è§†åŒ–ç•Œé¢","date":"2018-12-10T11:48:46.000Z","updated":"2019-01-10T08:08:55.307Z","comments":true,"path":"2018/12/10/ç”¨VNCæ­å»ºUbuntu VNCå¯è§†åŒ–ç•Œé¢/","link":"","permalink":"/2018/12/10/ç”¨VNCæ­å»ºUbuntu VNCå¯è§†åŒ–ç•Œé¢/","excerpt":"","text":"å®‰è£…é…ç½®è½¯ä»¶ VNCçš„å®‰è£…ä¸é…ç½®å®‰è£…ä¹‹å‰å…ˆè¾“å…¥ï¼ˆè·å–æœ€æ–°å¥—ä»¶çš„ä¿¡æ¯ï¼‰ 1apt-get update è¾“å…¥ä»¥ä¸‹å‘½ä»¤å®‰è£…VNCï¼Œå®‰è£…è¿‡ç¨‹ä¸­éœ€è¦è¾“å…¥Yæ¥ç¡®è®¤ 1apt-get install vnc4server å¯åŠ¨VNCï¼ˆç¬¬ä¸€æ¬¡å¯åŠ¨éœ€è¦è®¾ç½®å¯†ç ï¼‰ 1vncserver å¼€æœºå¯åŠ¨è¯·å‚è€ƒï¼šubuntu-18-04-1-å¼€æœºå¯åŠ¨è„šæœ¬ è®¾ç½®vncservgnome æ¡Œé¢ç¯å¢ƒå®‰è£…ä¸é…ç½®ï¼ˆå¯ç›´æ¥è·³è‡³ç¬¬3æ­¥ï¼‰å®‰è£…xï¼windowsçš„åŸºç¡€ 1sudo apt-get install x-window-system-core å®‰è£…ç™»å½•ç®¡ç†å™¨ 1sudo apt-get install gdm å®‰è£…Ubuntuçš„æ¡Œé¢ 1sudo apt-get install ubuntu-desktop å®‰è£…gnomeé…å¥—è½¯ä»¶ 1sudo apt-get install gnome-panel gnome-settings-daemon metacity nautilus gnome-terminal ä¿®æ”¹VNCé…ç½®æ–‡ä»¶ 1sudo vi ~/.vnc/xstartup ä¿®æ”¹ä¸ºï¼š 1234567891011#!/bin/sh# Uncomment the following two lines for normal desktop:export XKL_XMODMAP_DISABLE=1 unset SESSION_MANAGER# exec /etc/X11/xinit/xinitrcunset DBUS_SESSION_BUS_ADDRESSgnome-panel &amp;gnmoe-settings-daemon &amp;metacity &amp;nautilus &amp;gnome-terminal &amp; æ€æ‰åŸæ¡Œé¢è¿›ç¨‹ï¼Œè¾“å…¥å‘½ä»¤ï¼ˆå…¶ä¸­çš„:1æ˜¯æ¡Œé¢å·ï¼‰ï¼š 1vncserver -kill :1 è¾“å…¥ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆæ–°çš„ä¼šè¯ï¼š 1vncserver :1 ubuntuå¸è½½gnomeæ¡Œé¢ï¼ˆå¯ç›´æ¥è·³è‡³ç¬¬3æ­¥ï¼‰ ä¹‹å‰å®‰è£…å¥½äº†ubuntu18.04ï¼Œæœ¬æ¥æƒ³è£…ä¸ªgnome shellæ¥ç¾åŒ–ä¸€ä¸‹æ¡Œé¢ï¼Œç»“æœå‡ºç°äº†å¼€æœºé»‘å±ï¼ˆç°å±ï¼‰çš„ç°è±¡ï¼Œç»ç½‘ä¸ŠæŸ¥è¯¢å‘ç°æ˜¯æ˜¾å¡é©±åŠ¨åœ¨gnome3çš„ç¯å¢ƒä¸‹äº§ç”Ÿäº†ä¸å…¼å®¹ï¼Œå…·ä½“è§£å†³æ–¹æ³•æˆ‘è¿˜æ²¡æ‰¾åˆ°ï¼Œæƒ…æ€¥ä¹‹ä¸‹åªèƒ½å…ˆå¸è½½æ‰gnomeæ¡Œé¢ç¯å¢ƒã€‚ å¸è½½æ‰gnome-shellä¸»ç¨‹åº1sudo apt-get remove gnome-shell å¸è½½æ‰gnome1sudo apt-get remove gnome å¸è½½ä¸éœ€è¦çš„ä¾èµ–å…³ç³»1sudo apt-get autoremove å½»åº•å¸è½½åˆ é™¤gnomeçš„ç›¸å…³é…ç½®æ–‡ä»¶1sudo apt-get purge gnome æ¸…ç†å®‰è£…gnomeæ—¶å€™ç•™ä¸‹çš„ç¼“å­˜ç¨‹åºè½¯ä»¶åŒ…12sudo apt-get autocleansudo apt-get clean ubuntuè¿è¡ŒVNC Serveræ— æ¡Œé¢æ—¶çš„è§£å†³æ–¹æ¡ˆé…ç½®vnc serverå®åœ¨æ˜¯ä¸€ä¸ªç‰¹åˆ«è¯¡å¼‚çš„äº‹ï¼Œæˆ‘åœ¨ä¸åŒçš„ubuntuæœºå™¨ä¸Šé…ç½®æœåŠ¡æ—¶ï¼Œæ€»æ˜¯é‡åˆ°åƒå¥‡ç™¾æ€ªçš„é—®é¢˜ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹æ¯”è¾ƒé¡ºåˆ©ï¼Œå°†~/.vnc/xstartupæœ€åä¸€å¥x-window-manager&amp;æ›¿æ¢ä¸ºgnome-session&amp;å°±èƒ½é¡ºåˆ©åœ°å‡ºç°æ¡Œé¢ï¼Œè€Œæœ‰äº›åˆ™ä¸è¡Œï¼Œéœ€è¦æ”¹ä¸ºgnome-session --session=ubuntu-2d&amp; é—®é¢˜è€Œä»Šå¤©é‡åˆ°çš„ubuntu 18.04ï¼Œåˆ™æ­»æ´»ä¸è¡Œï¼Œç”¨realvnc viewerè¿æ¥ä¹‹åï¼Œåªæœ‰ç°ç°çš„ä¸€ä¸ªèƒŒæ™¯ï¼Œæ²¡æœ‰æ¡Œé¢ï¼Œæ²¡æœ‰terminalã€‚ æŸ¥é˜…äº†å¾ˆå¤šåšæ–‡ï¼Œæœ‰è¯´éœ€è¦å®‰è£…gnome-session-fallbackçš„ï¼Œæœ‰è¯´éœ€è¦å®‰è£…gdmçš„ï¼Œä¹Ÿæœ‰ç”¨kdeçš„ï¼Œé™¤äº†kdeæˆ‘æ²¡æœ‰å°è¯•ï¼Œå¦å¤–ä¸¤ç§éªŒè¯æ— æ•ˆï¼Œä¾ç„¶åªæœ‰ä¸€ä¸ªç°è‰²èƒŒæ™¯ã€‚ æœ€åç”¨xfce4æ¡Œé¢è§£å†³ï¼Œé€‰æ‹©äº›æ–¹æ¡ˆä¸€æ˜¯å› ä¸ºxfceç›¸å¯¹è¾ƒå°ï¼Œgnome-sessionæ­»æ´»ä¸è¡Œçš„æƒ…å†µä¸‹ï¼Œå†å°†ä¸€ä¸ªkdeæœªå…å¤ªè¿‡å…´å¸ˆåŠ¨ä¼—ï¼Œxfceæˆ‘ä½¿ç”¨è¿‡ä¸€æ®µæ—¶é—´ï¼Œæ˜¯ä¸€ä¸ªç›¸å½“è½»é‡çº§çš„GUIç¯å¢ƒï¼Œæ¸…çˆ½æ˜“ç”¨ï¼ŒåŠŸèƒ½ä¸€ç‚¹ä¸å«ç³Šã€‚å†³å®šä¹‹åï¼Œä¸€æ¬¡å°è¯•å³æˆåŠŸã€‚ å®‰è£…xfce1sudo apt-get install gnome-core xfce4 é…ç½®ç¼–è¾‘~/.vnc/xstartupæ–‡ä»¶ï¼š 12345678#!/bin/shunset SESSION_MANAGERunset DBUS_SESSION_BUS_ADDRESSstartxfce4 &amp;[ -x /etc/vnc/xstartup ] &amp;&amp; exec /etc/vnc/xstartup[ -r $HOME/.Xresources ] &amp;&amp; xrdb $HOME/.Xresourcesxsetroot -solid greyvncconfig -iconic &amp; è¾“å…¥ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆæ–°çš„ä¼šè¯ï¼š 1vncserver :1 æœ¬åœ°ä½¿ç”¨VNCè¿æ¥ æœ¬åœ°å®‰è£…VNCåï¼Œä½¿ç”¨ipåœ°å€:1ï¼ˆå…¶ä¸­çš„:1æ˜¯æ¡Œé¢å·ï¼‰çš„æ–¹å¼è¿æ¥ è¾“å…¥ä¹‹å‰è®¾ç½®çš„VNCå¯†ç åç‚¹å‡»è¿æ¥ é™„å½• ä¸‹è½½åœ°å€VNC Viewerå’ŒVNC Server","categories":[{"name":"Linux","slug":"Linux","permalink":"/categories/Linux/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"/tags/æŠ€å·§/"},{"name":"é…ç½®","slug":"é…ç½®","permalink":"/tags/é…ç½®/"},{"name":"Ubuntu","slug":"Ubuntu","permalink":"/tags/Ubuntu/"},{"name":"VNC","slug":"VNC","permalink":"/tags/VNC/"}]},{"title":"Linuxä¸‹å®‰è£…Java JDK8","slug":"Linuxä¸‹å®‰è£…Java-JDK8","date":"2018-12-10T11:44:56.000Z","updated":"2019-01-10T08:06:43.445Z","comments":true,"path":"2018/12/10/Linuxä¸‹å®‰è£…Java-JDK8/","link":"","permalink":"/2018/12/10/Linuxä¸‹å®‰è£…Java-JDK8/","excerpt":"","text":"æ‰‹åŠ¨ä¸‹è½½å‹ç¼©åŒ…å®‰è£…oracle Java JDK å‰å¾€oracle Javaå®˜ç½‘ä¸‹è½½JDK è§£å‹ç¼©åˆ°æŒ‡å®šç›®å½•ï¼ˆä»¥jdk-8u144-linux-x64.tar.gzä¸ºä¾‹ï¼‰ åˆ›å»ºç›®å½•: 1sudo mkdir /usr/lib/jvm è§£å‹ç¼©åˆ°è¯¥ç›®å½•: 1sudo tar -zxvf jdk-7u60-linux-x64.gz -C /usr/lib/jvm ä¿®æ”¹ç¯å¢ƒå˜é‡: 1sudo vi ~/.bashrc åœ¨æ–‡ä»¶æœ«å°¾è¿½åŠ ä¸‹é¢å†…å®¹ï¼š 12345#set oracle jdk environmentexport JAVA_HOME=/usr/lib/jvm/jdk1.8.0_144 ## è¿™é‡Œè¦æ³¨æ„ç›®å½•è¦æ¢æˆè‡ªå·±è§£å‹çš„jdk ç›®å½•export JRE_HOME=$&#123;JAVA_HOME&#125;/jre export CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/lib export PATH=$&#123;JAVA_HOME&#125;/bin:$PATH ä½¿ç¯å¢ƒå˜é‡é©¬ä¸Šç”Ÿæ•ˆï¼š 1source ~/.bashrc æŸ¥çœ‹javaç‰ˆæœ¬ï¼Œçœ‹çœ‹æ˜¯å¦å®‰è£…æˆåŠŸï¼š 1java -version","categories":[{"name":"Linux","slug":"Linux","permalink":"/categories/Linux/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"/tags/æŠ€å·§/"},{"name":"é…ç½®","slug":"é…ç½®","permalink":"/tags/é…ç½®/"}]},{"title":"Linuxçš„ä½¿ç”¨æŠ€å·§","slug":"Linuxçš„ä½¿ç”¨æŠ€å·§","date":"2018-12-10T11:21:02.000Z","updated":"2019-04-19T01:50:38.918Z","comments":true,"path":"2018/12/10/Linuxçš„ä½¿ç”¨æŠ€å·§/","link":"","permalink":"/2018/12/10/Linuxçš„ä½¿ç”¨æŠ€å·§/","excerpt":"","text":"ä¿®æ”¹ç”¨æˆ·åä¾‹ï¼šå°†adminæ”¹ä¸ºtestï¼ˆubuntuï¼‰ ä¿®æ”¹ /etc/passwdç”¨æˆ·ä¿¡æ¯æ–‡ä»¶1vim /etc/passwd 123#admin:x:1001:1001:admin,,,:/home/admin:/bin/bash#æŠŠç”¨æˆ·åadminæ”¹æˆrest#test:x:1001:1001:admin,,,:/home/test:/bin/bash æ³¨ï¼š 12admin:x:1001:1001:admin,,,:/home/admin:/bin/bashä¸­çš„admin,,,ä¸å¯ä¿®æ”¹ï¼Œè‹¥ä¿®æ”¹åé‡å¯ï¼Œä½ å°†ä¼šå› ä¸ºå¯†ç é”™è¯¯è€Œä¸èƒ½æˆåŠŸç™»å…¥ç³»ç»Ÿï¼ˆåªå¾—å»æœºæˆ¿é‡æ–°æ³¨å†Œç”¨æˆ·äº†ï¼‰ ä¿®æ”¹ /etc/shadowç”¨æˆ·å¯†ç æ–‡ä»¶1vim /etc/shadow 123#admin:Dnakfw28zf38w:8764:0:168:7:::#ç”±äºå¯†ç åŠ å¯†æ–¹å¼å­˜æ”¾ï¼Œåªä¿®æ”¹ç”¨æˆ·åå³å¯ï¼ˆå¯†ç ä¸å˜ï¼‰#test:Dnakfw28zf38w:8764:0:168:7::: å†ä¿®æ”¹ /etc/groupç”¨æˆ·ç»„æ–‡ä»¶1vim /etc/group 123#admin:x:1:root,bin,admin#ä¿®æ”¹adminç»„ä¸ºtestç»„#test:x:1:root,bin,test ä¿®æ”¹ç”¨æˆ·çš„å®¶ç›®å½•1mv /home/admin /home/test xx is not in the sudoers file é—®é¢˜è§£å†³é¦–å…ˆåˆ©ç”¨whereis å‘½ä»¤æŸ¥æ‰¾sudoersé…ç½®æ–‡ä»¶çš„ç›®å½•ï¼ˆé»˜è®¤ä¼šåœ¨/etc/sudoers) 1whereis sudoers ç„¶åå°±å¯ä»¥åˆ©ç”¨viç¼–è¾‘å™¨æ¥æŠŠç”¨æˆ·æ·»åŠ åˆ°sudoersä¹‹ä¸­ 1vi /etc/sudoers ç„¶åæ‰¾åˆ°root ALL=(ALL) ALL æˆ–è€… root ALL=(ALL:ALL) ALLæ‰€åœ¨çš„ä½ç½®ï¼ŒæŠŠæ‰€è¦æ·»åŠ çš„ç”¨æˆ·æ·»åŠ åˆ°æ–‡ä»¶ä¹‹ä¸­ ä¸‹é¢æ˜¯æ·»åŠ å®Œçš„ç»“æœã€‚ 1234Allow root to run any commands anywhereroot ALL=(ALL) ALLmaliang ALL=(ALL) ALLï¼ˆè¿™ä¸€è¡Œæ˜¯æ·»åŠ çš„å†…å®¹ï¼Œmaliangæ˜¯æˆ‘çš„ç”¨æˆ·åï¼‰ ä¿®æ”¹ç”¨æˆ·å¯†ç åœ¨ç»ˆç«¯è¿è¡Œ 1passwd username 123456æ”¹å˜å£ä»¤ä¸º usernameã€‚(å½“å‰)UNIX å£ä»¤ï¼š&lt;è¾“å…¥ç°åœ¨çš„å¯†ç &gt; è¾“å…¥æ–°çš„ UNIX å£ä»¤ï¼š &lt;è¾“å…¥æ–°å¯†ç &gt; é‡æ–°è¾“å…¥æ–°çš„ UNIX å£ä»¤ï¼š&lt;é‡æ–°è¾“å…¥æ–°å¯†ç &gt;passwdï¼šå·²æˆåŠŸæ›´æ–°å¯†ç  å¼€å¯rootç”¨æˆ·å’Œä½¿ç”¨rootç”¨æˆ·ç™»é™† ä»¥æ™®é€šç”¨æˆ·ç™»å½•ç³»ç»Ÿï¼Œåˆ›å»ºrootç”¨æˆ·çš„å¯†ç  1sudo passwd root ä¿®æ”¹æ–‡ä»¶sudo vi /usr/share/lightdm/lightdm.conf.d/50-ubuntu.confæ–‡ä»¶ï¼Œå¢åŠ ä¸¤è¡Œï¼š 12greeter-show-manual-login=trueallow-guest=false ä¿å­˜ ä¿®æ”¹/etc/pam.d/gdm-autologinã€/etc/pam.d/gdm-passwordæ–‡ä»¶å’Œ/root/.profileæ–‡ä»¶ï¼ˆubuntu-18.04éœ€è¦æ­¤æ­¥éª¤ï¼‰ 1vi /etc/pam.d/gdm-autologin æ³¨é‡Šæ‰ï¼šauth required pam_succeed_if.so user != root quiet_success ä¿å­˜ 1vi /etc/pam.d/gdm-password æ³¨é‡Šæ‰ï¼šauth required pam_succeed_if.so user != root quiet_success ä¿å­˜ 1vim /root/.profile å°†æ–‡ä»¶æœ«å°¾çš„mesg n || trueè¿™ä¸€è¡Œä¿®æ”¹æˆtty -s &amp;&amp; mesg n || true ä¿å­˜ é‡å¯ç³»ç»Ÿï¼Œè¾“å…¥rootç”¨æˆ·åå’Œå¯†ç ï¼Œç™»å½•ç³»ç»Ÿ è§£å†³Ubuntu18.04ä¸èƒ½ç”¨Xshellä½¿ç”¨rootç”¨æˆ·ç™»å½• ä»Šå¤©ä½¿ç”¨Xshell6è¿æ¥Ubuntu18.04æ—¶ï¼Œè¿æ¥æ™®é€šç”¨æˆ·å¯ä»¥ï¼Œä½†æ˜¯è¿æ¥rootç”¨æˆ·ä¸è¡Œï¼ˆä½†æ˜¯å®ä½“æœºæˆ–è€…è™šæ‹Ÿæœºå¯ä»¥rootç”¨æˆ·ç™»å½•ï¼‰ è§£å†³æ–¹æ¡ˆæ˜¯ï¼š åœ¨Ubuntu18.04ä¸­ ä¿®æ”¹ /etc/ssh/sshd_configè¿™ä¸ªæ–‡ä»¶ï¼š 1vim /etc/ssh/sshd_config è¿™æ˜¯æ²¡ä¿®æ”¹å‰çš„ï¼š 123456789...# Authentication:#LoginGraceTime 2m#PermitRootLogin prohibit-password#StrictModes yes#MaxAuthTries 6#MaxSessions 10... ä¿®æ”¹åçš„ï¼š 12345678910...# Authentication:LoginGraceTime 2m#PermitRootLogin prohibit-passwordPermitRootLogin yesStrictModes yes#MaxAuthTries 6#MaxSessions 10... ç„¶åå†åœ¨ç»ˆç«¯è¾“å…¥ä¸€ä¸‹å‘½ä»¤ï¼š/etc/init.d/ssh restart æ¥é‡å¯sshæœåŠ¡ é‡æ–°ä½¿ç”¨rootè¿æ¥ï¼Œå°±å¯ä»¥äº† æ‰¾å‡ºæ–‡ä»¶æ‰€åœ¨çš„ä½ç½®1whereis sudoersï¼ˆä½ è¦æ‰¾çš„æ–‡ä»¶åï¼‰ linux find å‘½ä»¤æŸ¥æ‰¾æ–‡ä»¶å’Œæ–‡ä»¶å¤¹æŸ¥æ‰¾ç›®å½•ï¼šfind /ï¼ˆæŸ¥æ‰¾ç›®å½•èŒƒå›´ï¼‰ -name &#39;æŸ¥æ‰¾å…³é”®å­—&#39; -type dæŸ¥æ‰¾æ–‡ä»¶ï¼šfind /ï¼ˆæŸ¥æ‰¾ç›®å½•èŒƒå›´ï¼‰ -name &#39;æŸ¥æ‰¾å…³é”®å­—&#39; -print æŸ¥çœ‹ç«¯å£å ç”¨å¹¶æ€æ­»(kill)1234# æŸ¥çœ‹sudo netstat -tlnp|grep 9090# æŸ¥çœ‹ps aux|grep yum 12# æ€æ­»kill -9 31540 å¦‚ä½•ä»Yumåº“ä¸‹è½½rpmåŒ…ä½†ä¸å®‰è£…æ–¹æ³•ä¸€ï¼ˆæ¨èï¼‰ 12# å°†ä¸€ä¸ªåŒ…ï¼ˆåŒ…å«æ‰€æœ‰ä¾èµ–ï¼‰ä¸‹è½½åˆ°ä¸€ä¸ªæŒ‡å®šçš„ç›®å½•(å¦‚/opt/gccmkdir/)ï¼šyum install -y gcc --downloadonly --downloaddir=/opt/gccmkdir/ æ–¹æ³•äºŒ 12# --resolve è¡¨ç¤ºä¸ºä¸‹è½½ä¾èµ–yumdownloader lsof --resolve --destdir=/data/mydepot/ æ–¹æ³•ä¸‰ï¼ˆæ¨èï¼‰ 12345# æŠŠ/etc/yum.confé…ç½®ä¸­çš„keepcache=0å‚æ•°ä¿®æ”¹ä¸ºkeepcache=1# å†yum ä¸‹è½½ï¼šyum install -y gcc#é»˜è®¤æƒ…å†µä¸‹ï¼ŒRPMåŒ…ä¼šä¿å­˜åœ¨ä¸‹é¢çš„ç›®å½•ä¸­:/var/cache/yum/x86_64/[centos/fedora-version]/[repository]/packages apt-get ä¸ yumå®‰è£…æœ‰å•¥åŒºåˆ«rpmåŒ…å’ŒdebåŒ…æ˜¯ä¸¤ç§Linuxç³»ç»Ÿä¸‹æœ€å¸¸è§çš„å®‰è£…åŒ…æ ¼å¼ï¼Œåœ¨å®‰è£…ä¸€äº›è½¯ä»¶æˆ–æœåŠ¡çš„æ—¶å€™å…ä¸äº†è¦å’Œå®ƒä»¬æ‰“äº¤é“ã€‚rpmåŒ…ä¸»è¦åº”ç”¨åœ¨RedHatç³»åˆ—åŒ…æ‹¬ Fedoraç­‰å‘è¡Œç‰ˆçš„Linuxç³»ç»Ÿä¸Šï¼ŒdebåŒ…ä¸»è¦åº”ç”¨äºDebianç³»åˆ—åŒ…æ‹¬ç°åœ¨æ¯”è¾ƒæµè¡Œçš„Ubuntuç­‰å‘è¡Œç‰ˆä¸Šã€‚ æˆ‘ä»¬çŸ¥é“å¦‚æœè¦å®‰è£…ç°æˆçš„è¿™ä¸¤ç§åŒ…çš„è¯ï¼Œå®‰è£…rpmåŒ…çš„å‘½ä»¤æ˜¯â€œrpm -å‚æ•°â€ï¼Œå®‰è£…debåŒ…çš„å‘½ä»¤æ˜¯â€œdpkg -å‚æ•°â€ã€‚è€ŒLinuxç³»ç»Ÿå¾ˆæ–¹ä¾¿å’Œäººæ€§åŒ–çš„ä¸€ç‚¹å°±æ˜¯å¾ˆå¤šè½¯ä»¶æˆ–æœåŠ¡æ ¹æœ¬å°±ä¸ç”¨æˆ‘ä»¬å»ä¸‹è½½ï¼Œç›´æ¥ä½¿ç”¨ç›¸åº”çš„å‘½ä»¤å°±å¯ä»¥ç®¡ç†äº†ï¼Œå¯èƒ½è¿™å°±æ˜¯ä¼ è¯´ä¸­çš„ â€œäº‘â€çš„æ¦‚å¿µã€‚ 1234yumå¯ä»¥ç”¨äºè¿ä½œrpmåŒ…ï¼Œä¾‹å¦‚åœ¨Fedoraç³»ç»Ÿä¸Šå¯¹æŸä¸ªè½¯ä»¶çš„ç®¡ç†ï¼šå®‰è£…ï¼šyum install &lt;package_name&gt; å¸è½½ï¼šyum remove &lt;package_name&gt; æ›´æ–°ï¼šyum update &lt;package_name&gt; 1234apt-getå¯ä»¥ç”¨äºè¿ä½œdebåŒ…ï¼Œä¾‹å¦‚åœ¨Ubuntuç³»ç»Ÿä¸Šå¯¹æŸä¸ªè½¯ä»¶çš„ç®¡ç†ï¼šå®‰è£…ï¼šapt-get install &lt;package_name&gt; å¸è½½ï¼šapt-get remove &lt;package_name&gt; æ›´æ–°ï¼šapt-get update &lt;package_name&gt; å®‰è£…rpmåŒ…è¿›å…¥ç³»ç»Ÿä¸‹å­˜æ”¾å¯¹åº”.rpmæ–‡ä»¶çš„ç›®å½•ï¼Œæ‰§è¡Œ 12cd /opt/gccmkdir/rpm -Uvh *.rpm --nodeps --force æ³¨ï¼šrpm -Uvh *.rpm â€“nodeps â€“force -Uvhå°±æ˜¯å‡çº§è½¯ä»¶åŒ…â€“Update *.rpmå°±æ˜¯æ‰€æœ‰çš„.rpmåŒ…ï¼› â€“nodepså°±æ˜¯å®‰è£…æ—¶ä¸æ£€æŸ¥ä¾èµ–å…³ç³»ï¼Œæ¯”å¦‚ä½ è¿™ä¸ªrpméœ€è¦Aï¼Œä½†æ˜¯ä½ æ²¡è£…Aï¼Œè¿™æ ·ä½ çš„åŒ…å°±è£…ä¸ä¸Šï¼Œç”¨äº†â€“nodepsä½ å°±èƒ½è£…ä¸Šäº†ï¼› â€“forceå°±æ˜¯å¼ºåˆ¶å®‰è£…ï¼Œæ¯”å¦‚ä½ è£…è¿‡è¿™ä¸ªrpmçš„ç‰ˆæœ¬1ï¼Œå¦‚æœä½ æƒ³è£…è¿™ä¸ªrpmçš„ç‰ˆæœ¬2ï¼Œå°±éœ€è¦ç”¨â€“forceå¼ºåˆ¶å®‰è£…ã€‚ æŸ¥çœ‹Linuxç‰ˆæœ¬æ–¹æ³•æ–¹æ³•ä¸€ 123456# lsb_release -aLSB Version: :core-3.1-ia32:core-3.1-noarch:graphics-3.1-ia32:graphics-3.1-noarchDistributor ID: CentOSDescription: CentOS release 5.4 (Final)Release: 5.4Codename: Final æ–¹æ³•äºŒ 12# cat /etc/redhat-releaseCentOS release 5.4 (Final) æ–¹æ³•ä¸‰ 12# rpm -q centos-releasecentos-release-5-4.el5.centos.1 æŸ¥çœ‹ç‰©ç†CPUä¸ªæ•°ã€æ ¸æ•°ã€é€»è¾‘CPUä¸ªæ•°ã€CPUä¿¡æ¯ï¼ˆå‹å·ï¼‰ã€å†…å­˜ä¿¡æ¯1234567891011121314151617# æ€»æ ¸æ•° = ç‰©ç†CPUä¸ªæ•° * æ¯é¢—ç‰©ç†CPUçš„æ ¸æ•° # æ€»é€»è¾‘CPUæ•° = ç‰©ç†CPUä¸ªæ•° * æ¯é¢—ç‰©ç†CPUçš„æ ¸æ•° * è¶…çº¿ç¨‹æ•°# æŸ¥çœ‹ç‰©ç†CPUä¸ªæ•°cat /proc/cpuinfo| grep \"physical id\"| sort| uniq| wc -l# æŸ¥çœ‹æ¯ä¸ªç‰©ç†CPUä¸­coreçš„ä¸ªæ•°(å³æ ¸æ•°)cat /proc/cpuinfo| grep \"cpu cores\"| uniq# æŸ¥çœ‹é€»è¾‘CPUçš„ä¸ªæ•°cat /proc/cpuinfo| grep \"processor\"| wc -l# æŸ¥çœ‹CPUä¿¡æ¯ï¼ˆå‹å·ï¼‰cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c# æŸ¥çœ‹å†… å­˜ä¿¡æ¯cat /proc/meminfo linuxè¿è¡ŒjaråŒ…è¦è¿è¡Œjavaçš„é¡¹ç›®éœ€è¦å…ˆå°†é¡¹ç›®æ‰“åŒ…æˆwaråŒ…æˆ–è€…jaråŒ…ï¼Œæ‰“åŒ…æˆwaråŒ…éœ€è¦å°†waråŒ…éƒ¨ç½²åˆ°tomcatæœåŠ¡å™¨ä¸Šæ‰èƒ½è¿è¡Œã€‚è€Œæ‰“åŒ…æˆjaråŒ…å¯ä»¥ç›´æ¥ä½¿ç”¨javaå‘½ä»¤æ‰§è¡Œã€‚åœ¨linuxç³»ç»Ÿä¸­è¿è¡ŒjaråŒ…ä¸»è¦æœ‰ä»¥ä¸‹å››ç§æ–¹å¼ã€‚ 1java -jar XXX.jar è¿™æ˜¯æœ€åŸºæœ¬çš„jaråŒ…æ‰§è¡Œæ–¹å¼ï¼Œä½†æ˜¯å½“æˆ‘ä»¬ç”¨ctrl+cä¸­æ–­æˆ–è€…å…³é—­çª—å£æ—¶ï¼Œç¨‹åºä¹Ÿä¼šä¸­æ–­æ‰§è¡Œã€‚ 1java -jar XXX.jar &amp; &amp;ä»£è¡¨åœ¨åå°è¿è¡Œï¼Œä½¿ç”¨ctrl+cä¸ä¼šä¸­æ–­ç¨‹åºçš„è¿è¡Œï¼Œä½†æ˜¯å…³é—­çª—å£ä¼šä¸­æ–­ç¨‹åºçš„è¿è¡Œã€‚ 1nohup java -jar XXX.jar &amp; ä½¿ç”¨è¿™ç§æ–¹å¼è¿è¡Œçš„ç¨‹åºæ—¥å¿—ä¼šè¾“å‡ºåˆ°å½“å‰ç›®å½•ä¸‹çš„nohup.outæ–‡ä»¶ï¼Œä½¿ç”¨ctrl+cä¸­æ–­æˆ–è€…å…³é—­çª—å£éƒ½ä¸ä¼šä¸­æ–­ç¨‹åºçš„æ‰§è¡Œã€‚ 1nohup java -jar XXX.jar &gt;temp.out &amp; â€˜&gt;temp.outâ€™çš„æ„æ€æ˜¯å°†æ—¥å¿—è¾“å‡ºé‡å®šå‘åˆ°temp.outæ–‡ä»¶ï¼Œä½¿ç”¨ctrl+cä¸­æ–­æˆ–è€…å…³é—­çª—å£éƒ½ä¸ä¼šä¸­æ–­ç¨‹åºçš„æ‰§è¡Œã€‚ XShellä¸Šä¼ ã€ä¸‹è½½æœ¬åœ°æ–‡ä»¶åˆ°linuxæœåŠ¡å™¨åœ¨linuxä¸»æœºä¸Šï¼Œå®‰è£…ä¸Šä¼ ä¸‹è½½å·¥å…·åŒ…rzåŠsz; å¦‚æœä¸çŸ¥é“ä½ è¦å®‰è£…åŒ…çš„å…·ä½“åç§°ï¼Œå¯ä»¥ä½¿ç”¨yum provides */name è¿›è¡ŒæŸ¥æ‰¾ç³»ç»Ÿè‡ªå¸¦è½¯ä»¶åŒ…çš„ä¿¡æ¯ 123456[root@host ~]# yum provides */rz...lrzsz-0.12.20-36.el7.x86_64 : The lrz and lsz modem communications programsRepo : baseMatched from:Filename : /usr/bin/rz ä¸€èˆ¬ä¼šåˆ—å‡ºè½¯ä»¶åŒ…çš„åç§°åŠç‰ˆæœ¬ï¼Œè¿˜æœ‰å®‰è£…è·¯å¾„ï¼›æŸ¥è¯¢åˆ°è½¯ä»¶åŒ…ååï¼Œä½¿ç”¨yum install -y åŒ…å è¿›è¡Œå®‰è£…ã€‚ lrzszåŒ…å®‰è£…å®ŒæˆååŒ…æ‹¬ä¸Šä¼ rzã€ä¸‹è½½szå‘½ä»¤ 1[root@host ~]# yum install -y lrzsz ä¸Šä¼ å‘½ä»¤ä¸ºrzï¼›ä¸‹å†å‘½ä»¤ä¸ºsz 12#ä¸Šä¼ ï¼ˆwindows-&gt;linuxï¼‰æ–‡ä»¶-å¼¹å‡ºçª—å£é€‰æ‹©éœ€è¦ä¸Šä¼ çš„æ–‡ä»¶[root@host ~]# rz 12#æŒ‡å®šä¸‹è½½ï¼ˆlinux-&gt;windowsï¼‰å“ªä¸ªæ–‡ä»¶-å¼¹å‡ºçª—å£é€‰æ‹©éœ€è¦ä¿å­˜çš„è·¯å¾„[root@host ~]# sz æ–‡ä»¶åç§° ubuntuå®‰è£…sshæœåŠ¡SSHåˆ†å®¢æˆ·ç«¯openssh-clientå’Œopenssh-server å¦‚æœä½ åªæ˜¯æƒ³ç™»é™†åˆ«çš„æœºå™¨çš„SSHåªéœ€è¦å®‰è£…openssh-clientï¼ˆubuntuæœ‰é»˜è®¤å®‰è£…ï¼Œå¦‚æœæ²¡æœ‰åˆ™sudo apt-get install openssh-clientï¼‰ å¦‚æœè¦ä½¿æœ¬æœºå¼€æ”¾SSHæœåŠ¡å°±éœ€è¦å®‰è£…openssh-serversudoï¼ˆapt-get install openssh-serverï¼‰ 1apt-get install openssh-server æœ‰æ—¶å€™å½“ä½ æ‰§è¡Œsudo apt-get XXXè¿™ç§å‘½ä»¤æ—¶å‡ºç°ç±»ä¼¼ä¸‹é¢çš„è¾“å‡ºé”™è¯¯ï¼š 12E: Could not get lock /var/lib/dpkg/lock - open (11 Resource temporarily unavailable)E: Unable to lock the administration directory (/var/lib/dpkg/) is another process using it? æˆ–è€… 12345E: Could not ge lock /var/lib/apt/lists/lock - open (11: Resource temporarilyunavailable)E: Unable to lock directory /var/lib/apt/lists/ E: Could not get lock /var/lib/dpkg/lock - open (11: Resource temporarily unavailable) E: Unable to lock the administration directory (/var/lib/dpkg/), is another process using it? è§£é‡Š å‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯ï¼Œè¿˜æœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨ä½¿ç”¨apt-getè¿›è¡Œä¸‹è½½çš„æ“ä½œã€‚ä½†æ˜¯å¥‡æ€ªçš„æ˜¯ï¼Œæˆ‘å°±æ˜¯æ²¡æœ‰æ‰¾åˆ°å…¶ä»–ä½¿ç”¨äº†apt-getæŒ‡ä»¤çš„ç»ˆç«¯ç•Œé¢ã€‚é‚£ä¹ˆå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Œéš¾é“è¦é‡æ–°å¯åŠ¨ç”µè„‘å—ï¼Œé‡å¯ç”µè„‘æ˜¯å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æˆ‘æ¥ä¸‹æ¥æ•™ä½ çš„æ–¹æ³•ï¼Œæ‰æ˜¯çœŸæ­£çš„è§£å†³æ–¹æ³•ã€‚ è§£å†³åŠæ³• å…ˆæœç´¢æ‰€æœ‰è¿è¡Œç€çš„çº¿ç¨‹ 1ps -A | grep apt-get ä½ ä¼šå¾—åˆ°ç±»ä¼¼ä¸‹é¢çš„è¾“å‡ºï¼š 123root 752 0.0 0.0 4508 1628 ? Ss 01:13 0:00 /bin/sh /usr/lib/apt/apt.systemd.daily_apt 2098 0.1 0.1 49572 5524 ? S 01:18 0:06 /usr/lib/apt/methods/httpaobo 4425 0.0 0.0 18484 980 pts/1 S+ 02:13 0:00 grep --color=auto apt ç¬¬2åˆ—å°±æ˜¯çº¿ç¨‹å·(kill processnumber)ã€‚æˆ‘ä»¬å°†aptç›¸å…³çš„è¿›ç¨‹ç»™å…³é—­æ‰ï¼Œéœ€è¦ä½¿ç”¨sudoæƒé™ï¼š 1sudo kill 2098 è¾“å‡ºï¼š bash: kill: (2098) - Operation not permitted ç„¶åç¡®è®¤sshserveræ˜¯å¦å¯åŠ¨äº†ï¼š 1ps -e |grep ssh å¦‚æœçœ‹åˆ°sshdé‚£è¯´æ˜ssh-serverå·²ç»å¯åŠ¨äº† CentOS7ä¸­æ‰¾ä¸åˆ°ifconfigå’Œnetstatå‘½ä»¤æŠŠnet-toolsåŒ…è£…ä¸Šå°±å¥½äº† 1yum install net-tools ç”¨ifconfigæˆ–è€…ip aå‘½ä»¤ï¼Œè·å–ä¸åˆ°IPåœ°å€é—®é¢˜æè¿°ï¼šç”¨ifconfigæˆ–è€…ip aå‘½ä»¤ï¼Œè·å–ä¸åˆ°ipåœ°å€ï¼Œå³ç½‘å¡æœªå¯åŠ¨ï¼Œæ— æ³•ç”¨Xshellè¿œç¨‹è¿æ¥ã€‚ è§£å†³æ–¹æ¡ˆï¼š è¿›å…¥/etc/sysconfig/network-scriptsç›®å½•ï¼Œå‘ç°æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªifcfg-...ï¼Œå³ç½‘å¡ï¼ˆé©±åŠ¨ï¼‰å­˜åœ¨ä½†æœªå¯ç”¨ã€‚ 1ls /etc/sysconfig/network-scripts ä¿®æ”¹/etc/sysconfig/network-scripts/ifcfg-...æ–‡ä»¶ï¼Œ æŠŠONBOOT=noæ”¹ä¸ºONBOOT=yesä¿å­˜é€€å‡ºwq 123vi /etc/sysconfig/network-scripts/ifcfg-em1...# æŠŠ`ONBOOT=no`æ”¹ä¸º`ONBOOT=yes`ä¿å­˜é€€å‡º service network restarté‡å¯ã€‚å‡ºç°ï¼š 1Restarting network (via systemctl): [ ç¡®å®š ] OK è¾“å…¥ifconfigæˆ–è€…ip aå‘½ä»¤ï¼Œå‡ºç°ipåœ°å€ã€‚ç”¨Xshellè¿æ¥æˆåŠŸã€‚ CentOSä¸‹å½»åº•åˆ é™¤MySQLå’Œé‡æ–°å®‰è£…MySQLåˆ é™¤MySQL12345yum remove mysql mysql-server mysql-libs mysql-server;find / -name mysql å°†æ‰¾åˆ°çš„ç›¸å…³ä¸œè¥¿delete(rm -rf ...)æ‰ï¼›rpm -qa|grep mysql(æŸ¥è¯¢å‡ºæ¥çš„ä¸œä¸œyum removeæ‰) å®‰è£…MySQL1yum install mysql mysql-server mysql-libs mysql-server å¦‚ä½•åˆ¤æ–­Linuxæ˜¯32ä½è¿˜æ˜¯64ä½æ–¹æ³•1ï¼šgetconf LONG_BIT æŸ¥çœ‹ 1getconf LONG_BIT æ–¹æ³•2ï¼šunameå‘½ä»¤æŸ¥çœ‹ 12uname -auname -m æ–¹æ³•3: archå‘½ä»¤æŸ¥çœ‹ 1arch æ–¹æ³•4: fileå‘½ä»¤æŸ¥çœ‹ 12file /sbin/initfile /bin/ls æ–¹æ³•5: é€šè¿‡æŸ¥çœ‹CPUçš„ä¿¡æ¯æ¥åˆ¤å®šLinuxç³»ç»Ÿæ˜¯å¦æ˜¯64ä½æ“ä½œç³»ç»Ÿ 12# å¦‚æœç»“æœå¤§äº0, è¯´æ˜æ”¯æŒ64bitè®¡ç®—. lmæŒ‡long mode, æ”¯æŒlmåˆ™æ˜¯64bitcat /proc/cpuinfo | grep flags | grep ' lm ' | wc -l","categories":[{"name":"Linux","slug":"Linux","permalink":"/categories/Linux/"}],"tags":[{"name":"æŠ€å·§","slug":"æŠ€å·§","permalink":"/tags/æŠ€å·§/"},{"name":"é…ç½®","slug":"é…ç½®","permalink":"/tags/é…ç½®/"},{"name":"Ubuntu","slug":"Ubuntu","permalink":"/tags/Ubuntu/"},{"name":"CentOS","slug":"CentOS","permalink":"/tags/CentOS/"},{"name":"RedHat","slug":"RedHat","permalink":"/tags/RedHat/"}]}]}