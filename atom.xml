<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Nan&#39;s Blog</title>
  
  <subtitle>弱者才言命，强者只言运！</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="/"/>
  <updated>2020-01-06T14:15:24.888Z</updated>
  <id>/</id>
  
  <author>
    <name>马亮南生</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>南生论坛页面静态展示v2.6</title>
    <link href="/2020/01/06/%E5%8D%97%E7%94%9F%E8%AE%BA%E5%9D%9B%E9%A1%B5%E9%9D%A2%E9%9D%99%E6%80%81%E5%B1%95%E7%A4%BAv2-6/"/>
    <id>/2020/01/06/南生论坛页面静态展示v2-6/</id>
    <published>2020-01-06T13:34:33.000Z</published>
    <updated>2020-01-06T14:15:24.888Z</updated>
    
    <content type="html"><![CDATA[<h3 id="用户系统"><a href="#用户系统" class="headerlink" title="用户系统"></a>用户系统</h3><h4 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-登录v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-登录v2.6.jpg" alt="image" width="50%;" align="center"></p><h4 id="注册"><a href="#注册" class="headerlink" title="注册"></a>注册</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-注册v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-注册v2.6.jpg" alt="image" width="50%;" align="center/"></p><h4 id="首页-登录前"><a href="#首页-登录前" class="headerlink" title="首页-登录前"></a>首页-登录前</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-首页-登录前v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-首页-登录前v2.6.jpg" alt="image" width="50%;" align="center"></p><h4 id="首页-登录后"><a href="#首页-登录后" class="headerlink" title="首页-登录后"></a>首页-登录后</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-首页-登陆后v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-首页-登录后v2.6.jpg" alt="image" width="50%;" align="center"></p><h4 id="写文章"><a href="#写文章" class="headerlink" title="写文章"></a>写文章</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-写文章v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-写文章v2.6.jpg" alt="image" width="50%;" align="center"></p><h4 id="修改文章"><a href="#修改文章" class="headerlink" title="修改文章"></a>修改文章</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-修改文章v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-修改文章v2.6.jpg" alt="image" width="50%;" align="center"></p><h4 id="文章详情"><a href="#文章详情" class="headerlink" title="文章详情"></a>文章详情</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-文章详情v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-文章详情v2.6.jpg" alt="image" width="50%;" align="center"></p><h4 id="个人主页"><a href="#个人主页" class="headerlink" title="个人主页"></a>个人主页</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-个人主页v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-个人主页v2.6.jpg" alt="image" width="50%;" align="center"></p><h4 id="他人主页"><a href="#他人主页" class="headerlink" title="他人主页"></a>他人主页</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-他人主页v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-个人主页v2.6.jpg" alt="image" width="50%;" align="center"></p><h4 id="编辑个人资料"><a href="#编辑个人资料" class="headerlink" title="编辑个人资料"></a>编辑个人资料</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-编辑个人资料v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-编辑个人资料v2.6.jpg" alt="image" width="50%;" align="center"></p><h4 id="基本信息设置"><a href="#基本信息设置" class="headerlink" title="基本信息设置"></a>基本信息设置</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-基本信息设置v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-基本信息设置v2.6.jpg" alt="image" width="50%;" align="center"></p><h4 id="修改头像"><a href="#修改头像" class="headerlink" title="修改头像"></a>修改头像</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-上传头像v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-修改头像v2.6.jpg" alt="image" width="50%;" align="center"></p><h4 id="动态"><a href="#动态" class="headerlink" title="动态"></a>动态</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-动态v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-动态v2.6.jpg" alt="image" width="50%;" align="center"></p><h4 id="回答"><a href="#回答" class="headerlink" title="回答"></a>回答</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-回答v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-回答v2.6.jpg" alt="image" width="50%;" align="center"></p><h4 id="关注"><a href="#关注" class="headerlink" title="关注"></a>关注</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-关注v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-关注v2.6.jpg" alt="image" width="50%;" align="center"></p><h4 id="收藏"><a href="#收藏" class="headerlink" title="收藏"></a>收藏</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-收藏v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-收藏v2.6.jpg" alt="image" width="50%;" align="center"></p><h4 id="相册"><a href="#相册" class="headerlink" title="相册"></a>相册</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-相册v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-相册v2.6.jpg" alt="image" width="50%;" align="center"></p><h4 id="有照片的相册"><a href="#有照片的相册" class="headerlink" title="有照片的相册"></a>有照片的相册</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-照片-有v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-有照片的相册v2.6.jpg" alt="image" width="50%;" align="center"></p><h4 id="无照片的相册"><a href="#无照片的相册" class="headerlink" title="无照片的相册"></a>无照片的相册</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-照片-无v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-无照片的相册v2.6.jpg" alt="image" width="50%;" align="center"></p><h3 id="管理员系统"><a href="#管理员系统" class="headerlink" title="管理员系统"></a>管理员系统</h3><h4 id="登录-1"><a href="#登录-1" class="headerlink" title="登录"></a>登录</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/管理员-登录v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><h4 id="初始页面"><a href="#初始页面" class="headerlink" title="初始页面"></a>初始页面</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/管理员-初始页面v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><h4 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/管理员-用户管理v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><h4 id="文章管理"><a href="#文章管理" class="headerlink" title="文章管理"></a>文章管理</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/管理员-文章管理v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><h4 id="版块管理"><a href="#版块管理" class="headerlink" title="版块管理"></a>版块管理</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/管理员-版块管理v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><h4 id="访问记录"><a href="#访问记录" class="headerlink" title="访问记录"></a>访问记录</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/管理员-访问记录v2.6.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;用户系统&quot;&gt;&lt;a href=&quot;#用户系统&quot; class=&quot;headerlink&quot; title=&quot;用户系统&quot;&gt;&lt;/a&gt;用户系统&lt;/h3&gt;&lt;h4 id=&quot;登录&quot;&gt;&lt;a href=&quot;#登录&quot; class=&quot;headerlink&quot; title=&quot;登录&quot;&gt;&lt;/a&gt;登录&lt;/h
      
    
    </summary>
    
      <category term="南生论坛" scheme="/categories/%E5%8D%97%E7%94%9F%E8%AE%BA%E5%9D%9B/"/>
    
    
      <category term="展示" scheme="/tags/%E5%B1%95%E7%A4%BA/"/>
    
  </entry>
  
  <entry>
    <title>南生论坛页面静态展示</title>
    <link href="/2019/12/19/%E5%8D%97%E7%94%9F%E8%AE%BA%E5%9D%9B%E9%A1%B5%E9%9D%A2%E9%9D%99%E6%80%81%E5%B1%95%E7%A4%BA/"/>
    <id>/2019/12/19/南生论坛页面静态展示/</id>
    <published>2019-12-19T01:20:43.000Z</published>
    <updated>2019-12-19T01:47:55.466Z</updated>
    
    <content type="html"><![CDATA[<h3 id="用户系统"><a href="#用户系统" class="headerlink" title="用户系统"></a>用户系统</h3><h4 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-登录2.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-登录.jpg" alt="image" width="50%;" align="center"></p><h4 id="注册"><a href="#注册" class="headerlink" title="注册"></a>注册</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-注册.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-注册.jpg" alt="image" width="50%;" align="center/"></p><h4 id="首页-登录前"><a href="#首页-登录前" class="headerlink" title="首页-登录前"></a>首页-登录前</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-首页-登录前.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-首页-登录前.jpg" alt="image" width="50%;" align="center"></p><h4 id="首页-登录后"><a href="#首页-登录后" class="headerlink" title="首页-登录后"></a>首页-登录后</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-首页-登陆后.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-首页-登录后.jpg" alt="image" width="50%;" align="center"></p><h4 id="发帖"><a href="#发帖" class="headerlink" title="发帖"></a>发帖</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-发帖2.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-发帖.jpg" alt="image" width="50%;" align="center"></p><h4 id="个人主页"><a href="#个人主页" class="headerlink" title="个人主页"></a>个人主页</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-个人主页2.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-个人主页.jpg" alt="image" width="50%;" align="center"></p><h4 id="编辑个人资料"><a href="#编辑个人资料" class="headerlink" title="编辑个人资料"></a>编辑个人资料</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-编辑个人资料2.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-编辑个人资料.jpg" alt="image" width="50%;" align="center"></p><h4 id="基本信息设置"><a href="#基本信息设置" class="headerlink" title="基本信息设置"></a>基本信息设置</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-基本信息设置2.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-基本信息设置.jpg" alt="image" width="50%;" align="center"></p><h4 id="修改头像"><a href="#修改头像" class="headerlink" title="修改头像"></a>修改头像</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-上传头像2.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-修改头像.jpg" alt="image" width="50%;" align="center"></p><h4 id="动态"><a href="#动态" class="headerlink" title="动态"></a>动态</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-动态.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-动态.jpg" alt="image" width="50%;" align="center"></p><h4 id="回答"><a href="#回答" class="headerlink" title="回答"></a>回答</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-回答.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-回复.jpg" alt="image" width="50%;" align="center"></p><h4 id="关注"><a href="#关注" class="headerlink" title="关注"></a>关注</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-关注.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-关注.jpg" alt="image" width="50%;" align="center"></p><h4 id="收藏"><a href="#收藏" class="headerlink" title="收藏"></a>收藏</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-收藏.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-收藏.jpg" alt="image" width="50%;" align="center"></p><h4 id="相册"><a href="#相册" class="headerlink" title="相册"></a>相册</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-相册.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-相册.jpg" alt="image" width="50%;" align="center"></p><h4 id="有照片的相册"><a href="#有照片的相册" class="headerlink" title="有照片的相册"></a>有照片的相册</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-照片-有.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-有照片的相册.jpg" alt="image" width="50%;" align="center"></p><h4 id="无照片的相册"><a href="#无照片的相册" class="headerlink" title="无照片的相册"></a>无照片的相册</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/用户-照片-无.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><p><code>手机上的效果：</code></p><p><img src="/img/手机-无照片的相册.jpg" alt="image" width="50%;" align="center"></p><h3 id="管理员系统"><a href="#管理员系统" class="headerlink" title="管理员系统"></a>管理员系统</h3><h4 id="登录-1"><a href="#登录-1" class="headerlink" title="登录"></a>登录</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/管理员-登录2.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><h4 id="初始页面"><a href="#初始页面" class="headerlink" title="初始页面"></a>初始页面</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/管理员-初始页面.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><h4 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/管理员-用户管理2.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><h4 id="帖子管理"><a href="#帖子管理" class="headerlink" title="帖子管理"></a>帖子管理</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/管理员-帖子管理2.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><h4 id="版块管理"><a href="#版块管理" class="headerlink" title="版块管理"></a>版块管理</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/管理员-版块管理2.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure><h4 id="访问记录"><a href="#访问记录" class="headerlink" title="访问记录"></a>访问记录</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/管理员-访问记录.png" alt="image" title="">                </div>                <div class="image-caption">image</div>            </figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;用户系统&quot;&gt;&lt;a href=&quot;#用户系统&quot; class=&quot;headerlink&quot; title=&quot;用户系统&quot;&gt;&lt;/a&gt;用户系统&lt;/h3&gt;&lt;h4 id=&quot;登录&quot;&gt;&lt;a href=&quot;#登录&quot; class=&quot;headerlink&quot; title=&quot;登录&quot;&gt;&lt;/a&gt;登录&lt;/h
      
    
    </summary>
    
      <category term="南生论坛" scheme="/categories/%E5%8D%97%E7%94%9F%E8%AE%BA%E5%9D%9B/"/>
    
    
      <category term="展示" scheme="/tags/%E5%B1%95%E7%A4%BA/"/>
    
  </entry>
  
  <entry>
    <title>Chrome插件</title>
    <link href="/2019/11/26/Chrome%E6%8F%92%E4%BB%B6/"/>
    <id>/2019/11/26/Chrome插件/</id>
    <published>2019-11-26T06:25:24.000Z</published>
    <updated>2019-11-26T06:32:26.695Z</updated>
    
    <content type="html"><![CDATA[<p><code>完全引用</code>：<a href="https://zhaoolee.com/ChromeAppHeroes/" target="_blank" rel="noopener">https://zhaoolee.com/ChromeAppHeroes/</a></p><h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul><li><a href="https://www.v2fy.com/p/061-image-assistant/" target="_blank" rel="noopener">061《ImageAssistant》图片助手批量图片下载器</a></li><li><a href="https://www.v2fy.com/p/060_tabagotchi/" target="_blank" rel="noopener">060《Tabagotchi》为减缓全球变暖做出贡献</a></li><li><a href="https://www.v2fy.com/p/059_page_speed_insight_and_check_list/" target="_blank" rel="noopener">059《PageSpeed Insight and CheckList》为网页优化提供建议和量化指标</a></li><li><a href="https://www.v2fy.com/p/058_ip_address/" target="_blank" rel="noopener">058《IP-Address》快速查看当前设备IP</a></li><li><a href="https://www.v2fy.com/p/057_webp_save_as_png/" target="_blank" rel="noopener">057《图片另存为JPG/PNG/WebP》让WebP图片下载为PNG格式</a></li><li><a href="https://www.v2fy.com/p/056_search/" target="_blank" rel="noopener">056《Search》为Chrome设置搜索引擎关键词</a></li><li><a href="https://www.v2fy.com/p/055_keylines/" target="_blank" rel="noopener">055《Keylines》为网页元素添加随机描边颜色</a> | <a href="https://zhaoolee.com/ChromeAppHeroes/page/055_keylines.html" target="_blank" rel="noopener">备用链接</a></li><li><a href="https://www.v2fy.com/p/054_er_xiang_yi_tu_sou_tu/" target="_blank" rel="noopener">054《二箱 以图搜图》让你在搜图方面随心所欲（为所欲为）</a></li><li><a href="https://www.v2fy.com/p/053_shu_biao_dian_ji_te_xiao/" target="_blank" rel="noopener">053《鼠标点击特效 (๑•́ ∀ •̀๑)》为鼠标点击添加有趣的特效</a></li><li><p><a href="https://www.v2fy.com/p/052_site_palette/" target="_blank" rel="noopener">052《Site Palette》自动提取网站配色</a></p></li><li><p><a href="https://www.v2fy.com/p/051_custom_cursor_for_chrome/" target="_blank" rel="noopener">051《Custom Cursor for Chrome™》为Chrome换上可爱初音光标</a></p></li><li><a href="https://www.v2fy.com/p/050_google_results_previewer/" target="_blank" rel="noopener">050《Google Results Previewer》无点击查看谷歌搜索结果</a></li><li><a href="https://www.v2fy.com/p/049_web_server_for_chrome/" target="_blank" rel="noopener">049《Web Server for Chrome》搭建本地Web服务器, 实现局域网共享文件夹</a></li><li><a href="https://www.v2fy.com/p/048_words_discoverer/" target="_blank" rel="noopener">048《Words Discoverer》高亮标注单词,提升你的词汇量</a></li><li><a href="https://www.v2fy.com/p/047_go_to_tab/" target="_blank" rel="noopener">047《Go to Tab》快速跳转到打开的网页</a></li><li><a href="https://www.v2fy.com/p/046_whatfont/" target="_blank" rel="noopener">046《WhatFont》字体爱好者优雅查看网页字体</a></li><li><a href="https://www.v2fy.com/p/045_restlet_client/" target="_blank" rel="noopener">045《Restlet Client》优秀的Api测试工具</a></li><li><a href="https://www.v2fy.com/p/044_gu_ge_fang_wen_zhu_shou/" target="_blank" rel="noopener">044《谷歌访问助手》访问Chrome商店 Gmail 谷歌搜索</a></li><li><a href="https://www.v2fy.com/p/043_dream_afar_new_tab/" target="_blank" rel="noopener">043《Dream Afar New Tab》探索世界的新方式</a></li><li><a href="https://www.v2fy.com/p/042_edge/" target="_blank" rel="noopener">042 在Edge中安装Chrome扩展程序</a></li><li><a href="https://www.v2fy.com/p/041_copy_all_urls/" target="_blank" rel="noopener">041《Copy All Urls》优雅地保存-开启多个标签页</a></li><li><a href="https://www.v2fy.com/p/040_gitzip_for_github/" target="_blank" rel="noopener">040《GitZip for github》从Github批量下载表情包</a></li><li><a href="https://www.v2fy.com/p/039_simplify_gmail/" target="_blank" rel="noopener">039《Simplify Gmail》让网页版Gmail更清爽</a></li><li><a href="https://www.v2fy.com/p/038_alexa_traffic_rank/" target="_blank" rel="noopener">038《Alexa Traffic Rank》一键查看网站全球排名</a></li><li><a href="https://www.v2fy.com/p/037_saladict/" target="_blank" rel="noopener">037《Saladict》谷歌!有道!我全都要! 聚合词典, 并行翻译</a></li><li><a href="https://www.v2fy.com/p/036_screen_shader/" target="_blank" rel="noopener">036《Screen Shader》把网页调成暖色，你的眼睛会感谢你🙏</a></li><li><a href="https://www.v2fy.com/p/035_print_friendly_and_pdf/" target="_blank" rel="noopener">035《Print Friendly &amp; PDF》让你拥有最佳的打印阅读体验</a></li><li><a href="https://www.v2fy.com/p/034_astro_bot/" target="_blank" rel="noopener">034《Astro Bot》用新标签页刷编程题</a></li><li><a href="https://www.v2fy.com/p/033_yi_ye/" target="_blank" rel="noopener">033《一叶》在任意网页开启实时弹幕 聊天窗口 留言板</a></li><li><a href="https://www.v2fy.com/p/032_smallpdf/" target="_blank" rel="noopener">032《Smallpdf》简单好用的线上PDF工具</a></li><li><a href="https://www.v2fy.com/p/031_onetab/" target="_blank" rel="noopener">031《OneTab》把多个Tab转换为一个列表</a></li><li><a href="https://www.v2fy.com/p/030_jue_jin/" target="_blank" rel="noopener">030《掘金》相信优质技术内容的力量</a></li><li><a href="https://www.v2fy.com/p/029_simread/" target="_blank" rel="noopener">029 《SimpRead》为任意网页开启阅读模式</a></li><li><a href="https://www.v2fy.com/p/028_adblock/" target="_blank" rel="noopener">028《AdBlock》Adblock自定义屏蔽简书广告</a></li><li><a href="https://www.v2fy.com/p/027_text/" target="_blank" rel="noopener">027《Text》来自Chrome实验室的跨平台记事本</a></li><li><a href="https://www.v2fy.com/p/026_quickey_launcher/" target="_blank" rel="noopener">026《Quickey Launcher》打开网站只需一键</a></li><li><a href="https://www.v2fy.com/p/025_console/" target="_blank" rel="noopener">025《Console》Chrome自带好用的计算器</a></li><li><a href="https://www.v2fy.com/p/024_dark_reader/" target="_blank" rel="noopener">024《Dark Reader》为任意网站启用夜间模式</a></li><li><a href="https://www.v2fy.com/p/023_fireshot/" target="_blank" rel="noopener">023《FireShot》一键滚动截屏整个网页</a></li><li><a href="https://www.v2fy.com/p/022kuo_zhan_guan_li_qi/" target="_blank" rel="noopener">022《扩展管理器》管理你的Chrome扩展</a></li><li><a href="https://www.v2fy.com/p/021_bi_li_bi_li_zhu_shou/" target="_blank" rel="noopener">021《哔哩哔哩助手》助你快速成为B站老司机</a></li><li><a href="https://www.v2fy.com/p/020_boxel_rebound/" target="_blank" rel="noopener">020《Boxel Rebound》“嗨到中毒”的弹跳小方块(附自制赛道分享方法)</a></li><li><a href="https://www.v2fy.com/p/019_mega/" target="_blank" rel="noopener">019《MEGA》网盘可以良心到什么程度? 试试MEGA吧!</a></li><li><a href="https://www.v2fy.com/p/018_enhanced_github/" target="_blank" rel="noopener">018《Enhanced Github》从“冰柜”到“冰棍儿”,下载Github单个文件</a></li><li><p><a href="https://www.v2fy.com/p/017_xin_lang_wei_bo_tu_chuang/" target="_blank" rel="noopener">017《新浪微博图床》本地Markdown编写更流畅, 新浪微博图床来帮忙</a></p></li><li><p><a href="https://www.v2fy.com/p/016_jie_chu_b_zhan_qu_yu_xian_zhi/" target="_blank" rel="noopener">016《解除B站区域限制》查看进击的巨人第三季</a></p></li><li><a href="https://www.v2fy.com/p/015_xpath_helper/" target="_blank" rel="noopener">015 《XPath Helper》完成Bing每日壁纸的小爬虫</a></li><li><a href="https://www.v2fy.com/p/014_chao_ji_ma_li_ao_you_xi/" target="_blank" rel="noopener">014《超级马里奥游戏》Chrome变身小霸王</a></li><li><a href="https://www.v2fy.com/p/013_quick_qr/" target="_blank" rel="noopener">013《Quick QR》用二维码实现云粘贴</a></li><li><a href="https://www.v2fy.com/p/012_ourstickys/" target="_blank" rel="noopener">012《OurStickys》Chrome特色网页便签纸</a></li><li><a href="https://www.v2fy.com/p/011_whatruns/" target="_blank" rel="noopener">011 《whatruns》一键分析网站技术栈</a></li><li><a href="https://www.v2fy.com/p/010_speedtest/" target="_blank" rel="noopener">010《speedtest》网络测速插件speedtest</a></li><li><a href="https://www.v2fy.com/p/009_vimium/" target="_blank" rel="noopener">009《vimium》Chrome与vim双神器融合</a></li><li><a href="https://www.v2fy.com/p/008_chrome_cleaner_pro/" target="_blank" rel="noopener">008《Chrome Cleaner Pro》为Chrome加速</a></li><li><a href="https://www.v2fy.com/p/007_loom/" target="_blank" rel="noopener">007《loom》 Chrome翻录网页视频神器</a></li><li><a href="https://www.v2fy.com/p/006_similarsites/" target="_blank" rel="noopener">006《SimilarSites》 一键查找姊妹网站 SimilarSites</a></li><li><a href="https://www.v2fy.com/p/005_video_speed_controller/" target="_blank" rel="noopener">005《Video Speed Controller》 刷课（刷剧）神器！给网页视频加个速(最快可达16倍!)</a></li><li><a href="https://www.v2fy.com/p/004_tampermonkey/" target="_blank" rel="noopener">004《Tampermonkey》 油猴子! 给浏览器开个挂</a></li><li><a href="https://www.v2fy.com/p/003_secure_shell_app/" target="_blank" rel="noopener">003《Secure Shell App》 Chrome中开启ssh一种什么体验</a></li><li><a href="https://www.v2fy.com/p/002_chrono/" target="_blank" rel="noopener">002《chrono》 让Chrome下载资源更容易</a></li><li><a href="https://www.v2fy.com/p/001_markdown_here/" target="_blank" rel="noopener">001《markdown-here》 Markdown一键转换到”富文本格式”</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;code&gt;完全引用&lt;/code&gt;：&lt;a href=&quot;https://zhaoolee.com/ChromeAppHeroes/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://zhaoolee.com/ChromeAppHeroes/&lt;/a
      
    
    </summary>
    
      <category term="Chrome插件" scheme="/categories/Chrome%E6%8F%92%E4%BB%B6/"/>
    
    
      <category term="Chrome插件" scheme="/tags/Chrome%E6%8F%92%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>Hexo - Next 主题添加评论功能</title>
    <link href="/2019/11/05/Hexo-Next-%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E8%AF%84%E8%AE%BA%E5%8A%9F%E8%83%BD/"/>
    <id>/2019/11/05/Hexo-Next-主题添加评论功能/</id>
    <published>2019-11-05T03:07:09.000Z</published>
    <updated>2019-11-05T03:59:46.659Z</updated>
    
    <content type="html"><![CDATA[<p>Hexo 的 Next 主题继承了多种评论系统，我在这里介绍两种个人觉得不错的评论系统：<code>Valine</code> 和 <code>gitment</code></p><h2 id="Valine-评论系统"><a href="#Valine-评论系统" class="headerlink" title="Valine 评论系统"></a>Valine 评论系统</h2><p><code>本博客使用的评论系统</code></p><p>参考：<a href="https://postgres.fun/20190107095300.html" target="_blank" rel="noopener">Hexo: 添加Valine评论(邮件通知、评论列表头像)</a></p><p>​        <a href="https://valine.js.org/" target="_blank" rel="noopener">Valine - 一款快速、简洁且高效的无后端评论系统</a></p><p>使用 Valine 评论系统，这款系统不需要登录便可以登录，没有后端，Next 主题最新已经支持安装</p><ul><li>基于 Leancloud 的系统</li><li>支持 MarkDown 语法</li><li>无后端实现，快速高效</li></ul><h3 id="注册-LeanCloud"><a href="#注册-LeanCloud" class="headerlink" title="注册 LeanCloud"></a>注册 LeanCloud</h3><p>因为 Valine 是基于 LeanCloud 系统的，所以先在 LeanCloud 中注册账号</p><p><a href="https://leancloud.cn/dashboard/login.html#/signin" target="_blank" rel="noopener">LeanCloud官网登录入口</a></p><p>注册登陆后，访问控制台，创建应用（需要实名验证），选择开发版，创建好之后就生成了 <code>App ID</code> 和 <code>App Key</code></p><h3 id="设置-Next-主题"><a href="#设置-Next-主题" class="headerlink" title="设置 Next 主题"></a>设置 Next 主题</h3><p>在主题的配置文件中，修改关于 valine 的配置</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Valine.</span></span><br><span class="line"><span class="comment"># You can get your appid and appkey from https://leancloud.cn</span></span><br><span class="line"><span class="comment"># more info please open https://valine.js.org</span></span><br><span class="line">valine:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span> <span class="comment"># 是否开启</span></span><br><span class="line">  appid:   <span class="comment"># 上一步获取的 App ID</span></span><br><span class="line">  appkey:  <span class="comment"># 上一步获取的 App Key</span></span><br><span class="line">  notify: <span class="literal">false</span> <span class="comment"># 新留言是否需要通知 https://github.com/xCss/Valine/wiki</span></span><br><span class="line">  verify: <span class="literal">false</span> <span class="comment"># 是否需要验证，验证比较反人类建议false关闭</span></span><br><span class="line">  placeholder: 请在此输入您的留言 <span class="comment"># 默认留言框内的文字</span></span><br><span class="line">  avatar: monsterid <span class="comment"># 默认头像</span></span><br><span class="line">  guest_info: nick,mail <span class="comment"># 默认留言框的头部需要访问者输入的信息</span></span><br><span class="line">  pageSize: 10 <span class="comment">#默认单页的留言条数</span></span><br></pre></td></tr></table></figure><p><code>avatar</code>可选默认头像：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/valine001.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="评论管理"><a href="#评论管理" class="headerlink" title="评论管理"></a>评论管理</h3><p>如果想要管理评论，进入 leancloud 官网，找到 <code>控制台</code>-&gt;<code>存储</code>-&gt;<code>commet</code> 中进行管理</p><h2 id="Gitment-评论系统"><a href="#Gitment-评论系统" class="headerlink" title="Gitment 评论系统"></a>Gitment 评论系统</h2><p>gitment，它是基于 github 开发的，是依靠于 <code>GitHub Issues</code> 的评论系统，Next 主题最新已经支持安装</p><p>前提：更新 Next 主题（5.1.2 主题）</p><h3 id="注册OAuth-application"><a href="#注册OAuth-application" class="headerlink" title="注册OAuth application"></a>注册OAuth application</h3><ol><li><p>在 github 中进行注册，进入 <a href="https://github.com/settings/profile" target="_blank" rel="noopener">https://github.com/settings/profile</a></p></li><li><p>点击左侧 Developer settings</p></li><li><p>Register a new application</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Application name:<span class="comment">#应用名称</span></span><br><span class="line">Homepage URL：  <span class="comment">#网站URL(填自己的博客主页地址)</span></span><br><span class="line">Application description<span class="comment">#描述</span></span><br><span class="line">Authorization callback URL:<span class="comment">#网站URL(填自己的博客主页地址)</span></span><br></pre></td></tr></table></figure></li><li><p>注册完成之后，会得到：<code>Client ID</code> 和 <code>Client Secret</code></p></li></ol><h3 id="新建存放博客评论仓库"><a href="#新建存放博客评论仓库" class="headerlink" title="新建存放博客评论仓库"></a>新建存放博客评论仓库</h3><p>可以在 github 中建一个项目，专门用来存储你的博客评论</p><h3 id="配置-next-主题文件"><a href="#配置-next-主题文件" class="headerlink" title="配置 next 主题文件"></a>配置 next 主题文件</h3><p>编辑主题配置文件：themes\next\ _config.yml，找到有关 gitment 的设置</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">gitment:   </span><br><span class="line">  <span class="built_in">enable</span>:  <span class="literal">true</span></span><br><span class="line">  mint: <span class="literal">true</span>  </span><br><span class="line">  count: <span class="literal">true</span> </span><br><span class="line">  lazy: <span class="literal">false</span>  <span class="comment">#评论懒加载，如果true，则默认不展示评论，点击按钮查看评论</span></span><br><span class="line">  cleanly: <span class="literal">false</span>  </span><br><span class="line">  language: </span><br><span class="line">  github_user: <span class="comment">#github名称</span></span><br><span class="line">  github_repo: BlogComments<span class="comment">#上一步新建存放评论的仓库名</span></span><br><span class="line">  client_id: b8bad0exxxx<span class="comment">#上面注册 OAuth Application 的 Client ID</span></span><br><span class="line">  client_secret: bcee560xxxxxx<span class="comment">#上面注册 OAuth Application 申请的 Client Secret</span></span><br><span class="line">  proxy_gateway: </span><br><span class="line">  redirect_protocol: <span class="comment"># Protocol of redirect_uri with force_redirect_protocol when mint</span></span><br></pre></td></tr></table></figure><p>初始化</p><p>在设置完成之后，hexo 重新部署</p><p>每篇文章都要点击初始化评论按钮</p><h3 id="评论"><a href="#评论" class="headerlink" title="评论"></a>评论</h3><p>评论显示在新建存放评论的仓库中的 <code>issue</code> 中</p><h3 id="关闭某个页面的评论"><a href="#关闭某个页面的评论" class="headerlink" title="关闭某个页面的评论"></a>关闭某个页面的评论</h3><p>在页面的 <code>Front-matter</code> 中添加 <code>comments</code> 字段，设为 <code>false</code></p><p>比如标签页不想要评论，则在标签页面中做以下设置</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">title: 标签</span><br><span class="line">date: 2015-12-16 17:05:24</span><br><span class="line"><span class="built_in">type</span>: <span class="string">"tags"</span></span><br><span class="line">comments: <span class="literal">false</span></span><br><span class="line">---</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Hexo 的 Next 主题继承了多种评论系统，我在这里介绍两种个人觉得不错的评论系统：&lt;code&gt;Valine&lt;/code&gt; 和 &lt;code&gt;gitment&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;Valine-评论系统&quot;&gt;&lt;a href=&quot;#Valine-评论系统&quot; cl
      
    
    </summary>
    
      <category term="Hexo" scheme="/categories/Hexo/"/>
    
    
      <category term="评论" scheme="/tags/%E8%AF%84%E8%AE%BA/"/>
    
      <category term="Valine" scheme="/tags/Valine/"/>
    
      <category term="gitment" scheme="/tags/gitment/"/>
    
  </entry>
  
  <entry>
    <title>Hexo 个人博客部署到 CentOS 个人服务器</title>
    <link href="/2019/10/30/Hexo-%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2%E5%88%B0-CentOS-%E4%B8%AA%E4%BA%BA%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    <id>/2019/10/30/Hexo-个人博客部署到-CentOS-个人服务器/</id>
    <published>2019-10-30T09:37:20.000Z</published>
    <updated>2019-10-30T10:36:53.214Z</updated>
    
    <content type="html"><![CDATA[<h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><ul><li>在一台 CentOS 7.2 的 ECS 云服务器上快速部署基于 Hexo 的博客站点</li><li>可以在本地简洁快速发布一篇博文到个人云服务器上, 用于个人站点展示</li></ul><h2 id="服务器配置"><a href="#服务器配置" class="headerlink" title="服务器配置"></a>服务器配置</h2><blockquote><p>默认 ROOT 权限登录</p></blockquote><h3 id="nginx-安装配置"><a href="#nginx-安装配置" class="headerlink" title="nginx 安装配置"></a>nginx 安装配置</h3><ul><li><p>安装<code>nginx</code></p><p>参考<code>Nan&#39;s Blog</code>的《搭建http服务器-nginx》文章 - （只需要<code>安装启动</code>即可，其它的配置可不管）。</p></li><li><p><code>nginx</code> 配置<code>（可选）</code></p><p><strong>注：如果这一步配置完，访问服务器 <code>IP 或者域名</code>显示不出来想要的效果，就不必执行这一步了（使用默认的<code>/usr/share/nginx/html</code>即可，注意配置Git时对应的路径改成<code>/usr/share/nginx/html</code>即可）</strong></p><p>创建文件目录, 用于博客站点文件存放, 并更改目录读写权限</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /data/www/hexo</span><br><span class="line"></span><br><span class="line">chown -R <span class="variable">$USER</span>:<span class="variable">$USER</span> /data/www/hexo</span><br><span class="line"></span><br><span class="line">chmod -R 755 /data/www/hexo</span><br></pre></td></tr></table></figure><p>添加 <code>index.html</code> 用于检测配置 nginx 是否成功</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /data/www/hexo/index.html</span><br></pre></td></tr></table></figure><p>添加如下代码:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Nginx running<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>配置 nginx 服务器</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># vim 查找: /listen 80</span></span><br></pre></td></tr></table></figure><p>通过 vim 查找功能找到如下代码, 并修改</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line">server &#123;</span><br><span class="line">      listen       80 default_server;</span><br><span class="line">      listen       [::]:80 default_server;</span><br><span class="line">      server_name  www.xxx.com; <span class="comment"># 填写个人域名（没有就不动）</span></span><br><span class="line">      root         /data/www/hexo;</span><br><span class="line">  &#125;</span><br><span class="line">......</span><br></pre></td></tr></table></figure><p>访问服务器 <code>IP 或者域名</code>显示</p><blockquote><p>Nginx running</p></blockquote><p>nginx 配置成功</p></li></ul><h3 id="Git-安装配置"><a href="#Git-安装配置" class="headerlink" title="Git 安装配置"></a>Git 安装配置</h3><ul><li><p>安装<code>Git</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y git</span><br></pre></td></tr></table></figure></li><li><p><code>Git</code>配置</p><p>创建文件目录, 用于私人 Git 仓库搭建, 并更改目录读写权限</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /data/GitLibrary</span><br><span class="line"></span><br><span class="line">chown -R <span class="variable">$USER</span>:<span class="variable">$USER</span> /data/GitLibrary</span><br><span class="line"></span><br><span class="line">chmod -R 755 /data/GitLibrary</span><br></pre></td></tr></table></figure><ul><li><p>Git 初始化裸库</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /data/GitLibrary</span><br><span class="line">git init --bare blog.git</span><br></pre></td></tr></table></figure></li><li><p>创建 Git 钩子(hook)</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /data/GitLibrary/blog.git/hooks/post-receive</span><br></pre></td></tr></table></figure><p>用于指定 Git 的源代码 和 Git 配置文件</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># 上面的“nginx配置（可选）”成功使用以下配置：</span></span><br><span class="line">git --work-tree=/data/www/hexo --git-dir=/data/GitLibrary/blog.git checkout -f</span><br><span class="line"></span><br><span class="line"><span class="comment"># 上面的“nginx配置（可选）”失败使用以下配置：</span></span><br><span class="line">git --work-tree=/usr/share/nginx/html --git-dir=/data/GitLibrary/blog.git checkout -f</span><br></pre></td></tr></table></figure><p>保存并退出</p></li><li><p>给该文件添加可执行权限</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /data/GitLibrary/blog.git/hooks/post-receiv</span><br></pre></td></tr></table></figure></li></ul></li></ul><h2 id="本地配置"><a href="#本地配置" class="headerlink" title="本地配置"></a>本地配置</h2><p>参考该篇博客：<a href="https://thief.one/2017/03/03/Hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/" target="_blank" rel="noopener">Hexo搭建博客教程</a></p><p>参考意思博客配置完后只需要再修改下<code>_config.yml</code>文件，具体如下：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/hexo001.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#repo: 用户名@域名或 IP 地址:/data/GitLibrary/blog</span></span><br></pre></td></tr></table></figure><h2 id="部署步骤"><a href="#部署步骤" class="headerlink" title="部署步骤"></a>部署步骤</h2><p>将本地部署到服务器</p><ul><li><p>清除缓存</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br></pre></td></tr></table></figure></li><li><p>生成静态页面:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line"><span class="comment"># 即：hexo generate</span></span><br></pre></td></tr></table></figure></li><li><p>将本地静态页面目录部署到云服务器</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br><span class="line"><span class="comment"># 即：hexo deploy</span></span><br></pre></td></tr></table></figure><p>这一步会让你输入服务器密码<code>（每次）</code>：</p><p><img src="/img/hexo002.png" alt=""></p><p>完成 <code>Hexo</code> 个人博客网站搭建, 通过服务器 <code>IP</code> 或者<code>域名</code>即可访问</p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;目标&quot;&gt;&lt;a href=&quot;#目标&quot; class=&quot;headerlink&quot; title=&quot;目标&quot;&gt;&lt;/a&gt;目标&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;在一台 CentOS 7.2 的 ECS 云服务器上快速部署基于 Hexo 的博客站点&lt;/li&gt;
&lt;li&gt;可以在本地简洁快速发布
      
    
    </summary>
    
      <category term="hexo" scheme="/categories/hexo/"/>
    
    
      <category term="博客" scheme="/tags/%E5%8D%9A%E5%AE%A2/"/>
    
      <category term="CentOS" scheme="/tags/CentOS/"/>
    
  </entry>
  
  <entry>
    <title>软件需求，概要设计，详细设计（文档）怎么做，做什么？</title>
    <link href="/2019/10/16/%E8%BD%AF%E4%BB%B6%E9%9C%80%E6%B1%82%EF%BC%8C%E6%A6%82%E8%A6%81%E8%AE%BE%E8%AE%A1%EF%BC%8C%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1%EF%BC%88%E6%96%87%E6%A1%A3%EF%BC%89%E6%80%8E%E4%B9%88%E5%81%9A%EF%BC%8C%E5%81%9A%E4%BB%80%E4%B9%88%EF%BC%9F/"/>
    <id>/2019/10/16/软件需求，概要设计，详细设计（文档）怎么做，做什么？/</id>
    <published>2019-10-16T03:25:39.000Z</published>
    <updated>2019-10-16T03:33:09.027Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>由于项目工作需要 ，需要提供《软件需求规格说明书》，《软件概要设计说明书》和《软件详细设计说明书》。所以这里整理学习一下相关文档需要的内容。文章并不设计对所有需求分析，概要设计和详细设计的详细描述。因为这其中的任何一点都可以单独提取出来成为软件工程学科中的一本书籍内容。</p><h2 id="软件设计的整体流程："><a href="#软件设计的整体流程：" class="headerlink" title="软件设计的整体流程："></a>软件设计的整体流程：</h2><ul><li>软件需求分析阶段：输出了《软件需求规格说明书》，不涉及具体实现方法。用户能看得明白，开发人员也可据此进行下面的工作，<code>搞清楚“要解决什么问题”</code></li><li>概要设计阶段：确定软件系统的总体布局，各个子模块的功能和模块间的关系，与外部系统的关系，选择的技术路线。有一些研究与论证性的内容。并输出《软件概要设计说明书》。<code>搞清楚“总体实现方案”</code></li><li>详细设计阶段：对概要设计的进一步细化，一般由各部分的担当人员依据概要设计分别完成，然后在集成，是具体的实现细节。是“程序”的蓝图，确定每个模块采用的算法、数据结构、接口的实现、属性、参数。并输出《软件详细设计说明书》。<code>搞清楚“每个模块怎么做”</code></li></ul><h2 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h2><h3 id="我们为什么需要《软件需求规格说明书》-？"><a href="#我们为什么需要《软件需求规格说明书》-？" class="headerlink" title="我们为什么需要《软件需求规格说明书》 ？"></a>我们为什么需要《软件需求规格说明书》 ？</h3><p>如果需求的编写只是为了解释说明软件实现的功能，那么良好的编码结构，代码注释就可以很好的实现软件的功能说明，程序员可以将编写需求的时间节约下来进行更多功能的实现； 可是，这样的情况可能更多适用于中小型项目，或者互联网项目，因为这样的项目需求不复杂，并且需求变化很快，所以研发的效率非常重要。然而，针对大型软件项目或者功能比较复杂的系统，软件研发可能是多人协作的成果，所以在信息传递过程中， 我们只有提前考虑好软件需求的内容，才能正确评估开发软件所需要的时间，成本的要素，从而更好的管理项目。</p><h3 id="《软件需求规格说明书》的一般结构"><a href="#《软件需求规格说明书》的一般结构" class="headerlink" title="《软件需求规格说明书》的一般结构"></a>《软件需求规格说明书》的一般结构</h3><ul><li>正文的第一章内容是1.概述，包含<br>1.1.编写目的；1.2.术语与定义；1.3.参考资料；三个部分</li><li>第二章要给出该项目的标准和规范，在文档的后续内容编写中以及项目开发过程中必须遵照这个标准和规范进行。</li><li>第三章应该说明该项目的相关假设、限制和一些依赖条件，在后续系统部署的过程中可以有参考意义。</li><li>第四章“功能规格”是重点，重点介绍这个系统的角色，界面设计思路，系统的功能视图和功能点清单，以及系统的需求用例。这个内容必须详细描述，这样才能对后续的开发和测试提供指导意义。</li><li>第五章“非功能规格”要对项目的性能、安全、数据的备份恢复等内容解释解释说明，一个项目除了功能完整之外，还要考虑性能、安全等相应的要求。</li><li>第六章“附录”，是对软件需求规格说明书的一些补充说明文档，其中的“软件需求跟踪矩阵”是重点，这份文档是对后续需求的完善程度进行了严格的控制。</li></ul><h2 id="概要设计"><a href="#概要设计" class="headerlink" title="概要设计"></a>概要设计</h2><h3 id="《概要设计说明书》的一般结构"><a href="#《概要设计说明书》的一般结构" class="headerlink" title="《概要设计说明书》的一般结构"></a>《概要设计说明书》的一般结构</h3><ul><li>总述：需求或目标（讲一下事情的起源）、环境、局限；</li><li>总体设计：从全局的角度说一下 组织结构、功能、处理流程、有哪些模块、模块间的关系，运行环境等。（输出图：系统结构图，系统流程图，数据流程图，推荐在线画图工具<a href="https://www.processon.com/" target="_blank" rel="noopener">https://www.processon.com/</a>）</li><li>外部接口：总体说明外部用户、软、硬件接口(可用资源)；</li><li>模块设计：每个模块“做什么”、简要说明“怎么做”（输入、输出、处理逻辑、与其它模块或系统的接口），处在什么逻辑位置、物理位置。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">模块设计,可以写以下内容：</span><br><span class="line">   1、模块描述：说明哪些模块实现了哪些功能；</span><br><span class="line">   2、模块层次结构：可以使用某个视角的软件框架图来表达；</span><br><span class="line">   3、模块间的关系：模块间依赖关系的描述，通信机制描述；</span><br><span class="line">   4、模块的核心接口：说明模块传递的信息、信息的结构；</span><br><span class="line">   5、处理方式设计：说一些满足功能和性能的算法；</span><br></pre></td></tr></table></figure><ul><li>数据结构：逻辑结构、物理结构。</li><li>容灾设计：出错信息、出错处理。（可选）</li><li>监控设计：运行模块组合、控制、时间。（可选）</li><li>用户界面设计：（可选）。</li><li>安全设计：（可选）。</li><li>其它设计：（可选）。</li><li>制定规范（附录）： 设计原则,代码规范、接口规约、命名规则。</li></ul><h3 id="概要设计需要注意的地方"><a href="#概要设计需要注意的地方" class="headerlink" title="概要设计需要注意的地方"></a>概要设计需要注意的地方</h3><ul><li>用来评价总体设计的可行性。</li><li>用来检查设计的模块是否完整，保证每一个功能都有对应的模块来实现。</li><li>用来评估开发工作量、指导开发计划（在不写详细设计的情况下）。</li><li>概要设计阶段过于重视业务流程是个误区。</li><li>概要设计阶段过于重视细节实现是个误区。</li></ul><h2 id="详细设计"><a href="#详细设计" class="headerlink" title="详细设计"></a>详细设计</h2><h3 id="《详细设计说明书》的一般结构"><a href="#《详细设计说明书》的一般结构" class="headerlink" title="《详细设计说明书》的一般结构"></a>《详细设计说明书》的一般结构</h3><p>参考<a href="https://blog.csdn.net/xiaxia_1006/article/details/52330202" target="_blank" rel="noopener">如何撰写软件详细设计内容？</a></p><ul><li>引言，包含：<br>编写目的，背景，参考资料，术语定义及说明</li><li>设计概述，包含：任务和目标，需求概述，运行环境概述， 条件与限制，详细设计方法和工具</li><li>系统详细需求分析，包含：详细需求分析，详细系统运行环境及限制条件分析接口需求分析</li><li>总体方案确认，包含： 系统总体结构确认， 系统详细界面划分</li><li>系统详细设计，包含： 系统结构设计及子系统划分，系统功能模块详细设计（采用HIPO图进行功能分解与模块描述，，用IPO或结构图描述各模块的组成结构、算法、模块间的接口关系，以及需求、功能和模块三者之间的交叉参照关系。）, 系统界面详细设计</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">每个模块的描述说明可参照以下格式：</span><br><span class="line"></span><br><span class="line">**模块编号：**</span><br><span class="line"></span><br><span class="line">**模块名称：**</span><br><span class="line"></span><br><span class="line">**输入：**</span><br><span class="line"></span><br><span class="line">**处理：**</span><br><span class="line"></span><br><span class="line">**算法描述：**</span><br><span class="line"></span><br><span class="line">**输出：**</span><br></pre></td></tr></table></figure><ul><li>数据库系统设计</li></ul><h3 id="详细设计需要注意的地方"><a href="#详细设计需要注意的地方" class="headerlink" title="详细设计需要注意的地方"></a>详细设计需要注意的地方</h3><p>如果有或者有必要，特别是大型的软件系统，详细设计阶段划分系统功能模块或子系统。</p><h2 id="概要设计和详细设计的区别"><a href="#概要设计和详细设计的区别" class="headerlink" title="概要设计和详细设计的区别"></a>概要设计和详细设计的区别</h2><h3 id="概要设计阶段"><a href="#概要设计阶段" class="headerlink" title="概要设计阶段"></a>概要设计阶段</h3><p>在这个阶段，设计者会大致考虑并照顾模块的内部实现，但不过多纠缠于此。主要集中于划分模块、分配任务、定义调用关系。模块间的接口与传参在这个阶段要定得十分细致明确，应编写严谨的数据字典，避免后续设计产生不解或误解。概要设计一般不是一次就能做到位，而是反复地进行结构调整。典型的调整是合并功能重复的模块，或者进一步分解出可以复用的模块。在概要设计阶段，应最大限度地提取可以重用的模块，建立合理的结构体系，节省后续环节的工作量。<br>概要设计文档最重要的部分是分层数据流图、结构图、数据字典以及相应的文字说明等。以概要设计文档为依据，各个模块的详细设计就可以并行展开了。</p><h3 id="详细设计阶段"><a href="#详细设计阶段" class="headerlink" title="详细设计阶段"></a>详细设计阶段</h3><p>在这个阶段，各个模块可以分给不同的人去并行设计。在详细设计阶段，设计者的工作对象是一个模块，根据概要设计赋予的局部任务和对外接口，设计并表达出模块的算法、流程、状态转换等内容。这里要注意，如果发现有结构调整（如分解出子模块等）的必要，必须返回到概要设计阶段，将调整反应到概要设计文档中，而不能就地解决，不打招呼。<br>详细设计文档最重要的部分是模块的流程图、状态图、局部变量及相应的文字说明等。</p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://jingyan.baidu.com/article/4ae03de3d7bdc43eff9e6b19.html" target="_blank" rel="noopener">软件需求规格说明书模板</a><br><a href="https://www.cnblogs.com/bmaker/p/6116177.html" target="_blank" rel="noopener">软件概要设计-模板</a><br><a href="http://elf8848.iteye.com/blog/1582323" target="_blank" rel="noopener">软件概要设计做什么，怎么做</a><br><a href="http://elf8848.iteye.com/blog/2165655" target="_blank" rel="noopener">互联网公司研发RD如何撰写总体设计与详细设计文档</a><br><a href="https://bbs.csdn.net/topics/330012397" target="_blank" rel="noopener">项目开发过程中详细设计和概要设计有什么区别和要求?</a><br><a href="https://blog.csdn.net/xiaxia_1006/article/details/52330202" target="_blank" rel="noopener">如何撰写软件详细设计内容？</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;由于项目工作需要 ，需要提供《软件需求规格说明书》，《软件概要设计说明书》和《软件详细设计说明书》。所以这里整理学习一下相关文档需要的内容。
      
    
    </summary>
    
      <category term="文档" scheme="/categories/%E6%96%87%E6%A1%A3/"/>
    
    
      <category term="软件需求" scheme="/tags/%E8%BD%AF%E4%BB%B6%E9%9C%80%E6%B1%82/"/>
    
      <category term="概要设计" scheme="/tags/%E6%A6%82%E8%A6%81%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="详细设计" scheme="/tags/%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>Rainloop安装配置</title>
    <link href="/2019/09/27/Rainloop%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"/>
    <id>/2019/09/27/Rainloop安装配置/</id>
    <published>2019-09-27T01:57:53.000Z</published>
    <updated>2019-09-27T02:11:46.011Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p><code>RainLoop</code>是一个基于<code>WEB</code>的邮件系统，使用<code>PHP</code>开发，通过<code>RainLoop</code>可以将多个邮箱聚合在一起，程序拥有简介的界面和全面的功能，支持<code>SMTP</code>+<code>IMAP</code>，是个人邮件客户端的最佳程序。这里说下安装方法。</p><h2 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h2><p><code>RainLoop</code>要想运行起来需要满足该博客<code>“PHP入门技巧”</code>完成的PHP环境。</p><h2 id="Rainloop安装"><a href="#Rainloop安装" class="headerlink" title="Rainloop安装"></a>Rainloop安装</h2><ol><li>Rainloop官网<ul><li>官方网站：<a href="https://www.rainloop.net" target="_blank" rel="noopener">https://www.rainloop.net</a></li><li>下载地址：<a href="https://www.rainloop.net/downloads" target="_blank" rel="noopener">https://www.rainloop.net/downloads</a></li></ul></li><li>将Rainloop安装包下载后解压上传到你的网站服务器上（<code>/www</code>目录下），然后直接用浏览器访问：<a href="http://wampserver-test.com/?admin，输入以下登录信息登录：" target="_blank" rel="noopener">http://wampserver-test.com/?admin，输入以下登录信息登录：</a><ul><li>用户名：<code>admin</code></li><li>密码：<code>12345</code></li></ul></li></ol><h2 id="RainLoop设置方法"><a href="#RainLoop设置方法" class="headerlink" title="RainLoop设置方法"></a>RainLoop设置方法</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/rainloop001.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>这么些设置，自己摸索，就不多说了</p><h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p><code>RainLoop</code>用<code>PHP</code>开发，正常情况下在<code>PHP</code>环境中就可以运行，有时候并不需要数据库，应用程序不存储电子邮件，应用直接访问邮件服务器和<code>RainLoop</code>显示邮件而已，简单实用！性能方面完全取决于你的服务器内存和网速了，如果您需要启用邮件联系人，则需要用数据库（<code>MySQL</code>），具体可以自行折腾。当然我们自己使用的话，完全没有问题。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;p&gt;&lt;code&gt;RainLoop&lt;/code&gt;是一个基于&lt;code&gt;WEB&lt;/code&gt;的邮件系统，使用&lt;code&gt;PHP&lt;/code&gt;开发，通
      
    
    </summary>
    
      <category term="Rainloop" scheme="/categories/Rainloop/"/>
    
    
      <category term="安装配置" scheme="/tags/%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"/>
    
      <category term="WebMail" scheme="/tags/WebMail/"/>
    
  </entry>
  
  <entry>
    <title>PHP入门技巧</title>
    <link href="/2019/09/24/PHP%E5%85%A5%E9%97%A8%E6%8A%80%E5%B7%A7/"/>
    <id>/2019/09/24/PHP入门技巧/</id>
    <published>2019-09-24T02:01:34.000Z</published>
    <updated>2019-09-24T03:37:39.305Z</updated>
    
    <content type="html"><![CDATA[<h2 id="集成环境"><a href="#集成环境" class="headerlink" title="集成环境"></a>集成环境</h2><h3 id="wamperserver"><a href="#wamperserver" class="headerlink" title="wamperserver"></a>wamperserver</h3><ol><li><p>下载好安装到本地指定目录，官网下载地址  <a href="http://www.wampserver.com" target="_blank" rel="noopener">http://www.wampserver.com</a></p><p><strong>安装成功的标志：</strong></p><ol><li><p>双击运行<code>wamperserver</code>图标后：</p><p><img src="/img/php003.png" alt=""></p></li><li><p>浏览器访问<code>localhost</code>出现以下页面表示安装成功</p><p><img src="/img/php004.png" alt=""></p></li></ol></li><li><p>根据自己实际的安装路径，<code>D:\maliangnansheng\wamp64\bin\apache\apache2.4.39\conf</code>，找到 apache  的配置文件 <code>httpd.conf</code></p><p><img src="/img/php001.png" alt=""></p><p>也可以<code>左键</code>图标直接打开文件修改：</p><p><img src="/img/php002.png" alt=""></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">打开文件httpd.conf文件</span><br><span class="line">搜索Include conf/extra/httpd-vhosts.conf</span><br><span class="line">去掉它前面的#，然后保存这个文件</span><br></pre></td></tr></table></figure></li><li><p>打开<code>D:\maliangnansheng\wamp64\bin\apache\apache2.4.39\conf\extra\httpd-vhosts.conf</code>文件，添加域名映射项，一般是在文件的最后添加上：</p><p><img src="/img/php005.png" alt=""></p><p>也可以<code>左键</code>图标直接打开文件修改：</p><p><img src="/img/php006.png" alt=""></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加的内容：</span></span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">  ServerName wampserver-test.com</span><br><span class="line">  ServerAlias wampserver-test.com</span><br><span class="line">  DocumentRoot <span class="string">"<span class="variable">$&#123;INSTALL_DIR&#125;</span>/www"</span></span><br><span class="line">  &lt;Directory <span class="string">"<span class="variable">$&#123;INSTALL_DIR&#125;</span>/www/"</span>&gt;</span><br><span class="line">    Options +Indexes +Includes +FollowSymLinks +MultiViews</span><br><span class="line">    AllowOverride All</span><br><span class="line">    Require <span class="built_in">local</span></span><br><span class="line">  &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ServerName wampserver-test.com为配置的虚拟站点</span></span><br><span class="line"><span class="comment"># DocumentRoot "$&#123;INSTALL_DIR&#125;/www"项目文件的路径</span></span><br></pre></td></tr></table></figure><p>视图如下：</p><p><img src="/img/php007.png" alt=""></p></li><li><p>找到本机的 host  文件（<code>C:\Windows\System32\drivers\etc</code> ），绑定到本地</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在文件最后添加域名：</span></span><br><span class="line">127.0.0.1 wampserver-test.com</span><br></pre></td></tr></table></figure></li><li><p>重启服务环境，就可以通过域名访问项目了</p><p><img src="/img/php008.png" alt=""></p></li></ol><h3 id="phpStudy"><a href="#phpStudy" class="headerlink" title="phpStudy"></a>phpStudy</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/php009.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="php7-2-废弃each方法"><a href="#php7-2-废弃each方法" class="headerlink" title="php7.2 废弃each方法"></a>php7.2 废弃each方法</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$b = <span class="keyword">array</span>();</span><br><span class="line">each($b);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// Deprecated:  The each() function is deprecated. This message will be suppressed on further calls</span></span><br></pre></td></tr></table></figure><p>each方法<code>替换</code>为</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun_adm_each</span><span class="params">(&amp;$array)</span></span>&#123;</span><br><span class="line">   $res = <span class="keyword">array</span>();</span><br><span class="line">   $key = key($array);</span><br><span class="line">   <span class="keyword">if</span>($key !== <span class="keyword">null</span>)&#123;</span><br><span class="line">       next($array); </span><br><span class="line">       $res[<span class="number">1</span>] = $res[<span class="string">'value'</span>] = $array[$key];</span><br><span class="line">       $res[<span class="number">0</span>] = $res[<span class="string">'key'</span>] = $key;</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">       $res = <span class="keyword">false</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> $res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;集成环境&quot;&gt;&lt;a href=&quot;#集成环境&quot; class=&quot;headerlink&quot; title=&quot;集成环境&quot;&gt;&lt;/a&gt;集成环境&lt;/h2&gt;&lt;h3 id=&quot;wamperserver&quot;&gt;&lt;a href=&quot;#wamperserver&quot; class=&quot;headerlink&quot; 
      
    
    </summary>
    
      <category term="PHP" scheme="/categories/PHP/"/>
    
    
      <category term="技巧" scheme="/tags/%E6%8A%80%E5%B7%A7/"/>
    
      <category term="集成环境" scheme="/tags/%E9%9B%86%E6%88%90%E7%8E%AF%E5%A2%83/"/>
    
  </entry>
  
  <entry>
    <title>EwoMail邮件服务器搭建and配置</title>
    <link href="/2019/09/19/EwoMail%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BAand%E9%85%8D%E7%BD%AE/"/>
    <id>/2019/09/19/EwoMail邮件服务器搭建and配置/</id>
    <published>2019-09-19T08:24:34.000Z</published>
    <updated>2019-09-19T08:58:30.371Z</updated>
    
    <content type="html"><![CDATA[<p><strong>引用：</strong></p><ul><li><a href="http://doc.ewomail.com/docs/ewomail/install" target="_blank" rel="noopener">EwoMail 邮件服务器（开源版文档）</a></li><li><a href="https://www.laozuo.org/12465.html" target="_blank" rel="noopener">利用EwoMail开源软件自建邮件服务器 - 安装设置篇</a></li></ul><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>以下是无错的简单安装流程，如安装过程出错请参见《引用》地址</p><h2 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h2><p>安装前请检查端口，点击查看（<a href="http://doc.ewomail.com/docs/ewomail/not_server" target="_blank" rel="noopener">无法连接服务器</a>）</p><p>centos6/7系统，服务器需要干净环境，要求全新干净系统，不能安装在已有的apache,mysql的环境中。</p><p>最低配置要求<br>CPU：1核<br>内存：1G<br>硬盘：40G</p><p>由于新版本的杀毒软件占用的内存比较多，512M到2GB内存请参考<a href="http://doc.ewomail.com/docs/ewomail/reduce_memory" target="_blank" rel="noopener">降低内存占用</a></p><p>EwoMail安装后会把数据存放在 <code>/ewomail</code> 目录<br>建议你提前创建 <code>/ewomail</code> 目录，并且将硬盘容量挂载或分配到<code>/ewomail</code></p><h2 id="关闭selinux"><a href="#关闭selinux" class="headerlink" title="关闭selinux"></a>关闭selinux</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/selinux</span><br><span class="line"></span><br><span class="line"><span class="comment"># SELINUX=enforcing 改为 SELINUX=disabled</span></span><br></pre></td></tr></table></figure><h2 id="检查swap"><a href="#检查swap" class="headerlink" title="检查swap"></a>检查swap</h2><p>如果没启动swap，这会导致EwoMail的防病毒组件不能启动，所以在安装前先检查swap是否已经启动，如已启动可跳过该步骤。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看swap</span></span><br><span class="line">free -m</span><br></pre></td></tr></table></figure><p>如果swap位置<code>都显示是0</code>，那么系统还没创建swap</p><h3 id="创建swap分区（内存超过2G，可不配置）"><a href="#创建swap分区（内存超过2G，可不配置）" class="headerlink" title="创建swap分区（内存超过2G，可不配置）"></a>创建swap分区<code>（内存超过2G，可不配置）</code></h3><p>创建1G的swap，可以根据你的服务器配置来调整大小</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dd <span class="keyword">if</span>=/dev/zero of=/mnt/swap bs=1M count=1024</span><br></pre></td></tr></table></figure><p>设置交换分区文件</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkswap /mnt/swap</span><br></pre></td></tr></table></figure><p>启动swap</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swapon /mnt/swap</span><br></pre></td></tr></table></figure><p>设置开机时自启用 swap 分区</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 需要修改文件 /etc/fstab 中的 swap 行，在最后-添加以下内容</span></span><br><span class="line">/mnt/swap swap swap defaults 0 0</span><br></pre></td></tr></table></figure><h2 id="邮箱域名"><a href="#邮箱域名" class="headerlink" title="邮箱域名"></a>邮箱域名</h2><p>EwoMail本身是可以配置<code>多个域名</code>来收发邮件的，但在安装前需要<code>一个邮箱的主域名</code>。<br>本次教程例子使用的主域名是sunsheen.cn</p><h2 id="设置主机名（可不配置主机名）"><a href="#设置主机名（可不配置主机名）" class="headerlink" title="设置主机名（可不配置主机名）"></a>设置主机名<code>（可不配置主机名）</code></h2><p>EwoMail在安装后会默认使用域名前缀mail的主机名，例如mail.sunsheen.cn<br>将系统主机名改成mail.sunsheen.cn</p><p>查看当前主机名</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostname -f</span><br></pre></td></tr></table></figure><p>输入命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostnamectl <span class="built_in">set</span>-hostname mail.sunsheen.cn</span><br></pre></td></tr></table></figure><p>修改文件 <code>/etc/hosts</code> , 添加 <code>mail.sunsheen.cn</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/hosts</span><br><span class="line"><span class="comment"># 在文件最后添加一下内容：</span></span><br><span class="line">172.18.11.11 mail.sunsheen.cn mail localhost</span><br></pre></td></tr></table></figure><h2 id="安装EwoMail邮件软件"><a href="#安装EwoMail邮件软件" class="headerlink" title="安装EwoMail邮件软件"></a>安装EwoMail邮件软件</h2><ol><li><p>代码获取渠道</p><blockquote><p>渠道：<a href="http://ewomail.com/list-11.html" target="_blank" rel="noopener">http://ewomail.com/list-11.html</a></p></blockquote><p>输入域名，然后生成安装地址，然后去执行安装</p><p><img src="/img/ewomail001.png" alt=""></p></li><li><p>安装成功</p><p><img src="/img/ewomail002.png" alt=""></p><p>现在就安装成功了，可以访问<code>邮箱管理后台</code>和<code>web邮件系统</code></p></li></ol><h2 id="EwoMail邮件系统登录管理"><a href="#EwoMail邮件系统登录管理" class="headerlink" title="EwoMail邮件系统登录管理"></a>EwoMail邮件系统登录管理</h2><blockquote><p>邮箱管理后台：<a href="http://IP:8010" target="_blank" rel="noopener">http://IP:8010</a> （默认账号admin，密码ewomail123）</p><p>web邮件系统：<a href="http://IP:8000" target="_blank" rel="noopener">http://IP:8000</a></p></blockquote><ul><li><p>web邮件系统-8000</p><p><img src="/img/ewomail003.png" alt=""></p></li><li><p>邮箱管理后台-8010</p><p><img src="/img/ewomail004.png" alt=""></p><p>登录后：</p><p><img src="/img/ewomail005.png" alt=""></p></li></ul><h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;引用：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://doc.ewomail.com/docs/ewomail/install&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;EwoMail 邮件服务器（开源版文
      
    
    </summary>
    
      <category term="EwoMail" scheme="/categories/EwoMail/"/>
    
    
      <category term="邮件服务器" scheme="/tags/%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
      <category term="搭建" scheme="/tags/%E6%90%AD%E5%BB%BA/"/>
    
      <category term="配置" scheme="/tags/%E9%85%8D%E7%BD%AE/"/>
    
  </entry>
  
  <entry>
    <title>Java 远程执行 Linux 的命令</title>
    <link href="/2019/09/05/Java-%E8%BF%9C%E7%A8%8B%E6%89%A7%E8%A1%8C-Linux-%E7%9A%84%E5%91%BD%E4%BB%A4/"/>
    <id>/2019/09/05/Java-远程执行-Linux-的命令/</id>
    <published>2019-09-05T03:30:30.000Z</published>
    <updated>2019-09-10T02:25:14.916Z</updated>
    
    <content type="html"><![CDATA[<p>在 Java 中可以通过 SSH2 协议远程执行 Linux 系统的命令或 Shell 脚本。</p><h2 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h2><p>需添加 <code>ganymed-ssh2-262.jar</code> 、<code>commons-io-2.6.jar</code>、<code>commons-lang3-3.9.jar</code>、<code>fastjson-1.2.58.jar</code>包，Maven 依赖如下：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/ch.ethz.ganymed/ganymed-ssh2 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.ethz.ganymed<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ganymed-ssh2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>262<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/commons-io/commons-io --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.commons/commons-lang3 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/fastjson --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.58<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="api-说明"><a href="#api-说明" class="headerlink" title="api 说明"></a>api 说明</h2><ol><li><p>首先构造一个连接器，传入一个需要登陆的ip地址；</p><p><code>Connection conn = new Connection(hostname);</code></p></li><li><p>模拟登陆目的服务器，传入用户名和密码；</p><p><code>boolean isAuthenticated = conn.authenticateWithPassword(username, password);</code></p><p>它会返回一个布尔值，true 代表成功登陆目的服务器，否则登陆失败。</p></li><li><p>打开一个session，执行你需要的linux 脚本命令；</p><p><code>Session session = conn.openSession();</code><br><code>session.execCommand(“ifconfig”);</code></p></li><li><p>接收目标服务器上的控制台返回结果，读取br中的内容；</p><p><code>InputStream stdout = new StreamGobbler(sess.getStdout());</code><br><code>BufferedReader br = new BufferedReader(new InputStreamReader(stdout));</code></p></li><li><p>得到脚本运行成功与否的标志 ：0－成功 非0－失败</p><p><code>System.out.println(“ExitCode: ” + sess.getExitStatus());</code></p></li><li><p>关闭session和connection</p><p><code>sess.close();</code><br><code>conn.close();</code></p></li></ol><h2 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h2><p>1、通过第2步认证成功后，当前目录就位于/home/username/目录之下，你可以指定脚本文件所在的绝对路径，或者通过cd导航到脚本文件所在的目录，然后传递执行脚本所需要的参数，完成脚本调用执行。</p><p>2、执行脚本以后，可以获取脚本执行的结果文本，需要对这些文本进行正确编码后返回给客户端，避免乱码产生。</p><p>3、如果你需要执行多个linux控制台脚本，比如第一个脚本的返回结果是第二个脚本的入参，你必须打开多个Session,也就是多次调用<br>Session sess = conn.openSession();,使用完毕记得关闭就可以了。</p><h2 id="实例代码"><a href="#实例代码" class="headerlink" title="实例代码"></a>实例代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ch.ethz.ssh2.Connection;</span><br><span class="line"><span class="keyword">import</span> ch.ethz.ssh2.Session;</span><br><span class="line"><span class="keyword">import</span> ch.ethz.ssh2.StreamGobbler;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.util.IOUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 远程执行Linux命令</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 92481</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RemoteExecuteCommand</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 字符编码默认是utf-8</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> String DEFAULTCHART = <span class="string">"UTF-8"</span>;</span><br><span class="line">  <span class="keyword">private</span> Connection conn;</span><br><span class="line">  <span class="keyword">private</span> String ip;</span><br><span class="line">  <span class="keyword">private</span> String userName;</span><br><span class="line">  <span class="keyword">private</span> String userPwd;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">RemoteExecuteCommand</span><span class="params">(String ip, String userName, String userPwd)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.ip = ip;</span><br><span class="line">    <span class="keyword">this</span>.userName = userName;</span><br><span class="line">    <span class="keyword">this</span>.userPwd = userPwd;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">RemoteExecuteCommand</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 远程登录linux主机</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span> 登录成功返回true，否则返回false</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Boolean <span class="title">login</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span> flg = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      conn = <span class="keyword">new</span> Connection(ip);</span><br><span class="line">      <span class="comment">// 连接</span></span><br><span class="line">      conn.connect();</span><br><span class="line">      <span class="comment">// 认证</span></span><br><span class="line">      flg = conn.authenticateWithPassword(userName, userPwd);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"远程连接服务器失败"</span>, e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flg;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 远程执行shll脚本或者命令</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> cmd 即将执行的命令</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span> 命令执行完后返回的结果值</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">(String cmd)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    String result = <span class="string">""</span>;</span><br><span class="line">    Session session = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (login()) &#123;</span><br><span class="line">        <span class="comment">// 打开一个会话</span></span><br><span class="line">        session = conn.openSession();</span><br><span class="line">        <span class="comment">// 执行命令</span></span><br><span class="line">        session.execCommand(cmd);</span><br><span class="line">        result = processStdout(session.getStdout(), DEFAULTCHART);</span><br><span class="line">        <span class="comment">// 如果为输出为空，说明脚本执行出错了</span></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isBlank(result)) &#123;</span><br><span class="line">          result = processStdout(session.getStderr(), DEFAULTCHART);</span><br><span class="line">        &#125;</span><br><span class="line">        conn.close();</span><br><span class="line">        session.close();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"命令执行失败"</span>, e);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">        conn.close();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (session != <span class="keyword">null</span>) &#123;</span><br><span class="line">        session.close();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 解析脚本执行返回的结果集</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> in 输入流对象</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> charset 编码</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span> 以纯文本的格式返回</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">private</span> String <span class="title">processStdout</span><span class="params">(InputStream in, String charset)</span></span></span><br><span class="line"><span class="function">          <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    InputStream stdout = <span class="keyword">new</span> StreamGobbler(in);</span><br><span class="line">    StringBuffer buffer = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">    InputStreamReader isr = <span class="keyword">null</span>;</span><br><span class="line">    BufferedReader br = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      isr = <span class="keyword">new</span> InputStreamReader(stdout, charset);</span><br><span class="line">      br = <span class="keyword">new</span> BufferedReader(isr);</span><br><span class="line">      String line = <span class="keyword">null</span>;</span><br><span class="line">      <span class="keyword">while</span> ((line = br.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">        buffer.append(line + <span class="string">"\n"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"不支持的编码字符集异常"</span>, e);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"读取指纹失败"</span>, e);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      IOUtils.close(br);</span><br><span class="line">      IOUtils.close(isr);</span><br><span class="line">      IOUtils.close(stdout);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> buffer.toString();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    String linuxIP = <span class="string">"172.18.195.253"</span>;</span><br><span class="line">    String usrName = <span class="string">"root"</span>;</span><br><span class="line">    String passwd  = <span class="string">"Jufeng2010"</span>;</span><br><span class="line">    RemoteExecuteCommand rec = <span class="keyword">new</span> RemoteExecuteCommand(linuxIP, usrName, passwd);</span><br><span class="line">    <span class="comment">// 执行命令</span></span><br><span class="line">    System.out.println(rec.execute(<span class="string">"ip a"</span>));</span><br><span class="line">    <span class="comment">// 执行脚本</span></span><br><span class="line"><span class="comment">// rec.execute("sh /etc/init.d/domain.sh hkc.demo.sunsheen.cn 172.18.195.155 8888");</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="例如："><a href="#例如：" class="headerlink" title="例如："></a>例如：</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 执行脚本 （域名访问）</span></span><br><span class="line">rec.execute(<span class="string">"sh /etc/init.d/domain.sh "</span> + domainBef+domainLater + <span class="string">" "</span> + ip + <span class="string">" "</span> + </span><br><span class="line">innerPort + <span class="string">" "</span> + createUserName);</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/init.d/domain.sh</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /etc/nginx/conf.d/</span><br><span class="line"><span class="comment"># 创建配置文件</span></span><br><span class="line">touch <span class="variable">$1_</span><span class="variable">$4</span>.conf;</span><br><span class="line"><span class="comment"># 像配置文件写入内容</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"server &#123;</span></span><br><span class="line"><span class="string">        listen 80;</span></span><br><span class="line"><span class="string">        server_name <span class="variable">$1</span>;</span></span><br><span class="line"><span class="string">        location / &#123;</span></span><br><span class="line"><span class="string">                proxy_pass http://<span class="variable">$2</span>:<span class="variable">$3</span>;</span></span><br><span class="line"><span class="string">                proxy_set_header Host \$host:80;</span></span><br><span class="line"><span class="string">                proxy_set_header X-Real-IP \$remote_addr;</span></span><br><span class="line"><span class="string">                proxy_set_header X-Forwarded-For \$proxy_add_x_forwarded_for;</span></span><br><span class="line"><span class="string">                proxy_set_header Via \"nginx\";</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">&#125;"</span> &gt; <span class="variable">$1_</span><span class="variable">$4</span>.conf;</span><br><span class="line"><span class="comment"># 重启nginx</span></span><br><span class="line">nginx -s reload;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在 Java 中可以通过 SSH2 协议远程执行 Linux 系统的命令或 Shell 脚本。&lt;/p&gt;
&lt;h2 id=&quot;添加依赖&quot;&gt;&lt;a href=&quot;#添加依赖&quot; class=&quot;headerlink&quot; title=&quot;添加依赖&quot;&gt;&lt;/a&gt;添加依赖&lt;/h2&gt;&lt;p&gt;需添加 &lt;co
      
    
    </summary>
    
      <category term="Java远程Linux命令" scheme="/categories/Java%E8%BF%9C%E7%A8%8BLinux%E5%91%BD%E4%BB%A4/"/>
    
    
      <category term="Java" scheme="/tags/Java/"/>
    
      <category term="Linux" scheme="/tags/Linux/"/>
    
      <category term="远程命令" scheme="/tags/%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4/"/>
    
  </entry>
  
  <entry>
    <title>CentOS 7.x - 安装MySQL 5.7</title>
    <link href="/2019/08/21/CentOS-7-x-%E5%AE%89%E8%A3%85MySQL-5-7/"/>
    <id>/2019/08/21/CentOS-7-x-安装MySQL-5-7/</id>
    <published>2019-08-21T06:20:39.000Z</published>
    <updated>2019-08-22T02:59:43.440Z</updated>
    
    <content type="html"><![CDATA[<h1 id="在线安装"><a href="#在线安装" class="headerlink" title="在线安装"></a>在线安装</h1><p>引用：<a href="https://juejin.im/post/5c088b066fb9a049d4419985" target="_blank" rel="noopener">他人博客</a>、<a href="https://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en/" target="_blank" rel="noopener">MySQL官网</a></p><p>yum仓库：<a href="https://dev.mysql.com/downloads/repo/yum/" target="_blank" rel="noopener">下载MySQL Yum存储库</a></p><blockquote><p>CentOS 7的默认yum仓库中并没有MySQL5.7，我们需要手动添加，好在MySQL官方提供了仓库的地址，所以我们能够比较简单地安装MySQL。</p><p>本文我们将介绍CentOS 7下MySQL5.7的安装。</p></blockquote><h2 id="添加MySQL5-7仓库"><a href="#添加MySQL5-7仓库" class="headerlink" title="添加MySQL5.7仓库"></a>添加MySQL5.7仓库</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 地址来源于下载yum存储库时“No thanks, just start my download.”的地址</span></span><br><span class="line"></span><br><span class="line">rpm -ivh https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm</span><br></pre></td></tr></table></figure><h2 id="确认MySQL仓库成功添加"><a href="#确认MySQL仓库成功添加" class="headerlink" title="确认MySQL仓库成功添加"></a>确认MySQL仓库成功添加</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yum repolist all | grep mysql | grep enabled</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果展示像下面,则表示成功添加仓库:</span></span><br><span class="line">mysql-connectors-community/x86_64  MySQL Connectors Community    enabled:     51</span><br><span class="line">mysql-tools-community/x86_64       MySQL Tools Community         enabled:     63</span><br><span class="line">mysql57-community/x86_64           MySQL 5.7 Community Server    enabled:    267</span><br></pre></td></tr></table></figure><h2 id="开始安装MySQL5-7"><a href="#开始安装MySQL5-7" class="headerlink" title="开始安装MySQL5.7"></a>开始安装MySQL5.7</h2><p>这个过程用时较久（取决于你的网速）</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install mysql-community-server</span><br></pre></td></tr></table></figure><h2 id="启动MySQL"><a href="#启动MySQL" class="headerlink" title="启动MySQL"></a>启动MySQL</h2><ol><li><p>启动</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start mysqld</span><br></pre></td></tr></table></figure></li><li><p>设置系统启动时自动启动</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> mysqld</span><br></pre></td></tr></table></figure></li><li><p>查看启动状态</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status mysqld</span><br></pre></td></tr></table></figure></li></ol><h2 id="MySQL的安全设置"><a href="#MySQL的安全设置" class="headerlink" title="MySQL的安全设置"></a>MySQL的安全设置</h2><p>CentOS上的root<code>默认密码</code>可以在文件<code>/var/log/mysqld.log</code>找到，通过下面命令可以打印出来</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 该命令只能查询默认的初始密码（如果修改了密码，并不能查询到更改后的密码）</span></span><br><span class="line">cat /var/<span class="built_in">log</span>/mysqld.log | grep -i <span class="string">'temporary password'</span></span><br></pre></td></tr></table></figure><p>执行下面命令进行安全设置，这个命令会进行设置root密码设置，移除匿名用户，禁止root用户远程连接等</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_secure_installation</span><br></pre></td></tr></table></figure><h3 id="MySQL5-7初始化密码报错"><a href="#MySQL5-7初始化密码报错" class="headerlink" title="MySQL5.7初始化密码报错"></a>MySQL5.7<code>初始化密码</code>报错</h3><p>报错信息：<code>ERROR 1820 (HY000): You must reset your password using ALTER USER statement before</code></p><ol><li><p><strong>mysql5.6是密码为空直接进入数据库的，但是mysql5.7就需要初始密码</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /var/<span class="built_in">log</span>/mysqld.log | grep -i <span class="string">'temporary password'</span></span><br></pre></td></tr></table></figure><p><img src="/img/mysql001.png" alt=""></p></li><li><p><strong>然后执行 <code>mysql -uroot -p</code> ，输入上面的到的密码进入，用该密码登录后，必须马上修改新的密码，不然会报如下错误：</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br></pre></td></tr></table></figure><p><img src="/img/mysql002.png" alt=""></p></li><li><p><strong>如果你想要设置一个简单的测试密码的话，比如设置为<code>777888</code>，会提示这个错误，报错的意思就是你的密码不符合要求</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter user <span class="string">'root'</span>@<span class="string">'localhost'</span> identified by <span class="string">'777888'</span>;</span><br></pre></td></tr></table></figure><p><img src="/img/mysql003.png" alt=""></p></li><li><p><strong>这个其实与validate_password_policy的值有关</strong></p><p><code>validate_password_policy</code>有以下取值：</p><p><img src="/img/mysql004.png" alt=""></p><p>默认是1，即MEDIUM，所以刚开始设置的密码<code>必须符合长度</code>，且<code>必须含有数字，小写或大写字母，特殊字符</code>。<br>有时候，只是为了自己测试，不想密码设置得那么复杂，譬如说，我只想设置root的密码为<code>777888</code>。<br>必须修改两个全局参数：</p><p>首先，修改<code>validate_password_policy</code>参数的值</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; <span class="built_in">set</span> global validate_password_policy=0;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure><p><code>validate_password_length</code>(密码长度)参数默认为8，我们修改为1</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; <span class="built_in">set</span> global validate_password_length=1;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure></li><li><p><strong>完成之后再次执行修改密码语句即可成功</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter user <span class="string">'root'</span>@<span class="string">'localhost'</span> identified by <span class="string">'777888'</span>;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure></li></ol><h3 id="CentOS-如何修改MySQL用户root的密码"><a href="#CentOS-如何修改MySQL用户root的密码" class="headerlink" title="CentOS 如何修改MySQL用户root的密码"></a>CentOS 如何修改MySQL用户root的密码</h3><ol><li><p><strong>用帐号登录mysql</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br><span class="line"></span><br><span class="line">Enter password:<span class="comment"># 输入原密码</span></span><br></pre></td></tr></table></figure></li><li><p><strong>改变用户数据库</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use mysql;</span><br><span class="line">Reading table information <span class="keyword">for</span> completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line"></span><br><span class="line">Database changed</span><br></pre></td></tr></table></figure></li><li><p><strong>修改密码，记得密码要用<code>password()</code>函数进行加密，一定不要忘记！！！</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 5.6版本修改密码</span></span><br><span class="line">mysql&gt; update user <span class="built_in">set</span> password=password(<span class="string">'Your new password'</span>) <span class="built_in">where</span> user=<span class="string">'root'</span>;</span><br><span class="line">Query OK, 1 row affected (0.04 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.7版本下的mysql数据库下已经没有password这个字段了，password字段改成了authentication_string</span></span><br><span class="line">mysql&gt; update mysql.user <span class="built_in">set</span> authentication_string=password(<span class="string">'Your new password'</span>) <span class="built_in">where</span> user=<span class="string">'root'</span>;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br></pre></td></tr></table></figure></li><li><p><strong>刷新权限表</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure></li><li><p><strong>退出MySQL</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; quit</span><br><span class="line">Bye</span><br></pre></td></tr></table></figure></li><li><p><strong>重启MySQL</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart mysqld</span><br></pre></td></tr></table></figure></li></ol><h2 id="设置数据库编码为utf8"><a href="#设置数据库编码为utf8" class="headerlink" title="设置数据库编码为utf8"></a>设置数据库编码为utf8</h2><ol><li><p>打开配置文件</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/my.cnf</span><br></pre></td></tr></table></figure></li><li><p>在[mysqld]，[client]，[mysql]节点下添加编码设置（<code>原本就有的替换、没有的追加</code>成下面的内容）</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES<span class="comment">#解释见附录 ***</span></span><br><span class="line">collation-server = utf8_unicode_ci</span><br><span class="line">init-connect=<span class="string">'SET NAMES utf8'</span></span><br><span class="line">character-set-server = utf8</span><br></pre></td></tr></table></figure></li><li><p>重启MySQL即可</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart mysqld</span><br></pre></td></tr></table></figure></li></ol><h1 id="离线安装"><a href="#离线安装" class="headerlink" title="离线安装"></a>离线安装</h1><h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><h2 id="sql-mode-常用值说明"><a href="#sql-mode-常用值说明" class="headerlink" title="sql_mode 常用值说明"></a>sql_mode 常用值说明</h2><p>引用：<a href="https://segmentfault.com/a/1190000005936172" target="_blank" rel="noopener">MySQL sql_mode 说明</a></p><p>官方手册专门有一节介绍 <a href="https://dev.mysql.com/doc/refman/5.6/en/sql-mode.html" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.6/en/sql-mode.html</a> 。 SQL Mode 定义了两个方面：MySQL应支持的SQL语法，以及应该在数据上执行何种确认检查。</p><h3 id="SQL语法支持类"><a href="#SQL语法支持类" class="headerlink" title="SQL语法支持类"></a>SQL语法支持类</h3><ul><li><p><strong>ONLY_FULL_GROUP_BY</strong> 对于GROUP BY聚合操作，如果在SELECT中的列、HAVING或者ORDER BY子句的列，没有在GROUP BY中出现，那么这个SQL是不合法的。是可以理解的，因为不在 group by 的列查出来展示会有矛盾。<br>在5.7中默认启用，所以在实施5.6升级到5.7的过程需要注意：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> Expression #1 of SELECT list is not in GROUP BY</span><br><span class="line">clause and contains nonaggregated column</span><br><span class="line">&apos;1066export.ebay_order_items.TransactionID&apos; which</span><br><span class="line">is not functionally dependent on columns in GROUP BY</span><br><span class="line">clause; this is incompatible with sql_mode=only_full_group_by</span><br></pre></td></tr></table></figure></li><li><p><strong>ANSI_QUOTES</strong> 启用 ANSI_QUOTES 后，不能用双引号来引用字符串，因为它被解释为识别符，作用与 <code>一样。设置它以后，</code>update t set f1=”” …`，会报 Unknown column ‘’ in ‘field list 这样的语法错误。</p></li><li><p><strong>PIPES_AS_CONCAT</strong> 将 <code>||</code> 视为字符串的连接操作符而非 或 运算符，这和Oracle数据库是一样的，也和字符串的拼接函数 CONCAT() 相类似。</p></li><li><p><strong>NO_TABLE_OPTIONS</strong> 使用 <code>SHOW CREATE TABLE</code> 时不会输出MySQL特有的语法部分，如 <code>ENGINE</code> ，这个在使用 mysqldump 跨DB种类迁移的时候需要考虑。</p></li><li><p><strong>NO_AUTO_CREATE_USER</strong> 字面意思不自动创建用户。在给MySQL用户授权时，我们习惯使用 <code>GRANT ... ON ... TO dbuser</code> 顺道一起创建用户。设置该选项后就与oracle操作类似，授权之前必须先建立用户。5.7.7开始也默认了。</p></li></ul><h3 id="数据检查类"><a href="#数据检查类" class="headerlink" title="数据检查类"></a>数据检查类</h3><ul><li><strong>NO_ZERO_DATE</strong> 认为日期 ‘0000-00-00’ 非法，与是否设置后面的严格模式有关。<ol><li>如果设置了严格模式，则 NO_ZERO_DATE 自然满足。但如果是 INSERT IGNORE 或 UPDATE IGNORE，’0000-00-00’依然允许且只显示warning</li><li>如果在非严格模式下，设置了<code>NO_ZERO_DATE</code>，效果与上面一样，’0000-00-00’允许但显示warning；如果没有设置<code>NO_ZERO_DATE</code>，no warning，当做完全合法的值。</li><li><code>NO_ZERO_IN_DATE</code>情况与上面类似，不同的是控制日期和天，是否可为 0 ，即 <code>2010-01-00</code> 是否合法。</li></ol></li><li><strong>NO_ENGINE_SUBSTITUTION</strong> 使用 <code>ALTER TABLE</code>或<code>CREATE TABLE</code> 指定 ENGINE 时， 需要的存储引擎被禁用或未编译，该如何处理。启用<code>NO_ENGINE_SUBSTITUTION</code>时，那么直接抛出错误；不设置此值时，CREATE用默认的存储引擎替代，ATLER不进行更改，并抛出一个 warning .</li><li><strong>STRICT_TRANS_TABLES</strong> 设置它，表示启用严格模式。<br>注意 <code>STRICT_TRANS_TABLES</code> 不是几种策略的组合，单独指 <code>INSERT</code>、<code>UPDATE</code>出现少值或无效值该如何处理：<ol><li>前面提到的把 ‘’ 传给int，严格模式下非法，若启用非严格模式则变成0，产生一个warning</li><li>Out Of Range，变成插入最大边界值</li><li>A value is missing when a new row to be inserted does not contain a value for a non-NULL column that has no explicit DEFAULT clause in its definition</li></ol></li></ul><p>上面并没有囊括所有的 SQL Mode，选了几个代表性的，详细还是 <a href="https://mariadb.com/kb/en/mariadb/sql_mode/" target="_blank" rel="noopener">看手册</a>。</p><p>sql_mode一般来说很少去关注它，没有遇到实际问题之前不会去启停上面的条目。我们常设置的 sql_mode 是 <code>ANSI</code>、<code>STRICT_TRANS_TABLES</code>、<code>TRADITIONAL</code>，ansi和traditional是上面的几种组合。</p><ul><li><code>ANSI</code>：更改语法和行为，使其更符合标准SQL<br>相当于REAL_AS_FLOAT, PIPES_AS_CONCAT, ANSI_QUOTES, IGNORE_SPACE</li><li><code>TRADITIONAL</code>：更像传统SQL数据库系统，该模式的简单描述是当在列中插入不正确的值时“给出错误而不是警告”。<br>相当于 STRICT_TRANS_TABLES, STRICT_ALL_TABLES, NO_ZERO_IN_DATE, NO_ZERO_DATE, ERROR_FOR_DIVISION_BY_ZERO, NO_AUTO_CREATE_USER, NO_ENGINE_SUBSTITUTION</li><li><code>ORACLE</code>：相当于 PIPES_AS_CONCAT, ANSI_QUOTES, IGNORE_SPACE, NO_KEY_OPTIONS, NO_TABLE_OPTIONS, NO_FIELD_OPTIONS, NO_AUTO_CREATE_USER</li></ul><p>无论何种mode，产生error之后就意味着单条sql执行失败，对于支持事务的表，则导致当前事务回滚；但如果没有放在事务中执行，或者不支持事务的存储引擎表，则可能导致数据不一致。MySQL认为，相比直接报错终止，数据不一致问题更严重。于是 <code>STRICT_TRANS_TABLES</code> 对非事务表依然尽可能的让写入继续，比如给个”最合理”的默认值或截断。而对于 <code>STRICT_ALL_TABLES</code>，如果是单条更新，则不影响，但如果更新的是多条，第一条成功，后面失败则会出现部分更新。</p><p>5.6.6 以后版本默认就是<code>NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</code>，5.5默认为 ‘’ 。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;在线安装&quot;&gt;&lt;a href=&quot;#在线安装&quot; class=&quot;headerlink&quot; title=&quot;在线安装&quot;&gt;&lt;/a&gt;在线安装&lt;/h1&gt;&lt;p&gt;引用：&lt;a href=&quot;https://juejin.im/post/5c088b066fb9a049d4419985&quot; t
      
    
    </summary>
    
      <category term="MySQL" scheme="/categories/MySQL/"/>
    
    
      <category term="数据库" scheme="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
      <category term="MySQL" scheme="/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>Servlet登录拦截器</title>
    <link href="/2019/07/11/Servlet%E7%99%BB%E5%BD%95%E6%8B%A6%E6%88%AA%E5%99%A8/"/>
    <id>/2019/07/11/Servlet登录拦截器/</id>
    <published>2019-07-11T08:24:23.000Z</published>
    <updated>2019-07-11T08:30:38.716Z</updated>
    
    <content type="html"><![CDATA[<p>代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sunsheen.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.Filter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.FilterChain;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.FilterConfig;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.sunsheen.jfids.system.config.Configs;</span><br><span class="line"><span class="keyword">import</span> com.sunsheen.jfids.system.security.login.Session;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet 登录过滤器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 92481</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">LoginFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, </span></span></span><br><span class="line"><span class="function"><span class="params">                         FilterChain chain)</span><span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        HttpServletRequest req = (HttpServletRequest) request;</span><br><span class="line">        <span class="comment">//获取url地址</span></span><br><span class="line">        String reqUrl = req.getRequestURI();</span><br><span class="line"><span class="comment">//        System.out.println("reqURL----------" + reqUrl);</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 登录操作不做页面跳转</span></span><br><span class="line">    <span class="keyword">if</span>(reqUrl.contains(<span class="string">"/hkcloud/login.w.xhtml"</span>) </span><br><span class="line">    || reqUrl.contains(<span class="string">"/hkcloud/getUser"</span>)</span><br><span class="line">    || reqUrl.contains(<span class="string">"/hkcloud/login"</span>) </span><br><span class="line">    || reqUrl.contains(<span class="string">"/static/"</span>)</span><br><span class="line">    || reqUrl.endsWith(<span class="string">".css"</span>)</span><br><span class="line">    || reqUrl.endsWith(<span class="string">".js"</span>))&#123;</span><br><span class="line">    </span><br><span class="line">    chain.doFilter(request, response);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">        HttpSession session = Session.getHttpSession();</span><br><span class="line">        String apiKey = (String) session.getAttribute(<span class="string">"ApiKey"</span>);</span><br><span class="line">        </span><br><span class="line">        HttpServletResponse res = (HttpServletResponse) response;</span><br><span class="line">        <span class="comment">// 如果session中存在apiKey证明用户登录，可以放行。否则认为未登陆重定向到登录界面</span></span><br><span class="line">        <span class="keyword">if</span> (apiKey == <span class="keyword">null</span> || apiKey.equals(<span class="string">""</span>)) &#123;</span><br><span class="line">        <span class="comment">// 登录页面地址</span></span><br><span class="line">        String loginUrl = Configs.get(<span class="string">"AllConfig.loginUrl"</span>);</span><br><span class="line">        <span class="comment">//如果request.getHeader("X-Requested-With") 返回的是"XMLHttpRequest"</span></span><br><span class="line">            <span class="comment">//说明就是ajax请求，需要特殊处理</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="string">"XMLHttpRequest"</span>.equals(req.getHeader(<span class="string">"X-Requested-With"</span>)))&#123;</span><br><span class="line">                <span class="comment">//告诉ajax我是重定向</span></span><br><span class="line">            res.setHeader(<span class="string">"redirect"</span>, <span class="string">"redirect"</span>);</span><br><span class="line">                <span class="comment">//告诉ajax我重定向的路径</span></span><br><span class="line">                res.setHeader(<span class="string">"url"</span>, req.getContextPath() + loginUrl);</span><br><span class="line">                res.setStatus(HttpServletResponse.SC_FORBIDDEN);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            res.sendRedirect(req.getContextPath() + loginUrl);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            chain.doFilter(request, response);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig fConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注：</strong></p><p><code>ajax请求返回重定向信息</code></p><p>在项目中，考虑到web前台ajax请求未登录资源时，后台返回的重定向信息，ajax不能自动判断是否是重定向，以下是一种折中方法：</p><p>前端jquery.ajax默认设置，<code>ajax设置要放在程序ajax调用前</code>，我一般<code>放在公共js中统一引用到文件头里的</code>，这样调用ajax的时候就无需操心其他设置了</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ajax默认设置 包括默认提交方式为POST， 判断后台是否是重定向</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">$.ajaxSetup(&#123;</span><br><span class="line"><span class="comment">// 设置ajax请求结束后的执行动作</span></span><br><span class="line">complete : <span class="function"><span class="keyword">function</span>(<span class="params">XMLHttpRequest, textStatus</span>) </span>&#123;</span><br><span class="line"><span class="comment">// 通过XMLHttpRequest取得响应头，redirect</span></span><br><span class="line"><span class="keyword">var</span> redirect = XMLHttpRequest.getResponseHeader(<span class="string">"redirect"</span>);</span><br><span class="line"><span class="keyword">if</span> (redirect == <span class="string">"redirect"</span>) &#123; <span class="comment">// 若HEADER中含有redirect说明后端想重定向</span></span><br><span class="line"><span class="keyword">var</span> win = <span class="built_in">window</span>;</span><br><span class="line"><span class="keyword">while</span> (win != win.top) &#123;</span><br><span class="line">win = win.top;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 将后端重定向的地址取出来,使用win.location.href去实现重定向的要求</span></span><br><span class="line">win.location.href = XMLHttpRequest.getResponseHeader(<span class="string">"url"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">type : <span class="string">'POST'</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;代码如下：&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br
      
    
    </summary>
    
      <category term="Java" scheme="/categories/Java/"/>
    
    
      <category term="拦截器" scheme="/tags/%E6%8B%A6%E6%88%AA%E5%99%A8/"/>
    
      <category term="filter" scheme="/tags/filter/"/>
    
  </entry>
  
  <entry>
    <title>Java汉字转拼音pinyin4j用法</title>
    <link href="/2019/07/03/Java%E6%B1%89%E5%AD%97%E8%BD%AC%E6%8B%BC%E9%9F%B3pinyin4j%E7%94%A8%E6%B3%95/"/>
    <id>/2019/07/03/Java汉字转拼音pinyin4j用法/</id>
    <published>2019-07-03T10:04:41.000Z</published>
    <updated>2019-08-22T03:09:21.196Z</updated>
    
    <content type="html"><![CDATA[<p>来源：<a href="https://www.jianshu.com/p/57a6600d2862" target="_blank" rel="noopener">https://www.jianshu.com/p/57a6600d2862</a></p><h2 id="工具介绍"><a href="#工具介绍" class="headerlink" title="工具介绍"></a>工具介绍</h2><p>pinyin4j 是一个支持将<code>简体</code>和<code>繁体</code>中文转换到成拼音的Java开源类库；</p><h3 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h3><ul><li>支持同一汉字有多个发音</li><li>还支持拼音的格式化输出，比如第几声之类的，</li><li>同时支持简体中文、繁体中文转换为拼音…使用起来也非常简单。下面是其官方网址，其中提供了下载：<ul><li>pinyin4j的<a href="http://sourceforge.net/projects/pinyin4j/files/" target="_blank" rel="noopener">官方下载地址</a></li><li>Maven仓库</li></ul></li></ul><h3 id="目录结构及说明"><a href="#目录结构及说明" class="headerlink" title="目录结构及说明"></a>目录结构及说明</h3><p><code>doc :</code> pinyin4j的api文档</p><p><code>lib :</code> pinyin4j的jar包</p><p><code>src:</code> pinyin4j的源代码</p><p><code>CHANGELOG.txt :</code> pinyin4j的版本更新日志</p><p><code>COPYING.txt :</code> LICENSE说明</p><p><code>README.txt :</code> pinyin4j的概要介绍</p><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>pinyin4j使用了一个.txt的文本文件（uicode_to_hanyu_pinyin.txt）用来存储汉字unicode编码与拼音的对应关系，通过读取该配置文件达到转换的目的。该属性文件存储信息的基本格式如下：89E3 (jie3,jie4,xie4)   //(对应汉字”解”)89E3 是汉字对应的unicode编码的16进制数，(jie3,jie4,xie4)是该汉字对应的三种读音(在汉语里有多音字)，说明pinyin4j支持多音字的处理pinyin4j的处理过程是这样的：根据String的toCharArray方法得到每个字符（得到”解”字的unicode编码，实际上是35299，由于java中char和String都是unicode编码的可以直接转为int型的编码数据35299），然后利用Integer.toHexString(c1).toUpperCase()将其转换成16进制数[也就是89E3]，通过读取配置文件得到“解”字的拼音(jie3,jie4,xie4)，那么这里有三个拼音，pinyin4j的默认取值为第一个，也就是jie3[表示读jie，声调是三声]</p><h2 id="pinyin4J-使用"><a href="#pinyin4J-使用" class="headerlink" title="pinyin4J 使用"></a>pinyin4J 使用</h2><p>pinyin4j 提供的工具类为<code>PinyinHelper</code>,里边提供了静态方法</p><ul><li><code>toHanyuPinyinString()</code>(过时)</li><li><code>toHanyuPinyinStringArray()</code></li></ul><p>pinyin4j 中有四个辅助类分别是：</p><ul><li>HanyuPinyinCaseType</li><li>HanyuPinyinToneType</li><li>HanyuPinyinVCharType</li><li>HanyuPinyinOutputFormat</li></ul><p>具体功能和用法见一下代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">HanyuPinyinOutputFormat defaultFormat = <span class="keyword">new</span> HanyuPinyinOutputFormat();</span><br><span class="line"><span class="comment">// 控制大小写</span></span><br><span class="line"><span class="comment">// UPPERCASE：大写  (ZHONG)</span></span><br><span class="line"><span class="comment">// LOWERCASE：小写  (zhong)</span></span><br><span class="line">defaultFormat.setCaseType(HanyuPinyinCaseType.UPPERCASE);</span><br><span class="line"><span class="comment">// WITHOUT_TONE：无音标  (zhong)</span></span><br><span class="line"><span class="comment">// WITH_TONE_NUMBER：1-4数字表示英标  (zhong4)</span></span><br><span class="line"><span class="comment">// WITH_TONE_MARK：直接用音标符（必须WITH_U_UNICODE否则异常）  (zhòng)</span></span><br><span class="line">defaultFormat.setToneType(HanyuPinyinToneType.WITH_TONE_NUMBER);</span><br><span class="line"><span class="comment">// WITH_V：用v表示ü  (nv)</span></span><br><span class="line"><span class="comment">// WITH_U_AND_COLON：用"u:"表示ü  (nu:)</span></span><br><span class="line"><span class="comment">// WITH_U_UNICODE：直接用ü (nü)</span></span><br><span class="line">defaultFormat.setVCharType(HanyuPinyinVCharType.WITH_U_UNICODE);</span><br><span class="line"><span class="comment">// oHanyuPinyinStringArray如果传入的字符不是汉字不能转换成拼音，那么会直接返回null。</span></span><br><span class="line">String[] pinyin = PinyinHelper.toHanyuPinyinStringArray(<span class="string">'重'</span>, defaultFormat);</span><br><span class="line"><span class="keyword">for</span>(String str: pinyin)&#123;</span><br><span class="line">    System.out.println(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>结果：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZHONG4</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CHONG2</span><br></pre></td></tr></table></figure><h3 id="其他工具类"><a href="#其他工具类" class="headerlink" title="其他工具类"></a>其他工具类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获得汉语拼音【首字母】</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> chines</span></span><br><span class="line"><span class="comment"> *            汉字</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getAlpha</span><span class="params">(String chines)</span> </span>&#123;</span><br><span class="line">    String pinyinName = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">char</span>[] nameChar = chines.toCharArray();</span><br><span class="line">    HanyuPinyinOutputFormat defaultFormat = <span class="keyword">new</span> HanyuPinyinOutputFormat();</span><br><span class="line">    defaultFormat.setCaseType(HanyuPinyinCaseType.UPPERCASE);</span><br><span class="line">    defaultFormat.setToneType(HanyuPinyinToneType.WITHOUT_TONE);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nameChar.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nameChar[i] &gt; <span class="number">128</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                pinyinName += PinyinHelper.toHanyuPinyinStringArray(</span><br><span class="line">                        nameChar[i], defaultFormat)[<span class="number">0</span>].charAt(<span class="number">0</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (BadHanyuPinyinOutputFormatCombination e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            pinyinName += nameChar[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pinyinName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将字符串中的中文转化为【拼音】,英文字符不变</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> inputString</span></span><br><span class="line"><span class="comment"> *            汉字</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getPingYin</span><span class="params">(String inputString)</span> </span>&#123;</span><br><span class="line">    HanyuPinyinOutputFormat format = <span class="keyword">new</span> HanyuPinyinOutputFormat();</span><br><span class="line">    format.setCaseType(HanyuPinyinCaseType.LOWERCASE);</span><br><span class="line">    format.setToneType(HanyuPinyinToneType.WITHOUT_TONE);</span><br><span class="line">    format.setVCharType(HanyuPinyinVCharType.WITH_V);</span><br><span class="line">    String output = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">if</span> (inputString != <span class="keyword">null</span> &amp;&amp; inputString.length() &gt; <span class="number">0</span></span><br><span class="line">            &amp;&amp; !<span class="string">"null"</span>.equals(inputString)) &#123;</span><br><span class="line">        <span class="keyword">char</span>[] input = inputString.trim().toCharArray();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; input.length; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (java.lang.Character.toString(input[i]).matches(</span><br><span class="line">                        <span class="string">"[\\u4E00-\\u9FA5]+"</span>)) &#123;</span><br><span class="line">                    String[] temp = PinyinHelper.toHanyuPinyinStringArray(</span><br><span class="line">                            input[i], format);</span><br><span class="line">                    output += temp[<span class="number">0</span>];</span><br><span class="line">                &#125; <span class="keyword">else</span></span><br><span class="line">                    output += java.lang.Character.toString(input[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (BadHanyuPinyinOutputFormatCombination e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"*"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> output;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;来源：&lt;a href=&quot;https://www.jianshu.com/p/57a6600d2862&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.jianshu.com/p/57a6600d2862&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=
      
    
    </summary>
    
      <category term="Java" scheme="/categories/Java/"/>
    
    
      <category term="汉字转拼音" scheme="/tags/%E6%B1%89%E5%AD%97%E8%BD%AC%E6%8B%BC%E9%9F%B3/"/>
    
      <category term="pinyin4j" scheme="/tags/pinyin4j/"/>
    
  </entry>
  
  <entry>
    <title>CloudStack API编程指南</title>
    <link href="/2019/07/02/CloudStack-API%E7%BC%96%E7%A8%8B%E6%8C%87%E5%8D%97/"/>
    <id>/2019/07/02/CloudStack-API编程指南/</id>
    <published>2019-07-02T02:09:30.000Z</published>
    <updated>2019-07-02T02:26:31.194Z</updated>
    
    <content type="html"><![CDATA[<p>来源：<a href="https://blog.csdn.net/u012124304/article/details/76152234" target="_blank" rel="noopener">https://blog.csdn.net/u012124304/article/details/76152234</a></p><h2 id="角色"><a href="#角色" class="headerlink" title="角色"></a>角色</h2><p>CloudStack API支持三种角色访问：</p><ol><li>根域管理员</li><li>域管理员</li><li>普通用户</li></ol><h2 id="提交API请求"><a href="#提交API请求" class="headerlink" title="提交API请求"></a>提交API请求</h2><p>所有CloudStack API请求都是以HTTP GET/POST的形式提交，一个请求包含下面三部分：</p><ul><li><code>API的URL地址：</code>即web服务API的入口地址(如： <a href="http://localhost:8080/client/api" target="_blank" rel="noopener">http://localhost:8080/client/api</a>)</li><li><code>命令：</code>你想要执行的web服务命令，如启动一个虚拟机</li><li><code>参数：</code>该命令所需要的必要或可选参数</li></ul><p>一个API请求的例子如下：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/client/api</span><br><span class="line">?<span class="built_in">command</span>=deployVirtualMachine</span><br><span class="line">&amp;serviceOfferingId=1</span><br><span class="line">&amp;diskOfferingId=1</span><br><span class="line">&amp;templateId=2</span><br><span class="line">&amp;zoneId=4</span><br><span class="line">&amp;apiKey=miVr6X7u6bN_sdahOBpjNejPgEsT35eXqjB8CG20YI3yaxXcgpyuaIRmFI_EJTVwZ0nUkkJbPmY3y2bciKwFQ</span><br><span class="line">&amp;signature=Lxx1DM40AjcXU%2FcaiK8RAP0O1hU%3D</span><br><span class="line"></span><br><span class="line"><span class="comment">#第1行就是CloudStack API的URL； </span></span><br><span class="line"><span class="comment">####第2行表示我们想要执行的命令； </span></span><br><span class="line"><span class="comment">###第3-6行是该命令所需的参数，命令和参数的详情具体可以参考API文档； </span></span><br><span class="line"><span class="comment">##第7行是唯一标识用户的账户的API Key； </span></span><br><span class="line"><span class="comment">#第8行是用来认证用户账户执行API命令权限的签名的哈希值</span></span><br></pre></td></tr></table></figure><h2 id="API请求的签名"><a href="#API请求的签名" class="headerlink" title="API请求的签名"></a>API请求的签名</h2><p>不管你是通过HTTP还是HTTPS的方式访问CloudStack API，都必须对请求进行签名从而让CloudStack能确认调用者已经被认证和授权执行该命令。在进行签名之前先确认你拥有API Key和管理员提供给你的账户的私钥。 </p><p>以上面的API请求为例子，每个API请求都包含以下几个部分：</p><ul><li><code>基本的URL：</code><a href="http://localhost:8080" target="_blank" rel="noopener">http://localhost:8080</a></li><li><code>API的路径：</code>处理请求的API Servlet的路径：/client/api?</li><li><code>命令字符串：</code>包括命令，命令的参数以及标志用户账户的API Key，需要注意的是，参数的键是不区分大小写的，而参数的值是区分大小写的</li><li><code>签名：</code>使用用户的私钥和HMAC SHA-1哈希算法生成的签名</li></ul><p><strong>生成签名的步骤：</strong></p><ol><li><p>命令字符串中的每个键值对<code>（以&amp;分隔开）</code>，URL对每个值进行编码从而使其能通过HTTP GET安全地发送</p></li><li><p>将命令字符串的字母全部<code>转换成小写</code>，并且对键值对按<code>字母顺序进行排序</code>，结果类似下面的形式： </p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">apikey=mivr6x7u6bn_sdahobpjnejpgest35exq-jb8cg20yi3yaxxcgpyuairmfi_ejtvwz0nukkjbpmy3y2bcikwfq</span><br><span class="line">&amp;<span class="built_in">command</span>=deployvirtualmachine</span><br><span class="line">&amp;diskofferingid=1</span><br><span class="line">&amp;serviceofferingid=1</span><br><span class="line">&amp;templateid=2</span><br><span class="line">&amp;zoneid=4</span><br></pre></td></tr></table></figure></li><li><p>将排序好的命令字符串和用户的私钥使用<code>HMAC SHA-1哈希算法</code>进行编码，在使用<code>Base64</code>将结果字节数组编码成<code>UTF-8</code>形式，最终得到的签名为：<code>Lxx1DM40AjcXU%2FcaiK8RAP0O1hU%3D</code></p></li></ol><h2 id="设置API调用失效时间"><a href="#设置API调用失效时间" class="headerlink" title="设置API调用失效时间"></a>设置API调用失效时间</h2><p>在不安全的通道如HTTP上，我们可以设置一个API调用逾期时间戳来防止重播攻击（replay attacks），服务器会追踪这个时间戳，并拒绝超过这个期限的后续的所有API调用。<br>在API请求中加入以下参数可实现这个特性：</p><ul><li>signatureVersion=3</li><li>expires=YYYY-MM-DDThh:mm:ssZ</li></ul><h2 id="限制API调用频率"><a href="#限制API调用频率" class="headerlink" title="限制API调用频率"></a>限制API调用频率</h2><p>避免对管理服务器的恶意攻击，防止性能下降以及对所有账户提供一致性，当API调用超过一定阈值后会向这些调用返回错误信息。调用者需要等待一段时间后重试一下。可以通过一下全局参数来设置API的调用频率限制：</p><ol><li>api.throttling.enabled：默认为false，即不限制API调用频率</li><li>api.throttling.interval ：以秒为单位</li><li>api.throttling.max：每个间隔周期接受的最大请求数</li><li>api.throttling.cachesize：存放API调用计数器的缓存，每个账户需要一个cache来存放该账户运行的API总数</li></ol><p>API调用频率限制的不足之处：</p><ul><li>存在多个管理服务器的时候，不同管理服务器的cache之间不是同步的，所以可能出现允许通过的请求数比设置的值要大的情况，最糟糕的情况下可能出现允许通过的请求数为：限制值*管理服务器数量</li><li>尽管如此，CloudStack还是可以有效地避免恶意攻击导致的服务拒绝</li></ul><h2 id="API响应"><a href="#API响应" class="headerlink" title="API响应"></a>API响应</h2><p>CloudStack支持两种响应格式：<code>XML和JSON</code>，默认的响应是XML，可以在请求URL中使用<code>&amp;response=json</code>来设置JSON格式的响应。<code>使用JSON格式时，如果一个响应的键没有值，则该键不会出现在响应中，而XML仍会返回一个空的元素。</code></p><h2 id="最大返回结果页"><a href="#最大返回结果页" class="headerlink" title="最大返回结果页"></a>最大返回结果页</h2><p>对于每个云，一个命令在一个页面中返回的结果数有一个默认的上限，以此来防止云服务器过载和防止DOS攻击。<br>每个云的默认上限值是不同的，通过全局参数default.page.size来配置。如果云上有许多用户运行了许多虚拟机的话，可以把这个值设置大一点，但要小心不要设置得太大了。</p><h2 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h2><p>如果在处理一个API请求的时候发生了错误，会返回特定格式的响应。每个错误信息响应包含一个错误代码和一个文本描述可能出错的原因。<br>如果用户的签名错误或没有权限导致请求被拒绝会返回一个HTTP 401错误</p><h2 id="异步命令"><a href="#异步命令" class="headerlink" title="异步命令"></a>异步命令</h2><p>异步命令可以隐式地执行那些耗时很长的任务，如创建一个快照。它和同步命令有以下几点不同：</p><ul><li>API引用以一个a来区分</li><li>提交后会马上返回一个任务ID</li><li>如果是创建资源的命令，在返回任务ID的同时还会返回资源ID</li></ul><p>使用异步命令的关键在于Job ID，它在命令被执行后马上返回。使用Job ID，通过queryAsyncJobResult命令我们可以周期性地检查任务的状态，这个命令返回3种可能的任务状态</p><ul><li>0-Job表示程序还在进行</li><li>1-Job表示成功地完成了</li><li>2-Job表示执行失败</li></ul><p>查询命令执行状态的命令：<code>command=queryAsyncJobResult&amp;jobId=1</code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;来源：&lt;a href=&quot;https://blog.csdn.net/u012124304/article/details/76152234&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://blog.csdn.net/u012124304/ar
      
    
    </summary>
    
      <category term="CloudStack" scheme="/categories/CloudStack/"/>
    
    
      <category term="云计算" scheme="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/"/>
    
      <category term="api" scheme="/tags/api/"/>
    
  </entry>
  
  <entry>
    <title>VPS搭建属于自己的SS代理</title>
    <link href="/2019/06/10/VPS%E6%90%AD%E5%BB%BA%E5%B1%9E%E4%BA%8E%E8%87%AA%E5%B7%B1%E7%9A%84SS%E4%BB%A3%E7%90%86/"/>
    <id>/2019/06/10/VPS搭建属于自己的SS代理/</id>
    <published>2019-06-10T08:09:06.000Z</published>
    <updated>2019-06-10T08:40:53.564Z</updated>
    
    <content type="html"><![CDATA[<h2 id="安装shadowsocks"><a href="#安装shadowsocks" class="headerlink" title="安装shadowsocks"></a>安装shadowsocks</h2><h3 id="第一条命令"><a href="#第一条命令" class="headerlink" title="第一条命令"></a>第一条命令</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载脚本shadowsocks.sh</span></span><br><span class="line">wget --no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 等待下载完成...</span></span><br></pre></td></tr></table></figure><h3 id="第二条命令"><a href="#第二条命令" class="headerlink" title="第二条命令"></a>第二条命令</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 为shadowsocks.sh添加执行权限</span></span><br><span class="line">chmod +x shadowsocks.sh</span><br></pre></td></tr></table></figure><h3 id="第三条命令"><a href="#第三条命令" class="headerlink" title="第三条命令"></a>第三条命令</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./shadowsocks.sh 2&gt;&amp;1 | tee shadowsocks.log</span><br><span class="line"></span><br><span class="line"><span class="comment"># 中间会提示我们输入一些信息</span></span><br></pre></td></tr></table></figure><p><strong>中间会提示你输入你的SS server的账号，和端口。不输入就是默认。跑完命令后会出来你的SS客户端的信息。特别注意，由于iphone端的目前只支持到<code>cfb</code>，所以我们选择<code>aes-256-cfb</code>，即7，这一步按回车继续然后需要几分钟的安装过程，请耐心等待出现下面的画面！</strong></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/shadowsocks001.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;安装shadowsocks&quot;&gt;&lt;a href=&quot;#安装shadowsocks&quot; class=&quot;headerlink&quot; title=&quot;安装shadowsocks&quot;&gt;&lt;/a&gt;安装shadowsocks&lt;/h2&gt;&lt;h3 id=&quot;第一条命令&quot;&gt;&lt;a href=&quot;#第一条命
      
    
    </summary>
    
      <category term="shadowsocks" scheme="/categories/shadowsocks/"/>
    
    
      <category term="vps" scheme="/tags/vps/"/>
    
      <category term="shadowsocks" scheme="/tags/shadowsocks/"/>
    
      <category term="翻墙" scheme="/tags/%E7%BF%BB%E5%A2%99/"/>
    
  </entry>
  
  <entry>
    <title>Centos7.x中磁盘管理及扩展</title>
    <link href="/2019/05/28/Centos7-x%E4%B8%AD%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86%E5%8F%8A%E6%89%A9%E5%B1%95/"/>
    <id>/2019/05/28/Centos7-x中磁盘管理及扩展/</id>
    <published>2019-05-28T06:51:39.000Z</published>
    <updated>2019-11-27T08:48:42.447Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前提要求："><a href="#前提要求：" class="headerlink" title="前提要求："></a>前提要求：</h2><p>虚拟机：centos7.x</p><p>在安装Centos系统时，磁盘选择为<code>LVM</code>逻辑卷。当选择为LVM后才能创建逻辑卷等（必须）</p><p>数据格式选择的是<code>xfs</code>，很多讲解使用的是ext3，但以后xfs的优势会比ext越来越大。（可选）</p><p>LVM是Logical Volume Manager（逻辑卷管理）的简写，它是Linux环境下对硬盘分区进行管理的一种机制。LVM是建立在硬盘和分区上的逻辑层，它允许跨硬盘、分区创建逻辑卷并创建文件系统，可以很方便执行<code>增加、扩展、删除</code>等操作。</p><h2 id="CentOS7查看硬盘情况"><a href="#CentOS7查看硬盘情况" class="headerlink" title="CentOS7查看硬盘情况"></a>CentOS7查看硬盘情况</h2><blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt; lsblk<span class="comment">#查看分区和磁盘</span></span><br><span class="line">&gt; </span><br><span class="line">&gt; df -h <span class="comment">#查看空间使用情况</span></span><br><span class="line">&gt; </span><br><span class="line">&gt; fdisk -l<span class="comment">#分区工具查看分区信息</span></span><br><span class="line">&gt; </span><br><span class="line">&gt; cfdisk /dev/sda<span class="comment">#查看分区</span></span><br><span class="line">&gt; </span><br><span class="line">&gt; blkid<span class="comment">#查看硬盘label（别名）</span></span><br><span class="line">&gt; </span><br><span class="line">&gt; du -sh ./*<span class="comment">#统计当前目录各文件夹大小</span></span><br><span class="line">&gt; </span><br><span class="line">&gt; free -h<span class="comment">#查看内存大小</span></span><br><span class="line">&gt; </span><br><span class="line">&gt; cat /proc/cpuinfo| grep <span class="string">"cpu cores"</span>| uniq<span class="comment">#查看cpu核心数</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><h2 id="扩容磁盘挂载"><a href="#扩容磁盘挂载" class="headerlink" title="扩容磁盘挂载"></a>扩容磁盘挂载</h2><h3 id="物理卷（PV）"><a href="#物理卷（PV）" class="headerlink" title="物理卷（PV）"></a>物理卷（PV）</h3><p>物理卷（Physical Volume,PV）：就是指硬盘分区，也可以是整个硬盘或已创建的软RAID，是LVM的基本存储设备。在创建逻辑卷之前需要先创建物理卷，然后将多个物理卷组合创建卷组，最后在卷组的基础上创建逻辑卷。</p><p>可以将空白硬盘或分区加入主机，系统识别到新的硬盘sdb后，使用pvcreate对硬盘创建PV。</p><p>添加新硬盘或直接扩展分区的方式：`直接扩展/或直接新添加一个硬盘</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lsblk<span class="comment">#列出系统上所有的磁盘</span></span><br><span class="line">df -h<span class="comment">#检查文件系统的磁盘空间占用情况</span></span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/lvm1.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>可以看出磁盘vda还有200多G的空白磁盘没有挂载。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">fdisk /dev/vda<span class="comment">#回车</span></span><br><span class="line">p<span class="comment">#回车</span></span><br><span class="line">n<span class="comment">#回车</span></span><br><span class="line">默认   <span class="comment">#回车</span></span><br><span class="line">默认   <span class="comment">#回车</span></span><br><span class="line">默认   <span class="comment">#回车</span></span><br><span class="line">默认   <span class="comment">#回车</span></span><br><span class="line">t<span class="comment">#回车</span></span><br><span class="line">默认   <span class="comment">#回车</span></span><br><span class="line">8e<span class="comment">#回车</span></span><br><span class="line">p<span class="comment">#回车</span></span><br><span class="line">w<span class="comment">#回车</span></span><br><span class="line">reboot<span class="comment">#回车</span></span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/lvm2.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/lvm3.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pvcreate /dev/vda3<span class="comment">#创建物理卷</span></span><br><span class="line">pvdisplay</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/lvm4.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="卷组（VG）"><a href="#卷组（VG）" class="headerlink" title="卷组（VG）"></a>卷组（VG）</h3><p>卷组（Volume Group,VG）：是由一个或多个物理卷所组成的存储池，在卷组上能创建一个或多个逻辑卷。现在使用<code>vgcreate</code>命令对上文创建的PV（单个物理卷）创建卷组。 </p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vgcreate -s 10M vg0 /dev/vda3<span class="comment">#创建卷组vg0,指定物理块PE大小10M,并将pv:/dev/vda3加入vg0</span></span><br><span class="line">vgdisplay<span class="comment"># 查看所有卷组的信息.后面接具体卷组名,可查看指定卷组信息</span></span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/lvm5.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pvdisplay<span class="comment"># 查看所当前物理卷的信息.后面可接具体物理卷设备,可查看指定物理卷信息</span></span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/lvm6.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="创建逻辑卷（LV）"><a href="#创建逻辑卷（LV）" class="headerlink" title="创建逻辑卷（LV）"></a>创建逻辑卷（LV）</h3><p>逻辑卷（Logical Volume,LV）：类似于非LVM系统中的硬盘分区，它建立在卷组之上，是一个标准的块设备，在逻辑卷之上可以建立文件系统。可以使用<code>lvcreate</code>命令创建逻辑卷 </p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@hewanli-mysql ~]<span class="comment"># lvcreate -n lv0 -l 100%vg vg0#使用vg0的全部空间创建逻辑卷lv0</span></span><br><span class="line">  Logical volume <span class="string">"lv0"</span> created.</span><br><span class="line">[root@hewanli-mysql ~]<span class="comment"># lvdisplay</span></span><br><span class="line">  --- Logical volume ---</span><br><span class="line">  LV Path                /dev/vg0/lv0</span><br><span class="line">  LV Name                lv0</span><br><span class="line">  VG Name                vg0</span><br><span class="line">  LV UUID                uz1Ej1-mC6D-9MBf-Sdbc-2UQS-frMm-AsuzbC</span><br><span class="line">  LV Write Access        <span class="built_in">read</span>/write</span><br><span class="line">  LV Creation host, time hewanli-mysql, 2019-05-28 03:44:32 -0400</span><br><span class="line">  LV Status              available</span><br><span class="line">  <span class="comment"># open                 0</span></span><br><span class="line">  LV Size                249.99 GiB</span><br><span class="line">  Current LE             25599</span><br><span class="line">  Segments               1</span><br><span class="line">  Allocation             inherit</span><br><span class="line">  Read ahead sectors     auto</span><br><span class="line">  - currently <span class="built_in">set</span> to     8192</span><br><span class="line">  Block device           253:3</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pvdisplay</span><br><span class="line">lsblk -f /dev/vda</span><br><span class="line"><span class="comment">#会在/dev下生成一个新的设备文件：</span></span><br><span class="line">ll /dev/vg0/lv0</span><br><span class="line">ll /dev/dm-0</span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/lvm7.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h3><p>在逻辑卷lv0创建完成后还需要创建文件系统并挂载到指定目录才能够使用,当然还需要将挂载信息写入/etc/fstab文件 </p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mkfs.xfs /dev/vg0/lv0<span class="comment"># 创建文件系统</span></span><br><span class="line">lsblk /dev/vda -f</span><br><span class="line">lsblk /dev/vg0/lv0 -f</span><br><span class="line"><span class="comment"># 将逻辑卷挂载到指定目录（/data），如果改为其他，则以下所有/data都要改成对应的目录（根目录/不可以）</span></span><br><span class="line"><span class="keyword">if</span>(/data目录不存在)&#123;</span><br><span class="line">mkdir /data &amp;&amp; mount /dev/vg0/lv0 /data</span><br><span class="line">&#125; <span class="keyword">else</span>&#123;</span><br><span class="line">mount /dev/vg0/lv0 /data</span><br><span class="line">&#125;</span><br><span class="line">df -T<span class="comment"># 查看挂载点</span></span><br><span class="line">blkid /dev/vg0/lv0<span class="comment">#注意UUID，下面命令会使用</span></span><br><span class="line">df -T /dev/vg0/lv0</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"UUID=2fb5642b-0167-4709-9d35-85a407b4801a /data                 xfs    defaults        0 0"</span> &gt;&gt; /etc/fstab<span class="comment">#UUID填自己的（上面命令结果有输出）</span></span><br><span class="line">cat /etc/fstab | egrep <span class="string">"UUID"</span></span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/lvm8.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lsblk<span class="comment">#列出系统上所有的磁盘</span></span><br><span class="line">df -h<span class="comment">#检查文件系统的磁盘空间占用情况</span></span><br></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/lvm9.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="扩展逻辑卷"><a href="#扩展逻辑卷" class="headerlink" title="扩展逻辑卷"></a>扩展逻辑卷</h3><p>我们可以很方便的多逻辑卷进行扩展，不论是使用新的空白磁盘还是已有的空白分区。其大致实现原理为：对空白分区创建物理卷，然后将物理卷加入到需要扩展逻辑卷所在的卷组，最后扩大逻辑卷空间。如果逻辑卷所在的卷组还有空闲的空间（PE）可被使用且足够大，则甚至不需要另外的分区或者磁盘。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsblk -f /dev/vda</span><br></pre></td></tr></table></figure><h2 id="新增磁盘挂载"><a href="#新增磁盘挂载" class="headerlink" title="新增磁盘挂载"></a>新增磁盘挂载</h2><h3 id="Linux-分区命令parted简单使用步骤"><a href="#Linux-分区命令parted简单使用步骤" class="headerlink" title="Linux 分区命令parted简单使用步骤"></a>Linux 分区命令parted简单使用步骤</h3><p>由于fdisk命令无法对大于2T的硬盘进行分区（MBR分区表只支持2T以下磁盘，大于2T的磁盘必须使用GPT分区表），所以需要用到parted命令实现。这里将一个12T的硬盘分成2个分区，一个7.5T,另一个4.5T，并格式化成ext4挂载。</p><ol><li><p>使用parted将硬盘分为两个主分区啊</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">parted /dev/sdb   <span class="comment">#进入交互模式</span></span><br><span class="line">GNU Parted 1.8.1 Using /dev/sdb Welcome to GNU Parted! Type ‘<span class="built_in">help</span>’ to view a list of commands.</span><br><span class="line">(parted) mklabel gpt  <span class="comment"># 将MBR磁盘格式化为GPT</span></span><br><span class="line">(parted) <span class="built_in">print</span>  <span class="comment">#打印当前分区，由于还没有创建，所以看不到</span></span><br><span class="line">(parted) mkpart primary 0 5TB  <span class="comment"># 分一个5T的主分区</span></span><br><span class="line">(parted) mkpart primary 5TB 8TB  <span class="comment"># 再分一个3T的主分区</span></span><br><span class="line">(parted) <span class="built_in">print</span>  <span class="comment">#再次打印分区查看信息</span></span><br><span class="line">(parted) quit  <span class="comment">#退出</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#使用parted命令分区后的磁盘无法再用fdisk进行分区操作</span></span><br></pre></td></tr></table></figure></li><li><p>将分区格式化为ext4格式</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># mkfs.ext4 /dev/sdb1</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkfs.ext4 /dev/sdb2</span></span><br></pre></td></tr></table></figure></li><li><p>挂载分区</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost]<span class="comment"># mount -t ext4 /dev/sdb1 /bk</span></span><br><span class="line">[root@localhost]<span class="comment"># mount -t ext4 /dev/sdb2 /mail</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># df -Th</span></span><br><span class="line">Filesystem    Type    Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/sdb1     ext4    4.1T   194M  3.9T  1% /bk</span><br><span class="line">/dev/sdb2     ext4    6.8T   179M  6.4T  1% /mail</span><br></pre></td></tr></table></figure></li><li><p>修改<code>vi /etc/fstab</code>，使其开机自动挂载</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/dev/sdb1       /bk          ext4            defaults      1 2</span><br><span class="line">/dev/sdb2      /mail       ext4           defaults         1 2</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;前提要求：&quot;&gt;&lt;a href=&quot;#前提要求：&quot; class=&quot;headerlink&quot; title=&quot;前提要求：&quot;&gt;&lt;/a&gt;前提要求：&lt;/h2&gt;&lt;p&gt;虚拟机：centos7.x&lt;/p&gt;
&lt;p&gt;在安装Centos系统时，磁盘选择为&lt;code&gt;LVM&lt;/code&gt;逻辑卷
      
    
    </summary>
    
      <category term="Linux" scheme="/categories/Linux/"/>
    
    
      <category term="Centos7.x" scheme="/tags/Centos7-x/"/>
    
      <category term="磁盘管理及扩展" scheme="/tags/%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86%E5%8F%8A%E6%89%A9%E5%B1%95/"/>
    
  </entry>
  
  <entry>
    <title>Gson使用技巧</title>
    <link href="/2019/05/22/Gson%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/"/>
    <id>/2019/05/22/Gson使用技巧/</id>
    <published>2019-05-22T07:29:44.000Z</published>
    <updated>2019-05-22T07:36:30.343Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Gson获取json字符串中key对应的值"><a href="#Gson获取json字符串中key对应的值" class="headerlink" title="Gson获取json字符串中key对应的值"></a>Gson获取json字符串中key对应的值</h2><p>字符串 ：</p><p>//得到服务器返回的具体内容</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> String res = response.body().string();</span><br></pre></td></tr></table></figure><p>例1：<code>{&quot;code&quot;:100,&quot;msg&quot;:&quot;处理成功！&quot;,&quot;extend&quot;:{&quot;jsonString&quot;:{&quot;userId&quot;:1,&quot;userName&quot;:&quot;123&quot;,&quot;userPwd&quot;:&quot;123&quot;}}}</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">jsonObject = (JsonObject) <span class="keyword">new</span> JsonParser().parse(res).getAsJsonObject();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取  code：</span></span><br><span class="line">jsonObject.get(<span class="string">"code"</span>).getAsInt();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取  userName：</span></span><br><span class="line">jsonObject.get(<span class="string">"extend"</span>)</span><br><span class="line">    .getAsJsonObject().get(<span class="string">"jsonString"</span>)</span><br><span class="line">    .getAsJsonObject().get(<span class="string">"userName"</span>)</span><br><span class="line">    .getAsString()</span><br></pre></td></tr></table></figure><p>例2：<code>{&quot;code&quot;:100,&quot;msg&quot;:&quot;处理成功！&quot;,&quot;extend&quot;:{&quot;jsonString&quot;:[{&quot;userId&quot;:1,&quot;userName&quot;:&quot;123&quot;,&quot;userPwd&quot;:&quot;123&quot;}]}}</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">jsonObject = (JsonObject) <span class="keyword">new</span> JsonParser().parse(res).getAsJsonObject();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取  code：</span></span><br><span class="line">String code = jsonObject.get(<span class="string">"code"</span>).getAsInt();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取  userName：</span></span><br><span class="line">String userName = jsonObject.get(<span class="string">"extend"</span>)</span><br><span class="line">    .getAsJsonObject().get(<span class="string">"jsonString"</span>)</span><br><span class="line">    .getAsJsonArray().get(<span class="number">0</span>)</span><br><span class="line">    .getAsJsonObject().get(<span class="string">"userName"</span>)</span><br><span class="line">    .getAsString()</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Gson获取json字符串中key对应的值&quot;&gt;&lt;a href=&quot;#Gson获取json字符串中key对应的值&quot; class=&quot;headerlink&quot; title=&quot;Gson获取json字符串中key对应的值&quot;&gt;&lt;/a&gt;Gson获取json字符串中key对应的值&lt;/
      
    
    </summary>
    
      <category term="Gson" scheme="/categories/Gson/"/>
    
    
      <category term="Java" scheme="/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>java调用外部接口</title>
    <link href="/2019/05/22/java%E8%B0%83%E7%94%A8%E5%A4%96%E9%83%A8%E6%8E%A5%E5%8F%A3/"/>
    <id>/2019/05/22/java调用外部接口/</id>
    <published>2019-05-22T07:24:59.000Z</published>
    <updated>2019-05-22T07:28:42.223Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Java调用外部接口的方法，最终返回接口response的信息"><a href="#Java调用外部接口的方法，最终返回接口response的信息" class="headerlink" title="Java调用外部接口的方法，最终返回接口response的信息"></a>Java调用外部接口的方法，最终返回接口<code>response</code>的信息</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">String strURL = <span class="string">"这里是你要调用的接口地址"</span>;</span><br><span class="line">URL url = <span class="keyword">new</span> URL(strURL);</span><br><span class="line">HttpURLConnection httpConn = (HttpURLConnection)url.openConnection();</span><br><span class="line">httpConn.setRequestMethod(<span class="string">"GET"</span>);</span><br><span class="line">httpConn.connect();</span><br><span class="line">BufferedReader reader = <span class="keyword">new</span> BufferedReader(</span><br><span class="line">    <span class="keyword">new</span> InputStreamReader(httpConn.getInputStream()));</span><br><span class="line">String line;</span><br><span class="line">StringBuffer buffer = <span class="keyword">new</span> StringBuffer();</span><br><span class="line"><span class="keyword">while</span> ((line = reader.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">    buffer.append(line);</span><br><span class="line">&#125;</span><br><span class="line">reader.close();</span><br><span class="line">httpConn.disconnect();</span><br><span class="line"></span><br><span class="line">System.out.println(buffer.toString());</span><br></pre></td></tr></table></figure><p><strong>最终这里<code>buffer.toString();</code>就是接口<code>response</code>的值</strong></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Java调用外部接口的方法，最终返回接口response的信息&quot;&gt;&lt;a href=&quot;#Java调用外部接口的方法，最终返回接口response的信息&quot; class=&quot;headerlink&quot; title=&quot;Java调用外部接口的方法，最终返回接口response的信
      
    
    </summary>
    
      <category term="调用外部接口" scheme="/categories/%E8%B0%83%E7%94%A8%E5%A4%96%E9%83%A8%E6%8E%A5%E5%8F%A3/"/>
    
    
      <category term="Java" scheme="/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Jboss在Linux下的使用技巧</title>
    <link href="/2019/05/10/Jboss%E5%9C%A8Linux%E4%B8%8B%E7%9A%84%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/"/>
    <id>/2019/05/10/Jboss在Linux下的使用技巧/</id>
    <published>2019-05-10T08:52:52.000Z</published>
    <updated>2019-05-10T08:52:52.601Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Linux下远程连接MySQL数据库</title>
    <link href="/2019/05/08/Linux%E4%B8%8B%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    <id>/2019/05/08/Linux下远程连接MySQL数据库/</id>
    <published>2019-05-08T15:43:12.000Z</published>
    <updated>2019-08-21T09:05:34.326Z</updated>
    
    <content type="html"><![CDATA[<ol><li><p><strong>在服务器端开启远程访问</strong></p><p>首先进入mysql数据库</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br><span class="line">Enter password: <span class="comment">#输入密码</span></span><br></pre></td></tr></table></figure><p>然后输入下面两个命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; grant all privileges on *.* to <span class="string">'root'</span>@<span class="string">'%'</span> identified by <span class="string">'password'</span>;</span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果该命令报错“ERROR 1819 (HY000): Your password does not satisfy the current policy requirements”，就先执行以下两个命令后再执行上面的命令</span></span><br><span class="line">mysql&gt; <span class="built_in">set</span> global validate_password_policy=0;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="built_in">set</span> global validate_password_length=1;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; flush privileges;</span><br></pre></td></tr></table></figure><ul><li><p>第一个*是数据库，可以改成允许访问的数据库名称</p></li><li><p>第二个<em> 是数据库的表名称，</em>代表允许访问任意的表</p></li><li>root代表远程登录使用的用户名，可以自定义</li><li>%代表允许任意ip登录，如果你想指定特定的IP，可以把%替换掉就可以了</li><li><code>password</code>代表<code>远程登录时使用的密码</code>，可以自定义</li><li><code>flush privileges;</code>这是让权限立即生效</li></ul></li><li><p><strong>修改<code>my.cnf</code>配置文件</strong></p><p>这个是mysql的配置文件，如果你无标题文章找不到在哪里的话，可以输入<code>find /* -name my.cnf</code> 找到<br>通过vim编辑该文件，找到<code>bind-address = 127.0.0.1</code>这一句（如果没有就不管），然后在前面加个#号注释掉，保存退出</p></li><li><p><strong>重启服务</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service mysql restart</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">systemctl restart mysqld</span><br></pre></td></tr></table></figure></li><li><p><strong>开放3306端口（端口以自己实际情况为准）</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看开发端口情况</span></span><br><span class="line">firewall-cmd --list-all</span><br><span class="line"><span class="comment"># 开发3306端口</span></span><br><span class="line">firewall-cmd --zone=public --add-port=3306/tcp --permanent</span><br><span class="line"><span class="comment"># 重启防火墙</span></span><br><span class="line">systemctl restart firewalld</span><br></pre></td></tr></table></figure></li><li><p><strong>在本地远程连接</strong></p><p>在终端输入：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -h 服务器ip地址 -P 3306 -u root -p</span><br></pre></td></tr></table></figure><p>然后输入密码即可。</p><p>也可以使用连接工具连接，例如<code>Navicat</code></p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;在服务器端开启远程访问&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;首先进入mysql数据库&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class
      
    
    </summary>
    
      <category term="MySQL" scheme="/categories/MySQL/"/>
    
    
      <category term="Linux" scheme="/tags/Linux/"/>
    
      <category term="远程连接" scheme="/tags/%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5/"/>
    
  </entry>
  
</feed>
